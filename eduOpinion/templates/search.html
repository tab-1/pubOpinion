


<html>
<head>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">




<html>
<head>


    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="renderer" content="webkit">

    <title>新浪微舆情-舆情信息|报告|分析|监控-社会化大数据应用平台</title>
    <meta name="author" content="" />
    <meta name="keywords" content="微信舆情监测,微博舆情监控,舆情监测, 舆情APP ,舆情客户端，舆情软件,互联网舆情,视频舆情,海外媒体，舆情APP ,舆情客户端，舆情预警" />
    <meta name="description" content="新浪舆情是中国最大的微博舆情舆论服务平台，提供网页、微博、微信等全媒体舆情信息网以及网络舆情,舆情负面事件分析,舆情管理,军犬舆情, 舆情报告,舆情监控, 舆情监测软件,海外媒体监测,竞争情报服务等。" />
    <meta name="searchtitle" content="舆情监控,舆情监测,微博舆情监控,舆情监控软件,舆情监测系统,互联网舆情监测,舆情监控系统,互联网舆情监控,舆情监测软件,网络舆情监控系统" />
    <script>
        // 百度统计代码
        // 	var _hmt = _hmt || [];
        // 	(function() {
        // 		var hm = document.createElement("script");
        // 		hm.src = "//hm.baidu.com/hm.js?aaac48a09e76ccc8767f661174d83b89";
        // 		var s = document.getElementsByTagName("script")[0];
        // 		s.parentNode.insertBefore(hm, s);
        // 	})();
    </script>
</head>

<script type="text/javascript">

    var njxImgSrc='';
    var actionBase='';
    var staticResourcePath = 'http://cdn.files.51wyq.cn/web';
    var qrCodeImg = 'http://app.51wyq.cn/QRCode/wyq_d_entry.png';
</script>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/jquery-1.10.2.min.js?v=201711171830'></script>
<!-- 导航条用户的下拉效果-->
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/index.js?v=201711171830"></script>
<!-- 页面右侧的客户端展示的效果-->
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/zzsc.js?v=201711171830"></script>
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/navigate.js?v=201711171830"></script>
<link href="http://cdn.files.51wyq.cn/web/css/style.css?v=201711171830" rel="stylesheet" type="text/css">
<link href="http://cdn.files.51wyq.cn/web/css/zzsc.css?v=201711171830" rel="stylesheet" type="text/css">
<link href="http://cdn.files.51wyq.cn/web/css/font-icon.css?v=201711171830" rel="stylesheet" type="text/css">
<div id='wx_pic' style='margin:0 auto;display:none;'>
    <img src='http://cdn.files.51wyq.cn/web/images/share.png' />
</div>
<!--
// 轻应用
<script type='text/javascript' src='http://tjs.sjs.sinajs.cn/open/thirdpart/js/frame/appclient.js' charset='utf-8'></script>
<script>
	$(function() {
		setInterval(function() {
			if (App) {
				document.body.style.height = '0px';
				document.body.style.height = 'auto';
				App.trigger('setPageHeight', $('body').css('height'));
			}
		}, 1000);
	});
</script>

// 微博内部应用
<script src="http://js.t.sinajs.cn/t5/page/js/lib/open/iframeconnect.js"></script>
<script>
	$(function() {
		setInterval(function() {
			document.body.style.height = '0px';
			document.body.style.height = 'auto';
			iconnect.trigger('setHeight', $('body').css('height').replace('px', ''));
		}, 1000);
	});
</script>
 -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <meta name="format-detection" content="telephone=no" />
    <link href="/css/font-icon.css?v=201711171830" rel="stylesheet" type="text/css">
    <link href="/css/style.css?v=201711171830" rel="stylesheet" type="text/css">
    <link href="/css/common.css?v=201711171830" rel="stylesheet" type="text/css">
    <link href="http://cdn.files.51wyq.cn/web/css/emotion/swiper.min.css?v=201711171830" rel="stylesheet" type="text/css">

    <script type='text/javascript' src='/dwr/engine.js?v=201711171830'></script>
    <script type='text/javascript' src='/dwr/util.js?v=201711171830'></script>
    <script type='text/javascript' src='/dwr/interface/EChartsDwr.js?v=201711171830'></script>
    <script type='text/javascript' src='/dwr/interface/HeatReportDwr.js?v=201711171830'></script>
    <script type='text/javascript' src='http://res.wx.qq.com/open/js/jweixin-1.0.0.js?v=201711171830'></script>
    <script src="http://cdn.files.51wyq.cn/web/js/WeChatShareConfig.js?v=201711171830" type="text/javascript"></script>

    <!--echart js -->
    <script type="text/javascript" src="/js/echarts3.3.1/echarts.min.js?v=201711171830" charset="utf-8"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/echarts3.3.1/dark.js?v=201711171830" charset="utf-8"></script>
    <script type="text/javascript" src="/js/echarts/echarts-liquidfill.js?v=201711171830" charset="utf-8"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/echarts3.3.1/map/china.js?v=201711171830" charset="utf-8"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/echarts3.3.1/theme/infographic.js?v=201711171830" charset="utf-8"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/wordcloud/dist/echarts-wordcloud.js?v=201711171830" charset="utf-8"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/echarts/echarts.js?v=201711171830" charset="UTF-8"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/echarts/chart/map.js?v=201711171830" charset="UTF-8"></script>

    <!--分享-->
    <script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=ad6ca8fe-7189-423a-b7b6-ed44605dd77a&style=-1"></script>
<style type="text/css">
		.btn-group-two {
    position: relative;
    display: inline-block;
    font-size: 0;
    /* white-space: nowrap; */
    vertical-align: middle;
    bottom: 20px;
}
.counter-lg .counter-number-group, .counter-lg > .counter-number {
    font-size: 21px !important;
    font-weight: 600 !important;
}
		</style>

</head>

<body class="layoutBody">

<!--head代码 start-->


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">




<html>
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<title>微舆情_网络舆情监测</title>
<script>
	// 百度统计代码
// 	var _hmt = _hmt || [];
// 	(function() {
// 		var hm = document.createElement("script");
// 		hm.src = "//hm.baidu.com/hm.js?aaac48a09e76ccc8767f661174d83b89";
// 		var s = document.getElementsByTagName("script")[0];
// 		s.parentNode.insertBefore(hm, s);
// 	})();
</script>
</head>

<script type="text/javascript">

	var njxImgSrc='';
	var actionBase='';
	var staticResourcePath = 'http://cdn.files.51wyq.cn/web';

</script>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/jquery-1.10.2.min.js?v=201711171830'></script>



<link type="text/css" rel="stylesheet" href="http://cdn.files.51wyq.cn/web/css/tips.css?v=201711171830">
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/tips.js?v=201711171830'></script>
<input id="style" name="style" value="0" type="hidden"/>
<div id="BgDiv" style="display: none;"></div>
<div id="SystemSetDiv">
		<iframe style="margin: 0px;" frameborder=0 marginheight=0	marginwidth=0 id="search_set" name="search_set" width="700" height="420" src="">
		</iframe>
</div>
<div id="InfoDiv">
    <div class="td_title rel"><h1>温馨提示</h1><a href="javascript:void(0)" class="info_close abs">×</a></div>
      <div class=td_msg><SPAN id=msg class=msg></SPAN></div>
      <DIV class="btn_div">
          <div class="row clearfix">
              <div class="col-xs-6">
                  <a  id=submitBtn class="submitBtn btn btn-warning btn-block">确定</a>
              </div>
              <div class="col-xs-6">
                  <a  id=cancelBtn class="cancelBtn btn btn-default btn-block">取消</a>
              </div>
          </div>
      </DIV>

</div>
<div id="SmsDiv">
		<iframe scrolling="no" style="" frameborder=0
			marginheight=0 marginwidth=0 id="send_sms_frame" width="100%"
			 height="100%" src=""> </iframe>
</div>
<div id="EditBSDiv">
		<iframe scrolling="no" style="" frameborder=0
			marginheight=0 marginwidth=0 id="edit_bs_frame" width="100%"
			 height="100%" src=""> </iframe>
</div>












<link rel="stylesheet" type="text/css" href="http://cdn.files.51wyq.cn/web/css/accordion.css?v=201711171830"/>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/prettify.js?v=201711171830'></script>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/jquery.slimscroll.js?v=201711171830'></script>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/jquery.tabs.js?v=201711171830'></script>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/jquery-ui-1.9.1.custom.js?v=201711171830'></script>
<script type='text/javascript' src='http://cdn.files.51wyq.cn/web/js/taskMessage.js?v=201711171830' charset="utf-8"></script>



    <script src='http://cdn.files.51wyq.cn/web/js/MD5.js?v=201711171830' type="text/javascript"></script>
    <script src='http://cdn.files.51wyq.cn/web/js/login.js?v=201711171830' type="text/javascript"></script>

    <script src="http://cdn.files.51wyq.cn/web/js/bootstrap.min.js?v=201711171830"></script>
    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/twitter-bootstrap-hover-dropdown.js?v=201711171830"></script>
    <link href="http://cdn.files.51wyq.cn/web/css/loginStyle.css?v=201711171830" rel="stylesheet" type="text/css">
    <script type="text/javascript">
        var baseAction = '';

        $(function () { $("[data-toggle='tooltip']").tooltip(); $('.js-activated').dropdownHover();});
        function intoTo(type){
            var data = {"notLoginOperateRecord.operateType":type}
            $.ajax({
                url : baseAction+"/view/hotSearch/recordOperateInfo.action",
                type : "post",
                data : data,
                success : function(){
                    $("#loginModal").modal();
                    //$("#promptModal").modal();
                    //$("#login").click();
                }
            })
        }
    </script>
    <!--二级下拉菜单效果-->
    <script type="text/javascript">

        $(function(){
            var navDropdown = $(".nav-dropdown-canvas.J-nav-wrapper .nav-dropdown-inner")
            var navWrapper = $(".nav-dropdown-canvas.J-nav-wrapper")
            $(navWrapper).css("height","auto").css("opacity","1").hide();
            $(navDropdown).hide();
            $(" .head-nav .rightNav li.link").on("mouseenter",function() {
                $(this).parents(".rightNav").find("li").removeClass("hover");
                $(this).parents(".head-nav").find(navDropdown).hide();
                $(this).addClass("hover");

            });

            $(" .head-nav .rightNav li.nav-hover").on("mouseenter",function(e) {
                $(this).parents(".head-nav").find(navWrapper).show(300);
                e.stopPropagation();
            });
            $(navWrapper).on("mouseover",function(e){
                e.stopPropagation();
            })
            $(".head-nav .rightNav").on("mouseover",function(e){
                e.stopPropagation();
            })
            $(".head-nav .rightNav li.nav-hover").on("mouseover",function(e){
                e.stopPropagation();
            })
            $("body").on("mouseover", function() {
                $(".head-nav").find(navWrapper).hide();
                $(".rightNav").find("li").removeClass("hover");
            });

            $(" .head-nav .rightNav li.nav-hover-1").on("mouseenter",function() {
                $(this).parents(".head-nav").find(navDropdown).hide();
                $(this).parents(".head-nav").find(navDropdown).eq(0).css("display","block");
            });
            $(" .head-nav .rightNav li.nav-hover-2").on("mouseenter",function() {
                $(this).parents(".head-nav").find(navDropdown).hide();
                $(this).parents(".head-nav").find(navDropdown).eq(1).css("display","block");
            });
            $(" .head-nav .rightNav li.nav-hover-3").on("mouseenter",function() {
                $(this).parents(".head-nav").find(navDropdown).hide();
                $(this).parents(".head-nav").find(navDropdown).eq(2).css("display","block");
            });
            $(" .head-nav .rightNav li.nav-hover-4").on("mouseenter",function() {
                $(this).parents(".head-nav").find(navDropdown).hide();
                $(this).parents(".head-nav").find(navDropdown).eq(3).css("display","block");
            });

        });
    </script>

    <!--head代码 start-->
    <div id="head" class="rel head-blue head-nav">
        <div>
            <div class="head-top">
                <div class="float_l">
                    <img src="http://cdn.files.51wyq.cn/web/images/logo-w.png?v=201711171830" class="logo"/>
                </div>
                <div class="rightNav dis-i">
                    <ul>
                        <li class="link"><a href="/login.shtml">首页</a></li>
                        <li class="link"><a href="/useScene.shtml">应用场景</a></li>
                        <li class="link nav-hover nav-hover-1"><a href="javascript:void(0)">信息监测</a></li>
                        <li class="link nav-hover nav-hover-2"><a href="javascript:void(0)">简报制作</a></li>
                        <li class="link nav-hover nav-hover-3"><a href="javascript:void(0)">大数据分析</a></li>
                        <li class="link"><a href="http://yuqing.sina.com/logon.action" target="_blank"><!-- 政务舆情 -->专业版</a></li>
                        <li class="link"><a href="http://wgw.city.sina.com.cn/" target="_blank">微官网</a></li>
                        <li class="link"><a href="http://zwgj.city.sina.com.cn" target="_blank">微管家</a></li>
                        <!-- <li class="link"><a href="http://www.51cjyy.com/" target="_blank">超级应援</a></li> -->
                        <li class="link"><a href="/aboutUser.shtml">关于我们</a></li>
                    </ul>

                </div>
                <div class="float_r mt15">
                    <div class="btn-angle-group dis-i">
                        <a href="/user/goRegister.shtml" class="btn btn-warning">注册</a>
                        <a  id="login" href="#" onclick="getRan()" class="btn btn-warning" data-toggle="modal" data-target="#loginModal">登录</a>
                    </div>
                </div>

            </div>

        </div>
        <!--二级菜单 start -->
        <div class="nav-dropdown-canvas J-nav-wrapper" style="display: none;">
            <div class="nav-dropdown-inner J-nav-menu">
                <div class="c-m-tit-lv1 J-mobile-li-first">信息监测</div>
                <div class="menu-text-wrap J-mobile-first">
                    <div class="menu-text-list">
                        <div class="menu-text-col">
                            <div class="menu-text-item">
                                <h3 id="menu-title-20" class="menu-text-item-tit J-mobile-li-third">信息监测</h3>
                                <div class="menu-text-item-con J-mobile-third">
                                    <ul class="text-item-col">
                                        <li><a href="javascript:intoTo(5)">监测列表</a></li>
                                        <li><a href="javascript:intoTo(5)">图表分析</a></li>
                                        <li><a href="javascript:intoTo(6)">预警通知</a></li>
                                        <li><a href="javascript:intoTo(7)">监测日报</a></li>
                                    </ul>
                                    <ul class="text-item-col">
                                        <li><a href="javascript:intoTo(5)">信息下载</a></li>
                                        <li><a href="javascript:intoTo(5)">信息收藏</a></li>
                                        <li><a href="javascript:intoTo(5)">定向监测</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="nav-dropdown-inner J-nav-menu">
                <div class="c-m-tit-lv1 J-mobile-li-first">简报制作</div>
                <div class="menu-text-wrap J-mobile-first">
                    <div class="menu-text-list">
                        <div class="menu-text-col">
                            <div class="menu-text-item">
                                <h3 id="menu-title-20" class="menu-text-item-tit J-mobile-li-third">简报制作</h3>
                                <div class="menu-text-item-con J-mobile-third">
                                    <ul class="text-item-col">
                                        <li><a href="javascript:intoTo(8)">经典版简报</a></li>
                                        <li><a href="javascript:intoTo(8)">党政版简报</a></li>
                                        <li><a href="javascript:intoTo(8)">行业版简报</a></li>
                                        <li><a href="javascript:intoTo(8)">企业版简报</a></li>
                                    </ul>
                                    <ul class="text-item-col">
                                        <li><a href="javascript:intoTo(8)">网宣版简报</a></li>
                                        <li><a href="javascript:intoTo(9)">各类定制报告</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="nav-dropdown-inner J-nav-menu">
                <div class="c-m-tit-lv1 J-mobile-li-first">大数据分析</div>
                <div class="menu-text-wrap J-mobile-first">
                    <div class="menu-text-list">
                        <div class="menu-text-col">
                            <div class="menu-text-item">
                                <h3 id="menu-title-20" class="menu-text-item-tit J-mobile-li-third">大数据分析</h3>
                                <div class="menu-text-item-con J-mobile-third">
                                    <ul class="text-item-col">
                                        <li><a href="#" data-toggle="modal" data-target="#loginModal">热度指数</a></li>
                                        <li><a href="javascript:intoTo(17)">情绪地图</a></li>
                                        <li><a href="javascript:intoTo(10)">全网事件分析</a></li>
                                        <li><a href="javascript:intoTo(11)">微博事件分析</a></li>
                                    </ul>
                                    <ul class="text-item-col">
                                        <li><a href="javascript:intoTo(12)">微博传播效果分析</a></li>
                                        <li><a href="javascript:intoTo(13)">竞品分析</a></li>
                                        <li><a href="#" data-toggle="modal" data-target="#loginModal">新闻评论分析</a></li>

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nav-dropdown-inner J-nav-menu">
                <div class="c-m-tit-lv1 J-mobile-li-first">友情链接</div>
                <div class="menu-text-wrap J-mobile-first">
                    <div class="menu-text-list">
                        <div class="menu-text-col">
                            <div class="menu-text-item">
                                <h3 id="menu-title-20" class="menu-text-item-tit J-mobile-li-third">友情链接</h3>
                                <div class="menu-text-item-con J-mobile-third">
                                    <ul class="text-item-col">
                                        <li><a href="http://wgw.city.sina.com.cn/" target="_blank">微官网</a></li>
                                        <li><a href="http://www.51cjyy.com/" target="_blank">超级应援</a></li>
                                    </ul>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!--二级菜单 end -->
    </div>

    <!--head代码 end-->



    <!--登录框 start-->
    <div id="loginModal" class="modal fade" role="dialog" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none; width: 600px; margin-left: -250px;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">登录微舆情</h3>
        </div>
        <div class="modal-body" style="overflow-y:  initial;">
            <!--login登录框代码 start-->
            <FORM   method=post name=F>
                <input name="password" id="passwords" type="hidden" />
                <div class="login">
                    <div class="phoneLogin">
                        <div class="input phone wy_dl rel">
                            <div id="new_mfzc" class="new_mfzc" style="display: none"></div>
                            <input class="inputText" type="text" id="username" name="username" autocomplete="off" placeholder="手机号或帐号" value="" >
                        </div>

                        <div class="input password wy_pass rel">
                            <div id="new_mfzc2" class="new_mfzc" style="display: none"></div>
                            <input class="inputText" id="password" type="password" onfocus="this.type='password'" onpaste="return false;" autocomplete="off" placeholder="输入密码">
                        </div>
                        <div>
                            <div id="new_mfzc3" class="new_mfzc" style="display: none"></div>
                            <div class="float_l code input rel">
                                <input id="pCode" name="imgVcode"  class="inputYZM" type="text" placeholder="请输入验证码" >
                                <input type="hidden" id="_ran" name="_ran" />
                            </div>
                            <div class="float_l imgVcode"><img id="imgVcode" onClick="getRan()" width="110" height="52"></div>
                            <div  class="clear"></div>

                        </div>


                        <div class="login_forg wy_forget"><label for="remember_password"><input type="checkbox" id="remember_password"> 记住密码<a href="/user/lostPassword.shtml" class="forgetpassword float_r"> 忘记密码</a></label></div>

                        <div class="login_btn" id="loginBtn">立即登录</div>
                    </div>
                    <div class="login_mfzc">没有帐号？<a href="/user/goRegister.shtml">免费注册</a></div>
                    <div class="loginBtn layer">
                        <h1>第三方登录</h1>
                        <a href="javascript:;" class="btn2" onclick="javascript:location.href='/thirdParty/toSinaWeiboLogin.action';" id="wbLoginBtn"><i></i>微博登录</a>
                        <a href="javascript:;" class="btn3" onclick="javascript:location.href='/thirdParty/toWeixinLogin.action';" id="wxLoginBtn"><i></i>微信登录</a>
                        <a href="javascript:;" class="" onclick="javascript:location.href='/thirdParty/toTencentLogin.action';" id="qqLoginBtn"><i></i>QQ登录</a>

                        <a href="javascript:;" class="btn4  mt10" onclick="javascript:location.href='/thirdParty/toJCloudLogin.action';" id="jCloudLoginBtn"><i></i>京东万象</a>

                    </div>
                </div>
            </FORM>
            <!--login登录框代码 end-->
        </div>

    </div>
    <!--登录框 end-->

    <!--提示登录框 start-->
    <div id="promptModal" class="modal fade" role="dialog" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none; width: 350px; margin-left: -175px;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">&nbsp;</h3>
        </div>
        <div class="modal-body align_c" style="overflow: initial;">
            <p class="fz16">亲爱的微友，您还没有登录哦~</p>
        </div>
        <div class="modal-footer" style="text-align: center;">
            <a class="btn btn-warning"  href="#loginModal" onclick="getRan()" data-dismiss="modal" data-toggle="modal" aria-hidden="true">去登录</a>
        </div>
    </div>
    <!--提示登录框 end-->
    <script type="text/javascript">
        var loginFlag = true;
        function userLogin() {
            if(!loginFlag){
                return;
            }
            loginFlag = false;
            var mobile_filter = /^1[3|4|5|7|8|9][0-9]\d{8}$/;
            var password_filter = /^[\@A-Za-z0-9\!#$\%\^\&\*\.\,\~]{6,20}$/;
            if($.trim($("#username").val()) == '') {
                $("#new_mfzc").show().html("请输入您的手机号！");
                loginFlag = true;
                return false;
            }
            if($.trim($("#password").val()) == '') {
                $("#new_mfzc2").show().html("请输入您的密码！");
                loginFlag = true;
                return false;
            }
            if($.trim($('#pCode').val()) == '') {
                $("#new_mfzc").show().html("请输入验证码！");
                loginFlag = true;
                return false;
            }

//             if(!mobile_filter.test($("#username").val())) {
//                 $("#new_mfzc").show().html("手机号码不正确！");
//                 loginFlag = true;
//                 return false;
//             }
            if(!password_filter.test($("#password").val())) {
                $("#new_mfzc2").show().html("密码格式不正确！");
                loginFlag = true;
                return false;
            }

            SetCookie("username", $("#username").val());
            if($("#remember_password").get(0).checked){
                SetCookie("password", $("#password").val());
                SetCookie("remember_password",true);
            }else{
                SetCookie("password", "");
                SetCookie("remember_password",false);
            }
            if($("#password").val()!='')
                $("#passwords").val(hex_md5($("#password").val()));

            F.action = "/indexLogin.action";
            F.submit();
        }

        var geeTestData;
        $(function() {
            /*$.ajax({
                url : "/StartCaptchaServlet?t=" + (new Date()).getTime(), // 加随机数防止缓存
                type : "get",
                dataType : "json",
                success : function(data) {
                    // 使用initGeetest接口
                    // 参数1：配置参数
                    // 参数2：回调，回调的第一个参数验证码对象，之后可以使用它做appendTo之类的事件
                    initGeetest({
                        gt : data.gt,
                        challenge : data.challenge,
                        product : "float",
                        offline : !data.success
                    }, handlerEmbed);
                }
            })
            var handlerEmbed = function(captchaObj) {
                // 将验证码加到id为captcha的元素里
                captchaObj.appendTo("#float-captcha");
                captchaObj.onReady(function() {
                    $("#wait").hide();
                });
                captchaObj.onSuccess(function(data) {
                    var validate = captchaObj.getValidate();
                    if (!validate) {
                        return;
                    }
                    $.ajax({
                        url: "/VerifyLoginServlet?t=" + (new Date()).getTime(), // 进行二次验证
                        type: "post",
                        dataType: "json",
                        data: {
                            // 二次验证所需的三个值
                            geetest_challenge: validate.geetest_challenge,
                            geetest_validate: validate.geetest_validate,
                            geetest_seccode: validate.geetest_seccode
                        },
                        success: function (data) {
                            geeTestData = data;
                            userLogin();//验证完成直接登录 by lcz
                        }
                    });
                });
            };*/

            $('#loginBtn').click(function() {
                userLogin();
                /*if (geeTestData && (geeTestData.status === 'success')) {
                    userLogin();
                } else {
                    $("#new_mfzc").show().html('请先完成验证！');
                    console.log(geeTestData);
                }*/
            });
        });
    </script>
    <script type="text/javascript">
        var operateLogPageCode = '1001';
        var operateLogPageName = '登录';
        var operateLogRequestPath = '';
    </script>

    <script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/operatelog.js?v=201711171830"></script>

<script type="text/javascript">
    $(function(){
        $(".jcfaNav li").mouseover(function(){
            $(this).find(".dele").show();
        });
        $(".jcfaNav li").mouseout(function(){
            $(this).find(".dele").hide();
        });
    });

    function isMobile(){
        var bs = {
            versions: function () {
                var u = navigator.userAgent, app = navigator.appVersion;
                return {
                    windowsPhone: u.indexOf('IEMobile') > -1,
                    trident: u.indexOf('Trident') > -1,
                    presto: u.indexOf('Presto') > -1,
                    webKit: u.indexOf('AppleWebKit') > -1,
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') === -1,
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/) || !!u.match(/IEMobile/),
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
                    android: u.indexOf('Android') > -1 || u.indexOf('UCBrowser') > -1,
                    iPhone: u.indexOf('iPhone') > -1,
                    iPad: u.indexOf('iPad') > -1,
                    webApp: u.indexOf('Safari') === -1
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        };
        if (bs.versions.mobile) {
            if (bs.versions.android || bs.versions.iPhone || bs.versions.iPad || bs.versions.windowsPhone) {
                //$('.fenxiang').css('display', 'none');
                //$('#weibo_task_result_star_content_div,#weibo_task_result_line_content_div,#weibo_task_result_fans_div').css('height', '220px');
                location.href="onclick","http://h5.51wyq.cn/register.action";
            }
        }else{
            location.href="/user/goRegister.shtml";
        }
    }
</script>

<!--head代码 end-->


<input type="hidden" id="currentPage" value="热度分析"/>

<input type="hidden" id="oneTime" value=""/>
<input type="hidden" id="hotCus" value=""/>
<input type="hidden" id="monitorFlag" value="0"/>
<input type="hidden" id="schoolKeyword" value=""/>
<input type="hidden" id="schoolTitle" value=""/>
<INPUT type=hidden id="hourSeachToggle" value="1">
<INPUT type=hidden id="oneOrMore" value="1">
<INPUT type=hidden id="allTimeTe" value="">
<INPUT type=hidden id="theTwoOrOnePageID" value="1">
<input type="hidden" id="keyword1" name="keyword1" value="双一流">
<input type="hidden" id="endTime" value="2017年11月19日 18:26">
<form method="post" name="frmPopWin2">
    <input type="hidden" id="ticket" name="ticket" value=""/>
    <input type="hidden" id="userId" name="userId" value=""/>
    <input type="hidden" id="reportId" name="heatReport.id" value="0"/>
    <input type="hidden" id="title" name="heatReport.reportName" value="双一流"/>
    <input type="hidden" id="filterKeyword" name="heatReport.filterKeyword" value=""/>
    <input type="hidden" id="keyword" name="heatReport.keyword" value="双一流">
    <INPUT type="hidden" name="cemails" id="cemails" value="">
    <INPUT type="hidden" name="heatReport.emailSwitch" id="emailSwitch" value="0">
    <INPUT type="hidden" name="heatReport.appSwitch" id="appSwitch" value="0">
    <INPUT type="hidden" name="heatReport.weiboSwitch" id="weiboSwitch" value="0">
    <input type="hidden" id="productId" name="productId" value="0"/>
    <input type="hidden" id="starttime" name="starttime" value=""/>
    <input type="hidden" id="endtime" name="endtime" value=""/>

    <!--goSearch 参数START-->
    <input type="hidden" name="date" id="date" value="24"/>
    <input type="hidden" id="categoryId" name="categoryId" value=""/>
    <input type="hidden" id="categoryType" name="categoryType" value=""/>
    <input type="hidden" id="secondCategory" name="secondCategory" value="252"/>
    <input type="hidden" id="num" name="num" value="0"/>
    <input type="hidden" id="categoryLevel" name="categoryLevel" value="11"/>
    <input type="hidden" id="shareCode" name="shareCode" value=""/>
    <input type="hidden" id="keywords" value=""/>
    <input type="hidden" id="threeClassifyName" name="threeClassifyName" value=""/>
    <input type="hidden" id="secondClassifyName" name="secondClassifyName" value="全部"/>
    <input type="hidden" id="isAll" name="isAll" value="0"/>
    <!--goSearch 参数END-->

    <input type="hidden" id="singleShare" name="singleShare" value="0"/>
</form>

<form id="oneToMorePageForm" method="post" name="oneToMorePageForm"/>
	<input type="hidden" name="title" id="title_id"/>
	<input type="hidden" name="keyword" id="keyword_id"/>
<!-- 	<input name="date" id="date_id"/> -->
<input type="hidden" name="date" id="date_id" value="24"/>
	<input type="hidden" name="startTime" id="startTime_id"/>
	<input type="hidden" name="endTime" id="endTime_id"/>
	<input type="hidden" name="num" id="num_id"/>
	<input type="hidden" name="isEver" id="isEver"/>

</form>

<form  method="post" name="searchForm" id="searchForm">
    <input type="hidden" name="jsonData" id="jsonData"/>
    <input type="hidden" name="flag" id="flag" value="1"/>
</form>

<form id="loginRecordForm" action="/view/hotSearch/verifyOperateInfo.action" method="post">
    <input type="hidden" name="notLoginOperateRecord.name" id="recordName" value="">
    <input type="hidden" name="notLoginOperateRecord.keyword" id="recordKeyword" value="">
    <input type="hidden" name="notLoginOperateRecord.filterKeyword" id="recordFilterKeyword" value="">
    <input type="hidden" name="notLoginOperateRecord.jsonData" id="recordData" value="">
    <input type="hidden" name="notLoginOperateRecord.operateType" id="recordType" value="">
</form>

<div class="page-layout">
    <div class="page-layout-content">
        <!--查询头部菜单 start -->
        <div class="row clearfix mb10">
            <div class="col-md-12">
                <div class="align_c">
                    <ul class="tabs-menu tabs-menu-n-l tabs-menu-active tabs-menu-m dis-i" id="myTab">
                        <li onclick="toggleTab(0)" class="active"><a href="#page1" data-toggle="tab" class="fz18">热度指数</a></li>
                        <li onclick="toggleTab(1)" class=""><a href="#page2" data-toggle="tab" class="fz18">情绪地图</a></li>
                    </ul>
                </div>
            </div>

        </div>
        <div class="row clearfix mt20 mb20">
            <div class="">
                <script language="javascript" type="text/javascript">
                    function glb_searchTextOnfocus(obj) {
                        if(obj.value == '人名、企业名、品牌名或事件关键词')
                            obj.value = '';
                        obj.style.color = '#aaaaaa';
                    }

                    function glb_searchTextOnBlur(obj) {
                        if(obj.value == '') {
                            obj.value = '人名、企业名、品牌名或事件关键词';
                            obj.style.color = '#aaaaaa';
                        } else {
                            obj.style.color = '#aaaaaa';
                        }
                    }
                </script>
                <div class="search-wrapper search-wrapper2">
                    <div class="search">
                        <span style="margin-left: 10px;">
                            <input type="text" class="keyWord searchkey" name="" onfocus="glb_searchTextOnfocus(this);" onkeydown="goenterClick(event)"  onblur="glb_searchTextOnBlur(this);" id="search-keyword" value="双一流" />
				        </span>
                        <span>
					        <a href="javascript:hotAndEmotionSearch();" class="searchBtn">搜索</a>
				        </span>
                    </div>
                    <script language="javascript" type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/searchjs.js?v=201711171830"></script>
                </div>

            </div>
        </div>
        <!--查询头部菜单 end -->


							<div class="panel-body clearfix" id="selectTimeWait">

							    <div class="float_r">
									<div class="btn-group green" data-toggle="buttons" id="timeQuantum">
										<label onclick="goSearch(2,24); " class="btn active" style="width: 72px;">
				                            <input type="radio" name="options" id="option1" value="0"> 24小时
				                       </label>
										<label onclick="goSearch(2,72); " class="btn " style="width: 72px;">
				                            <input type="radio" name="options" id="option2" value="72"> 72小时
				                       </label>
									   <label onclick="SetRQ(0);" id="search_xu" class="btn " style="width: 72px;">
				                            <input type="radio" name="options" id="option3" value="0"> 自定义
				                       </label>

				                       <div class="taskTimeSegment dropdown open"
											id="dropdown_time" style="display: none; z-index: 2;">
											<!--其他时间弹出框 start-->
											<div class="other_time dropdown-menu"
												style="top: 50px;right: 0;display: inline-block;left: inherit;">
												<div class="other_timeBox time-right rel" style="">
													<h3>请选择起止时间：</h3>
													<dl>
														<dd>
															<input class="time input showStarttime"
																id="showStarttime" name="showStarttime"
																onclick="javascript:event.stopPropagation();" value=""
																type="text">
														</dd>
														<dd>到</dd>
														<dd>
															<input class="time input showEndtime" id="showEndtime"
																name="showEndtime"
																onclick="javascript:event.stopPropagation();" value=""
																type="text">
														</dd>
														<dd>
															<botton class="btn btn-warning" type="button"
																onclick="goSearch(3)">查询</botton>
														</dd>
													</dl>
												</div>
											</div>
											<!--其他时间弹出框 end-->
										</div>

									</div>
								</div>
							</div>



        <div class="tab_box">
            <div class="tab-pane fade in active" id="page1">

                <!--热度概况 start -->
				<div class="row clearfix">
					<div class="col-md-6">
						<div class="panel panel-default" id="reDuGaiKuang">
							<div class="panel-heading titlBar">
								<h3 class="panel-title mr10">热度概况</h3>
								<div class="tools">
									 <a href="javascript:reloadSelect(1);" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新">
									<i class="icon-reload"></i>
									</a>
									<a href="javascript:reloadSelect(1);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
										<i class="icon-full"></i>
									</a>

									<a data-toggle="collapse" data-parent="#accordion" href="#collapse1" class="collapse">
										<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
									</a>
								</div>
								<i class="icon-help mr10"></i>

							</div>
								<div class="tipinfo showing" style="margin-bottom: 10px;">
									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
									<div class="tipcont">该数据为您显示：<br>某一时间段内热度值。
</div>
								</div>
							<div class="panel-collapse collapse in" id="collapse1" aria-expanded="true">
								<div class="panel-body" style="padding: 0;">
									<div class="abs fc_gray" style="bottom: 10px; right: 10px; z-index: 2;">&copy;<span class="time"></span></div>
									<div class="pading10 pading-left-25 pading-right-25 align_c">
										<span class="small fc_dark_grey"><i class="icon-square fc_red"></i> <span id="reDuName"></span></span>
									</div>
									<div>
								<div class="chart-bady" id="degreeHeatChart" style="height: 274px;">

								</div>
								</div>
							</div>
							</div>

						</div>
					</div>
				    <div class="col-md-6" style="display:none;" id="timeEqOneDayId">
				    	<div class="row clearfix">
				    		<div class="col-xs-6">
				    			<div class="widget">
                <div class="widget-content pading20 pading-bottom-30 pading-top-30">
                  <div class="counter counter-lg">
                    <span class="counter-number fc_earthy_red-200 kedu kedu_yellow" id="rdtbID">

                    </span>
                    <div class="counter-label text-uppercase" id="basisTh">「热度同比」</div>
                  </div>
                </div>
              </div>
				    		</div>
				    		<div class="col-xs-6">
				    			<div class="widget">
                <div class="widget-content pading20 pading-bottom-30 pading-top-30">
                  <div class="counter counter-lg">
                    <span class="counter-number kedu kedu_grey fc_dark_grey-300" id="rdbhID"></span>
                    <div class="counter-label text-uppercase" id="changeTh">「热度变化」</div>
                  </div>
                </div>
              </div>
				    		</div>
				    		<div class="col-xs-6">
				    			<div class="widget">
                <div class="widget-content pading20 pading-bottom-50 pading-top-50">
                  <div class="counter counter-lg">
                    <span class="counter-number fc_orange-a"><span id="wbxxlID"></span><font class="fz16">条</font></span>

                    <p class="mt10"><img src="/images/tongji_orange.svg" width="60%"/></p>
                    <div class="counter-label text-uppercase">「微博信息量」</div>
                  </div>
                </div>
              </div>
				    		</div>
				    		<div class="col-xs-6">
				    			<div class="widget">
                <div class="widget-content pading20 pading-bottom-50 pading-top-50  bg-white">
                  <div class="counter counter-lg">
                    <span class="counter-number fc_dark_grey-300"><span id="qwxxlID"></span><font class="fz16">条</font></span>
                    <p class="mt10"><img src="/images/tongji_grey.svg" width="60%"/></p>
                    <div class="counter-label text-uppercase">「全网信息量」</div>
                  </div>
                </div>
              </div>
				    		</div>
				    	</div>
				    </div>




				    <div class="col-md-6" style="display:none;" id="timeEqThreeDayId">
				    	<div class="row clearfix">
				    		<div class="col-xs-12">
				    			<div class="widget">
                <div class="widget-content pading20 pading-bottom-50 pading-top-50 ">
                  <div class="counter counter-lg">
                    <span class="counter-number fc_dark_grey-300"><span id="qwxxlID2"></span><font class="fz16">条</font></span>
                    <p class="mt10"><img src="/images/tongji_grey.svg" width="160px"/></p>
                    <div class="counter-label text-uppercase">「全网信息量」</div>
                  </div>
                </div>
              </div>
				    		</div>
				    		<div class="col-xs-6">
				    			<div class="widget">
                <div class="widget-content pading20 pading-bottom-50 pading-top-50">
                  <div class="counter counter-lg">
                    <span class="counter-number fc_orange-a"><span id="wbxxlID2"></span><font class="fz16">条</font></span>
                    <p style="margin-top: 12px;"><img src="/images/tongji_orange.svg" width="160px"/></p>
                    <div class="counter-label text-uppercase">「微博信息量」</div>
                  </div>
                </div>
              </div>
				    		</div>

				    		<div class="col-xs-6">
				  <div class="widget">
                <div class="widget-content pading20 pading-bottom-50  pading-top-50  bg-white">
                  <div class="counter counter-lg">
                    <span class="counter-number fc_golden"><span id="weixinId"></span><font class="fz16">条</font></span>
                    <p style="margin-top: 12px;"><img src="/images/tongji_yellow.svg" width="160px"></p>
                    <div class="counter-label text-uppercase">「微信信息量」</div>
                  </div>
                </div>
              </div>
			</div>
				    	</div>
				    </div>



				</div>
				<!--热度概况 end -->

				<!--简介 start -->
				<div class="row clearfix" id="schoolOverview" style="display:none;">
					<div class="col-md-12">
						<div class="panel">
							<div class="panel-heading-padd">
								<div class="panel-heading titlBar">
									<h3 class="panel-title mr10">学校简介</h3>
<!-- 									<i class="icon-help mr10"></i> -->
								</div>
<!-- 								<div class="tipinfo showing" style="margin-bottom: 10px;"> -->
<!-- 									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div> -->
<!-- 									<div class="tipcont">该数据为您显示：<br>关键词最近一周或一个月的总体搜索指数表现。</div> -->
<!-- 								</div> -->
							</div>
							<div class="panel-body">
								<p class="fz14 fc_dark_grey" id="schoolIntro"  style="letter-spacing:1px;"></p>
							</div>
							<div class="panel-footer align_c">
		                        <button type="button" onclick="addKeyword(1,'住宿');" class="btn btn-cobalt_blue btn-big mr20">住宿</button>
		                        <input type="hidden" id="schoolKeyword_1" value="双一流+(住宿|住宿条件|宿舍|宿舍条件|寝室|宿管|宿舍管理员|住宿环境|宿舍环境|寝室环境)"/>
		                        <button type="button" onclick="addKeyword(2,'就业');" class="btn btn-cobalt_blue btn-big mr20">就业</button>
		                        <input type="hidden" id="schoolKeyword_2" value="双一流+(就业|工作)"/>
		                        <button type="button" onclick="addKeyword(3,'交通');" class="btn btn-cobalt_blue btn-big mr20">交通</button>
		                        <input type="hidden" id="schoolKeyword_3" value="双一流+出行"/>
		                        <button type="button" onclick="addKeyword(4,'食堂');" class="btn btn-cobalt_blue btn-big mr20">食堂</button>
		                        <input type="hidden" id="schoolKeyword_4" value="双一流+(食堂|饭菜)"/>
		                        <button type="button" onclick="addKeyword(5,'师资');" class="btn btn-cobalt_blue btn-big mr20">师资</button>
		                        <input type="hidden" id="schoolKeyword_5" value="双一流+(师资力量|青出于蓝|桃李争妍|后继有人|十年树木|百年树人|春风化雨|润物无声|循循善诱|潜移默化|和蔼可亲|无微不至|勤勤恳恳|良师益友|桃李芬芳|诲人不倦|废寝忘食|埋头苦干|兢兢业业|尽心尽力)"/>
		                        <button type="button" onclick="addKeyword(6,'风气');" class="btn btn-cobalt_blue btn-big mr20">风气</button>
		                        <input type="hidden" id="schoolKeyword_6" value="双一流+(风气|校园环境|学生管理|教育活动|科技文化|社会实践|素质教育|为人师表)"/>
		                        <button type="button" onclick="addKeyword(7,'图书馆');" class="btn btn-cobalt_blue btn-big">图书馆</button>
		                        <input type="hidden" id="schoolKeyword_7" value="双一流+图书馆"/>
		                    </div>
						</div>
					</div>
				</div>
				<!--简介 end -->

				<!--热度指数趋势 start -->
				<div class="row clearfix">
					<div class="col-md-12">
<!-- 					<div class="panel"> -->
						<div class="panel panel-default" id="reDuZhiShuQuShi">

								<div class="panel-heading titlBar">
									<h3 class="panel-title mr10">热度指数趋势</h3>
									<i class="icon-help mr10"></i>

									<div class="tools">
										 <a href="javascript:reloadSelect(2);" class="reload " data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新">
										<i class="icon-reload"></i>
										</a>
										<a href="javascript:reloadSelect(2);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
											<i class="icon-full"></i>
										</a>

										<a data-toggle="collapse" data-parent="#accordion" href="#collapse2" class="collapse">
											<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
										</a>
									</div>
								</div>
								<div class="tipinfo showing">
									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
									<div class="tipcont">该数据为您显示：<br>某一时间段内分时段的热度值变化走势。
</div>
								</div>
								<div class="panel-collapse collapse in" id="collapse2" aria-expanded="true">
									<div class="panel-body">
										<div class="abs fc_gray" style="bottom: 0px; right: 10px; z-index: 2;">&copy;<span class="time"></span></div>
<!-- 										<div class="pading10 pading-left-25 pading-right-25 align_c"> -->

<!-- 										</div> -->
										<div class="abs" style="top: 20px;left: 20px;z-index: 2;" id="doubleSelectId">
											<div class="btn-group btn-groupAll green btn-group-two" data-toggle="buttons" id="timeToggle2">

												<label class="btn btn-sm active" id="labelChangeClass1">
				                            		<input type="radio" name="options" value="1"> 指数图
				                               </label>
												<label class="btn btn-sm" id="labelChangeClass2">
				                            		<input type="radio" name="options" value="0"> 声量图
				                                </label>
											</div>
										</div>
										<div id="collapse1">
                        					<div class="panel-body">
												<div class="chart-bady" id="container1" style="height: 340px;">

							    	    	    </div>
					    	    	    	</div>
					    	    	    </div>
									</div>
<!-- 											<div class="panel-footer panel-footer-padd" style="border-bottom: 1px solid #ddd;"> -->
<!-- 												从指数变化趋势来看，<font class="fc_red">北京收紧房贷</font>的热度在03月07日 09时达到了20.91的峰值。<font class="fc_red">杨幂</font>的热度在03月07日 09时达到了76.61的峰值。其重点信息聚类如下: -->
<!-- 											</div> -->
					    	    	    	<div class="panel-footer panel-footer-padd" style="border-bottom: 1px solid #ddd;" id="container1_msg">

                        					</div>
								</div>



						</div>
<!-- 					</div> -->
					</div>
				</div>
				<!--热度指数趋势 end -->
				<!--相关排行 start -->
        <div class="row clearfix" id="categoryList" style="display:none;">
            <div class="col-md-12">
                <div class="panel">
                    <div class="panel-heading-padd">
                        <div class="panel-heading titlBar">
                            <h3 class="panel-title mr10">相关排行</h3>

                            <div class="tools">
                                <a href="javascript:void(0)" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
                                    <i class="icon-full"></i>
                                </a>

                                <a data-toggle="collapse" data-parent="#accordion" href="#ranking" class="collapse">
                                    <i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
                                </a>
                            </div>
                        </div>

                    </div>

                    <div class="panel-body" style="padding: 0;"  id="ranking">
                        <ul class="tabs-menu mt10" id="tabChange" style="padding-left: 20px; margin:0 0 -10px;">

                        </ul>
                        <div class="tab_box">
                            <div class="tab-pane fade in active" id="tableOne">
                                <table border="0" cellspacing="0" cellpadding="0" class="table table2 table3 table-striped" width="100%">
                                    <thead>
                                    <tr>
                                        <th width="">排名</th>
                                        <th width="22%">名称</th>
                                        <th width="20%">全网声量</th>
                                        <th width="42%">热度</th>
                                    </tr>
                                    </thead>
                                    <tbody id="senTableOne">


                                    </tbody>
                                </table>
                            </div>

                            <div class="tab-pane fade in active" id="tableTwo" style="display: none;">
                                <table border="0" cellspacing="0" cellpadding="0" class="table table2 table3 table-striped" width="100%">
                                    <thead>
                                    <tr>
                                        <th width="">排名</th>
                                        <th width="22%">名称</th>
                                        <th width="20%">全网声量</th>
                                        <th width="42%">热度</th>
                                    </tr>
                                    </thead>
                                    <tbody id="senTableTwo">


                                    </tbody>
                                </table>
                            </div>

                            <div class="tab-pane fade in active" style="display: none;" id="tableThree">
                                <table border="0" cellspacing="0" cellpadding="0" class="table table2 table3 table-striped" width="100%">
                                    <thead>
                                    <tr>
                                        <th width="">排名</th>
                                        <th width="22%">名称</th>
                                        <th width="20%">全网声量</th>
                                        <th width="42%">热度</th>
                                    </tr>
                                    </thead>
                                    <tbody id="senTableThree">


                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--相关排行 end -->
				<!--媒体来源/媒体友好度 start -->
				<div class="row clearfix">
					<div class="col-md-6">
						<div class="panel panel-default" id="meiTiFrom">
								<div class="panel-heading titlBar">
									<h3 class="panel-title mr10">媒体来源</h3>
									<i class="icon-help mr10"></i>

									<div class="tools">

		<a href="javascript:reloadSelect(3);" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新
"><i class="icon-reload"></i></a>
			<a href="javascript:reloadSelect(3);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏
">
				<i class="icon-full"></i>
				</a>

				<a data-toggle="collapse" data-parent="#accordion" href="#collapse3" class="collapse">
					<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
				</a>

</div>
								</div>
								<div class="tipinfo showing">
									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
									<div class="tipcont">该数据为您显示：<br>指相关信息的原发平台，分为微博、客户端、微信、论坛以及网站（新闻、政务、报刊、网站、博客、外媒、视频）。
									</div>
								</div>

							<div class="panel-collapse collapse in" id="collapse3">
								<div class="panel-body" style="padding: 0;">
									<div class="abs fc_gray" style="bottom: 10px; right: 10px; z-index: 2;">&copy;<span class="time"></span></div>
				<div class="pading10 pading-left-25 pading-right-25 align_c">
							<span class="small fc_dark_grey"><i class="icon-square fc_red"></i> <span id="mediaSourceName"></span></span>
						</div>
						<div>
									<div class="chart-bady" id="mediaSourceChart" style="height: 320px;"></div>

							  </div>
							  </div>
							  <div class="panel-footer panel-footer-padd" id="mediaSourceChart_msg" style="height: 55px;">
							</div>
							</div>



						</div>
					</div>
				    <div class="col-md-6">
						<div class="panel panel-default" id="meiTiFriend">
								<div class="panel-heading titlBar">
									<h3 class="panel-title mr10">媒体友好度</h3>
									<i class="icon-help mr10"></i>

									<div class="tools">

		<a href="javascript:reloadSelect(4);" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新
"><i class="icon-reload"></i></a>
			<a href="javascript:reloadSelect(4);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏
">
				<i class="icon-full"></i>
				</a>

				<a data-toggle="collapse" data-parent="#accordion" href="#collapse4" class="collapse">
					<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
				</a>

</div>
								</div>
								<div class="tipinfo showing">
									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
									<div class="tipcont">该数据为您显示：<br>指微博、客户端、微信、论坛以及网站（新闻、政务、报刊、网站、博客、外媒、视频）在相关信息的原发平台上的非敏感信息的占比情况。
</div>
								</div>

							<div class="panel-collapse collapse in" id="collapse4">
								<div class="panel-body" style="padding: 0;">
				<div class="pading10 pading-left-25 pading-right-25 align_c">
							<span class="small fc_dark_grey"><i class="icon-square fc_red"></i><span id="mediaFriendName"></span></span>
						</div>

									<div class="chart-bady">
										 <div class="abs fc_gray" style="bottom: 10px; right: 10px;">&copy;<span class="time"></span></div>
									<div class="mediaFriendliness align_c">
										<div class="mediaSource yellow">
											<ul>
												<li><p>微博</p><p><span id="goFriendUnID1"></span></p></li>
												<li><p>论坛</p><p><span id="goFriendUnID2"></span></p></li>
												<li><p>微信</p><p><span id="goFriendUnID3"></span></p></li>
												<li><p>网站</p><p><span id="goFriendUnID4"></span></p></li>
												<li><p>客户端</p><p><span id="goFriendUnID5"></span></p></li>
											</ul>
										</div>
										<div class="mediaCircle yellow">
											<div class="mediaFriendlyChart"></div>
										</div>
									</div>
									<!--<div class="pading10" >
										<img src="/images/zst12.jpg" width="100%" height="100%"/>
									</div>-->

			    	    	    </div>


							  </div>
							  <div class="panel-footer panel-footer-padd" id="mediaFriendlyChart_msg" style="height: 55px;">
							</div>
							</div>



						</div>
					</div>

				</div>
				<!--媒体来源/媒体友好度 end -->

				<!--关键词云/关联度 start -->
				<div class="row clearfix">
					<div class="col-md-6">
						<div class="panel panel-default" id="guanJianCiYun">
							<div class="panel-heading titlBar">
								<h3 class="panel-title mr10">关键词云</h3>
								<i class="icon-help mr10"></i>
									<div class="tools">
										<a href="javascript:reloadSelect(5);" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新"><i class="icon-reload"></i></a>
											<a href="javascript:reloadSelect(5);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
												<i class="icon-full"></i>
											</a>

											<a data-toggle="collapse" data-parent="#accordion" href="#collapse33" class="collapse">
												<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
											</a>

									</div>
							</div>
							<div class="tipinfo showing">
								<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
								<div class="tipcont">该数据为您显示：<br>利用自然语义分析法，对事件、人物、品牌、地域中所提及的关键词进行分词聚合，呈现出被提及次数最多的关键词；字号越大的词组，被提及次数越多。
</div>
							</div>
							<div class="panel-collapse collapse in" id="collapse33">
									<div class="panel-body" style="padding: 0;">
									<div class="abs fc_gray" style="bottom: 10px; right: 10px; z-index: 2;">&copy;<span class="time"></span></div>
										<div class="pading10 pading-left-25 pading-right-25 align_c">
										<span class="small fc_dark_grey"><i class="icon-square fc_red"></i> <span id="containerName"></span></span>
									</div>
									<div>
										<div class="chart-bady" style="height: 320px;" id="container2">
			    	    	  		    </div>
			    	    	  		    </div>
<!-- 										<div class="row clearfix"> -->
<!-- 			                                <div id="container2"></div> -->
<!-- 			                            </div> -->
								   </div>
								  	<div class="panel-footer panel-footer-padd" style="height: 55px;" id="container2_msg">
									</div>
							</div>



						</div>
					</div>
				    <div class="col-md-6">
						<div class="panel panel-default"  id="guanLianCi">
								<div class="panel-heading titlBar">
									<h3 class="panel-title mr10">关联词</h3>
									<i class="icon-help mr10"></i>

									<div class="tools">

		<a href="javascript:reloadSelect(6);" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新
"><i class="icon-reload"></i></a>
			<a href="javascript:reloadSelect(6);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏
">
				<i class="icon-full"></i>
				</a>

				<a data-toggle="collapse" data-parent="#accordion" href="#collapse6" class="collapse">
					<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
				</a>

</div>
								</div>
								<div class="tipinfo showing">
									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
									<div class="tipcont">该数据为您显示：<br>指通过系统自动运算找出事件核心词，并计算出与核心词同时出现频次最高的关联词，图中心位置为核心词，其余为关联词，圈层颜色的由深入浅代表关联程度由大到小，词汇圆圈的大小代表信息量的多少。
</div>
								</div>

							<div class="panel-collapse collapse in" id="collapse6">
								<div class="panel-body" style="padding: 0;">
									<div class="abs fc_gray" style="bottom: 10px; right: 10px; z-index: 2;">&copy;<span class="time"></span></div>
				<div class="pading10 pading-left-25 pading-right-25 align_c">
							<span class="small fc_dark_grey"><i class="icon-square fc_red"></i> <span id="relevantName"></span></span>
						<div class="abs" style="top: 10px; left: 10px;">
								<span class="v_a_m fc_red">相关性：</span> <span class="v_a_m fc_gray">强</span> <i class="icon-dian fz18" style="color: rgba(231,145,107,0.3);"></i><i class="icon-dian fz18" style="color: rgba(231,145,107,0.1);"></i><i class="icon-dian fz18" style="color: rgba(231,145,107,0.07);"></i><span class="v_a_m fc_gray">弱</span>
							</div>
						</div>
						<div>
								<div class="chart-bady" id="relevantChart" style="height: 320px;">

			    	    	    </div>
			    	    	    </div>


							  </div>
							  <div class="panel-footer panel-footer-padd" style="height: 55px;" id="relevantChart_msg">

							</div>
							</div>



						</div>
					</div>

				</div>
				<!--关键词云/关联词 end -->



				<!--地域分析 start -->
				<div class="row clearfix">
					<div class="col-md-12">
						<div class="panel" id="diYuFenXi">
							<div class="panel-heading-padd">
								<div class="panel-heading titlBar">
									<h3 class="panel-title mr10">地域分析</h3>
									<i class="icon-help mr10"></i>
									<div class="tools">

										<a href="javascript:reloadSelect(7);" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新"><i class="icon-reload"></i></a>
										 <a href="javascript:reloadSelect(7);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏"><i class="icon-full"></i></a>

										<a data-toggle="collapse" data-parent="#accordion" href="#collapse44" class="collapse">
														<i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
													</a>

									</div>
								</div>
								<div class="tipinfo showing">
									<div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
									<div class="tipcont">该数据为您显示：<br>指所分析信息的来源地区，按照信息发布者所在地区进行统计，并展示TOP10。
</div>
								</div>
							</div>
							<div class="panel-collapse collapse in" id="collapse44">
								<div class="panel-body">
									<div class="row clearfix">
										<div class="pading10 pading-left-25 pading-right-25 align_c">
											<span class="small fc_dark_grey"><i class="icon-square fc_red"></i> <span id="areaNameId"></span></span>
										</div>
										<div class="col-md-6">

										</div>
									</div>
									<div class="row clearfix">
										<div class="col-md-6">
											<div class="chart-bady" id="container4" style="height: 450px;"></div>
										</div>
											<div class="abs fc_gray" style="bottom: 10px; right: 10px; z-index: 2;">&copy;<span class="time"></span></div>
										<div class="col-md-6">
											<div class="chart-bady" id="container5" style="height: 450px;"></div>
										</div>
									</div>

								</div>
						    <div class="panel-footer" id="container4_msg">
<!-- 						    	   从地域分布来看,与王俊凯相关的信息主要来源<font class="fc_red">浙江(31066777条)、湖北(5692602条)</font>和<font class="fc_red">陕西(4899939条)</font>。 -->
						    </div>
							</div>

						</div>
					</div>
				</div>
				<!--地域分布 end -->

                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="group-btn-scale phone_hide">
                            <span class="fz14">分享到：</span>
                            <a href="#" class="btn-icon btn-icon30 btn-circle bg_red" title="微博" onclick="shareTo(event,'sinaminiblog');return false;"><i class="icon-weibo"></i></a>
                            <a href="#" class="btn-icon btn-icon30 btn-circle bg_green ml5" title="微信" onclick="shareTo(event,'weixin');return false;"><i class="icon-weixin"></i></a>
                            <a href="#" class="btn-icon btn-icon30 btn-circle bg_blue ml5" title="QQ" onclick="shareTo(event,'qqim');return false;"><i class="icon-qq"></i></a>
                            <a href="#" class="btn-icon btn-icon30 btn-circle bg_yellow ml5" title="QQ空间" onclick="shareTo(event,'qzone');return false;"><i class="icon-qqkongjian" style="margin-top: -2px;"></i></a>
                        </div>

                    </div>
                </div>

            </div>
            <div class="tab-pane fade in" id="page2">
                <div class="row clearfix">
                    <div class="col-md-4">
                        <div class="btn-group green" data-toggle="buttons">
                            <label class="btn active" style="width: 72px;" onclick="goDateEmotion(24)">
                                <input type="radio" name="options" id="date24" value="0"> 24小时
                            </label>
                            <label class="btn" style="width: 72px;" onclick="goDateEmotion(3)">
                                <input type="radio" name="options" id="date72" value="0"> 3天
                            </label>
                        </div>
                    </div>
                    <div class="col-md-4"></div>

                </div>
                <!--col1 start -->
                <div class="row clearfix mt10">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="dashboard-stat bg_army_green">
                                    <p class="fz14 mt15">搜索关键词：</p>
                                    <h1 class="fz24 mt5" id="searchkeyword">双一流</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="dashboard-stat bg_black rel">
                                    <p class="fz14 mt15">显著情绪:</p>
                                    <h1 class="fz24 mt5 nowrap">
                                        <span id="emotionType"></span>
                                    </h1>
                                    <i id="emotionIcon" class="icon-bq-zx fz60 abs" style="top: 15px; right: 20%;"></i>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="dashboard-stat bg_cobalt_blue">
                                    <p class="fz14 mt15">微博声量:</p>
                                    <h1 class="fz24 mt5"><span id="emotionCount"></span>条</h1>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!--col1 end -->

                <!--col2 start -->
                <div class="row clearfix">
                    <div class="col-md-7">
                        <div class="panel">
                            <div class="panel-heading-padd">
                                <div class="panel-heading">
                                    <h3 class="panel-title">情绪地图</h3>
                                    <i class="icon-help fc_blue fc_blue mr10"></i>
                            <span class="small fc_blue">数据时间：<span class="startTime">2017年11月18日 18:26</span> － 2017年11月19日 18:26&nbsp;&nbsp;&nbsp;数据来源：新浪微博
</span>
                                    <div class="tools">
                                        <a href="javascript:;" onclick="refushMapChart()" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新">
                                            <i class="icon-reload"></i>
                                        </a>
                                        <a href="javascript:;" onclick="quanpingChart(this,1);" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
                                            <i class="icon-full"></i>
                                        </a>
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse4" class="collapse">
                                            <i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="tipinfo showing">
                                    <div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
                                    <div class="tipcont">“情绪地图”是指基于深度学习的语义情感分类模型，在人类常见情绪分类的基础上、对社会化媒体文本大数据中的潜在情绪进行判别和归类统计，最终呈现为情绪在时间和空间维度上的分布。
                                    </div>
                                </div>
                            </div>
                            <div class="panel-collapse collapse in" id="collapse4">
                                <div class="panel-body">
                                    <div class="legend" style="top: 10px;">
                                        <ul>
                                            <li class="qx_1 active">显著情绪</li>
                                            <li class="qx_2">愤怒</li>
                                            <li class="qx_3">恐惧</li>
                                            <li class="qx_6">悲伤</li>
                                            <li class="qx_5">惊奇</li>
                                            <li class="qx_4">喜悦</li>
                                            <li class="qx_7">中性</li>
                                        </ul>
                                    </div>
                                    <div class="swiper-container swiper-container1" style="margin-top: 15px;height: 496px;">
                                        <div class="swiper-wrapper">
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart1" style="height: 495px;text-align: center;"></div>
                                            </div>
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart2" style="height: 495px;text-align: center;"></div>
                                            </div>
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart3" style="height: 495px;text-align: center;"></div>
                                            </div>
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart4" style="height: 495px; text-align: center;"></div>
                                            </div>
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart5" style="height: 495px;text-align: center;"></div>
                                            </div>
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart6" style="height: 495px;text-align: center;"></div>
                                            </div>
                                            <div class="swiper-slide swiper-no-swiping">
                                                <div class="chart-bady chart_shuiyin" id="mapChart7" style="height: 495px;text-align: center;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="panel">
                            <div class="panel-heading-padd" >
                                <div class="panel-heading">
                                    <h3 class="panel-title" id="emotionTopTitle">微博声量TOP10地区显著情绪</h3>
                                </div>
                                <div class="panel-body" style="padding: 0 0 20px;height: 542px;text-align: center;">
                                    <div class="swiper-container swiper-container2"  style="height: 505px">
                                        <div class="swiper-wrapper">
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart1"></div>
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart2"></div>
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart3"></div>
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart4"></div>
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart5"></div>
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart6"></div>
                                            <div class="swiper-slide swiper-no-swiping" id="tablemapChart7"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>

                <!--col2 end -->

                <!--col3 start -->
                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading-padd">
                                <div class="panel-heading">
                                    <h3 class="panel-title">情绪构成</h3>
                                    <i class="icon-help fc_blue fc_blue mr10"></i>
                                    <span class="small fc_blue">数据时间：<span class="startTime">2017年11月18日 18:26</span>－2017年11月19日 18:26&nbsp;&nbsp;&nbsp;数据来源：新浪微博</span>
                                    <div class="tools">
                                        <a href="javascript:refushBarPieChart()" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新">
                                            <i class="icon-reload"></i>
                                        </a>
                                        <a href="javascript:;" onclick="quanpingChart(this,2)" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
                                            <i class="icon-full"></i>
                                        </a>
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse5" class="collapse">
                                            <i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
                                        </a>

                                    </div>
                                </div>
                                <div class="tipinfo showing">
                                    <div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
                                    <div class="tipcont">查看指定时间范围内，您的检索词的各类情绪声量的对比呈现和成分占比。</div>
                                </div>
                            </div>
                            <div class="panel-collapse collapse in" id="collapse5">
                                <div class="panel-body barChart">
                                    <div class="chart-bady chart_shuiyin" id="sourceTypeChart" style="height: 460px;text-align: center;"></div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>

                <!--col3 end -->

                <!--col4 start -->
                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading-padd">
                                <div class="panel-heading">
                                    <h3 class="panel-title">情绪走势</h3>
                                    <i class="icon-help fc_blue fc_blue mr10"></i>
                                    <span class="small fc_blue">数据时间：<span class="startTime">2017年11月18日 18:26</span>－2017年11月19日 18:26&nbsp;&nbsp;&nbsp;数据来源：新浪微博</span>
                                    <div class="tools">
                                        <a href="javascript:;" onclick="refushLineChart()" class="reload" data-toggle="tooltip" data-placement="top" title="" data-original-title="刷新">
                                            <i class="icon-reload"></i>
                                        </a>
                                        <a href="javascript:;" onclick="quanpingChart(this,3)" class="full" data-toggle="tooltip" data-placement="top" title="" data-original-title="全屏">
                                            <i class="icon-full"></i>
                                        </a>
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse6" class="collapse">
                                            <i class="icon-angle-down" data-toggle="tooltip" data-placement="top" title="" data-original-title="收起"></i>
                                        </a>

                                    </div>
                                </div>
                                <div class="tipinfo showing">
                                    <div class="tiparro"><i class="icon-arrow_drop_up tipAup" style="left: 68px;"></i><i class="icon-remove close"></i></div>
                                    <div class="tipcont">查看指定时间内，您的检索词的情绪声量在近24小时/72小时随时间变化的趋势。</div>
                                </div>
                            </div>
                            <div class="panel-collapse collapse in" id="collapse6">
                                <div class="panel-body">
                                    <div class="chart-bady chart_shuiyin" id="hotTrendChart" style="height: 460px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!--col4 end -->
            </div>
        </div>




    </div>
</div>

<!--底部部分代码 start-->







    <link href="/css/font-icon.css?v=201711171830" rel="stylesheet" type="text/css">
    <link href="/css/style.css?v=201711171830" rel="stylesheet" type="text/css">
    <link href="/css/home.css?v=201711171830" rel="stylesheet" type="text/css">
    <!--关于我们 start-->
    <div class="row-fluid">
        <div class="layout-row pading-top-40" id="aboutUs">
            <div class="row row5 clearfix">
                <div class="col-md-7">
                    <div class="row row5">
                        <div class="col-xs-4">
                            <div class="cont">
                                <i class="icon-phone2"></i>
                                <p>产品咨询：400-600-7505</p>
                                <p>客服电话：400-600-7505</p>
                            </div>
                        </div>

                        <div class="col-xs-4">
                            <div class="cont">
                                <i class="icon-qq"></i>
                                <p>客服QQ：3002432217</p>
                                <p>客服QQ：3002436852</p>

                            </div>
                        </div>
                        <div class="col-xs-4">
                            <div class="cont">
                                <i class="icon-envelope"></i>
                                <p>Email：cs@mail.wyq.sina.com</p>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-4 float_r">
                    <div class="row row5">

                        <div class="col-xs-6">
                            <div class="cont">
                                <p class="fc_orange">微信订阅号二维码</p>
                                <p><img src="/images/home/weixingdyh20170926.jpg"/></p>


                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="cont">
                                <p class="fc_orange">官方微博二维码</p>
                                <p><img src="/images/home/weiboGW.png"/></p>
                            </div>
                        </div>



                    </div>
                    <div class="row row5">

                        <div class="col-xs-12 align_c fc_white mt20 fz14">

                        </div>

                    </div>
                </div>
            </div>


            <div class="clear"></div>

        </div>
    </div>
    <div id="footer">&copy; Copyright&nbsp;&nbsp; wyq.cn 2002-2015 All Rights Reserved &nbsp;&nbsp;沪ICP备05035762号&nbsp;&nbsp;&nbsp;&nbsp;      地址：上海市浦东新区张衡路198弄10号楼301</div>
    <!--关于我们 end-->



<!--底部部分代码 end-->



<script src="http://cdn.files.51wyq.cn/web/js/jquery.nav2.js?v=201711171830"></script>
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/jquery.slimscroll.js?v=201711171830" charset="utf-8"></script>
<script src="/js/switchery.min.js?v=201711171830" type="text/javascript" charset="utf-8"></script>
<script src="/js/module.js?v=201711171830" type="text/javascript" charset="utf-8"></script>

<SCRIPT type="text/javascript" src="/js/hotSearchchart.js?v=201711171830" charset="utf-8"></SCRIPT>
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/twitter-bootstrap-hover-dropdown.js?v=201711171830"></script>
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/icheck.js?v=201711171830"></script>
<link rel="stylesheet" type="text/css" media="all" href="http://cdn.files.51wyq.cn/web/css/css/daterangepicker.css?v=201711171830" />
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/js/moment.js?v=201711171830" charset="UTF-8"></script>
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/js/daterangepicker.js?v=201711171830" charset="UTF-8"></script>
<script type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/randomChart.js?v=201711171830"></script>

<script type="text/javascript">
    var searchFlag = 1;
    $(function(){
        $('#treeDiv').onePageNav();
        //table固定头部
        $("#relatedWords").FixedHead({ tableLayout: "fixed" });
        $("#relatedWords21").FixedHead({ tableLayout: "fixed" });
        $("#relatedWords22").FixedHead({ tableLayout: "fixed" });
        $("#relatedWords31").FixedHead({ tableLayout: "fixed" });
        $("#relatedWords32").FixedHead({ tableLayout: "fixed" });
        $("#relatedWords33").FixedHead({ tableLayout: "fixed" });

        //虚拟滚动条
        $('#relatedWordsTable .fixedtablewrap>div+div').slimScroll({height: 'auto'});
        $('#relatedWordsTable21 .fixedtablewrap>div+div').slimScroll({height: 'auto'});
        $('#relatedWordsTable22 .fixedtablewrap>div+div').slimScroll({height: 'auto'});
        $('#relatedWordsTable31 .fixedtablewrap>div+div').slimScroll({height: 'auto'});
        $('#relatedWordsTable32 .fixedtablewrap>div+div').slimScroll({height: 'auto'});
        $('#relatedWordsTable33 .fixedtablewrap>div+div').slimScroll({height: 'auto'});

        var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));
        elems.forEach(function(html) {
            var switchery = new Switchery(html);
        });

    });

    function toggleTab(n){
        var index = $("#myTab li").index($("#myTab .active"));
        if(n == index){
            return;
        }
        if(searchFlag == 1){
            setTimeout(function(){
                if(n == 0){
                	$("#selectTimeWait").show();
                    goSearch(1);
                }else{
                	$("#selectTimeWait").hide();
                    goAnalysis();
                }
            },500);
        }else{
        	 if(n == 0){
             	$("#selectTimeWait").show();
             }else{
             	$("#selectTimeWait").hide();
             }
        }
        searchFlag = 0;
    }

    function hotAndEmotionSearch(){
        searchFlag = 1;
        var index = $("#myTab li").index($("#myTab .active"));
        if(index == 1){
            goAnalysis();
        }else{
            goSearch(1);
        }
    }


    $(function(){
        if('0' == 1){
            $("#myTab a:eq(1)").trigger('click');
            //initChart();
            setTimeout(function(){searchFlag = 1;},1000);
        }else{
            $(".info_close").hide();
            SetRQ('24');
            queryAgain();
        }
    });
</script>

<!--情绪页面的js-->
<SCRIPT type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/emotionMap/emotionMapchart.js?v=201711171830"></SCRIPT>
<SCRIPT type="text/javascript" src="http://cdn.files.51wyq.cn/web/js/emotionMap/emotionAnalysisChart.js?v=201711171830"></SCRIPT>
<script src="http://cdn.files.51wyq.cn/web/css/emotion/js/swiper.min.js?v=201711171830"></script>
<script type="text/javascript">
    //panel chart图切换
    var Tool = '.panel .panel-heading .tools';
    $(Tool).on("click",".barBtn", function() {
        $(this).parents(".panel").find(".panel-body")
                .css("height","0")
                .css("overflow","hidden")
                .css("opacity","0");
        $(this).parents(".panel").find(".panel-body.barChart")
                .css("height","auto")
                .css("overflow","initial")
                .css("opacity","1");
    });

    $(Tool).on("click",".pieBtn", function() {
        $(this).parents(".panel").find(".panel-body").css("height","0").css("overflow","hidden").css("opacity","0");
        $(this).parents(".panel").find(".panel-body.pieChart").css("height","auto").css("overflow","initial").css("opacity","1");
    });
    //情绪切换

    var mySwiper1 = new Swiper('.swiper-container1',{
        autoplayDisableOnInteraction : false,
        observer: true,
        observeParents: true,
        onAutoplay: function(swiper){
            $(".legend li").removeClass("active");
            $(".legend li").eq(swiper.activeIndex).addClass("active");
        }
    });
    var mySwiper2 = new Swiper('.swiper-container2',{
        autoplayDisableOnInteraction : false,
        observer: true,
        observeParents: true,
        onAutoplay: function(swiper){
            $(".legend li").removeClass("active");
            $(".legend li").eq(swiper.activeIndex).addClass("active");
        }
    });
    $(".panel-body .legend ul").on("click","li", function() {
        $(this).parents(".panel-body").find(".legend ul li").removeClass("active");
        $(this).addClass("active");
        mySwiper1.slideTo($(this).index(), 1000, false);
        mySwiper2.slideTo($(this).index(), 1000, false);
    });
    $(".panel-body .legend ul").on("mouseover","li", function() {
        $(this).parents(".panel-body").find(".legend ul li").removeClass("active");
        $(this).addClass("active");
        mySwiper1.slideTo($(this).index(), 1000, false);
        mySwiper2.slideTo($(this).index(), 1000, false);
        if($(this).index()!=0){
            var text=$.trim($(this).html());
            $("#emotionTopTitle").text(text+"情绪TOP10地区");
        }else{
            $("#emotionTopTitle").text("微博声量TOP10地区显著情绪");
        }
    });

    function goDateEmotion(date) {
        $("#date").val(date);
        var endtime = $("#endTime").val();
        endtime=endtime.replace("年","/").replace("月","/").replace("日","");
        var today=new Date(endtime);
        var ago3Day;
        var agoThreeDay;
        if(date==24){
            ago3Day = new Date(Date.parse(today.toString()) - 86400000*1);
            agoThreeDay=ago3Day.format('yyyy年MM月dd日 hh:mm');
        }else{
            ago3Day = new Date(Date.parse(today.toString()) - 86400000*2);
            agoThreeDay=ago3Day.format('yyyy年MM月dd日 00:00');
        }
        $(".startTime").html(agoThreeDay);
        initChart();
    }
    function glb_searchTextOnfocus(obj) {
        if(obj.value == '人名、企业名、品牌名或事件关键词')
            obj.value = '';
        if(obj.value == '网络情绪，一搜便知')
            obj.value = '';
        obj.style.color = '#aaaaaa';
    }
    function glb_searchTextOnBlur(obj) {
        if(obj.value == '') {
            obj.value = '网络情绪，一搜便知';
            obj.style.color = '#aaaaaa';
        } else {
            obj.style.color = '#aaaaaa';
        }
    }
    //标题栏说明文字显示隐藏
//     $(".icon-help").on("click", function() {
//         $(this).parents(".panel-heading").next(".tipinfo").toggle(300)
//     });
//     $(".tipinfo .close").on("click", function() {
//         $(this).parents(".tipinfo").hide(300)
//     });
    function goenterClick(event){
        event = event || window.event;
        if(event.keyCode==13){
            hotAndEmotionSearch();
        }
    }
    function goAnalysis(){
        var kv = $("#search-keyword").val();
        if($.trim(kv)=="人名、企业名、品牌名或事件关键词"){
            showMsgInfo(0,"请输入搜索词!",0);
            return;
        }
        kv = kv.replace(/、/g,"+").replace(/\s+/g,"+");
        if($.trim(kv).length>20){
            showMsgInfo(0,"搜索词不得大于20个字!",0);
            return;
        }
        if($.trim(kv)==""||$.trim(kv)=="请输入您想查询的关键字"){
            showMsgInfo(0,"请输入你想搜索的词语",0);
            return ;
        }
        if($.trim(kv).length==1){
            showMsgInfo(0,"请至少输入2个字符",0);
            return ;
        }
        checkKeyword(kv);
    }
    function checkKeyword(keyword){
        if (isNozifu(keyword)==0){
            showMsgInfo(0, "对不起，你的关键词不能包含非法字符，如#@￥%……&*等", 0);
            return;
        }else if(isNozifu(keyword)==1){
            showMsgInfo(0, "请至少输入2个字符", 0);
            return;
        }
        $.ajax({
            url:actionBase+"/view/emotion/checkEmotionKeyword.action",
            type:"post",
            data:{
                "keyword":keyword,
                "count" : 0
            },
            success:function(data){
                if(data!=null && data!=""){
                    if(data=="true"){
                        $("#title,#keyword1").val(keyword);
                        $("#searchkeyword").text(keyword);
                        /*initChart();*/
                        goDateEmotion(24);
                    }else{
                        intoTo(17);
                    }
                }else{
                    intoTo(17);
                }
            }
        });
    }

</script>

<!--热搜页面的js-->
<script type='text/javascript'>
    /**
     * Created by 罗朝州 on 2017/6/20.
     */

    var phone = false;
    $(function(){
        var bs = {
            versions: function () {
                var u = navigator.userAgent, app = navigator.appVersion;
                return {
                    windowsPhone: u.indexOf('IEMobile') > -1,
                    trident: u.indexOf('Trident') > -1,
                    presto: u.indexOf('Presto') > -1,
                    webKit: u.indexOf('AppleWebKit') > -1,
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') === -1,
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/) || !!u.match(/IEMobile/),
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
                    android: u.indexOf('Android') > -1 || u.indexOf('UCBrowser') > -1,
                    iPhone: u.indexOf('iPhone') > -1,
                    iPad: u.indexOf('iPad') > -1,
                    webApp: u.indexOf('Safari') === -1
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        };
        if (bs.versions.mobile) {
            if (bs.versions.android || bs.versions.iPhone || bs.versions.iPad || bs.versions.windowsPhone) {
                phone = true;
            }
        }

        //微信分享
        var wcConfig = new Object();
        wcConfig.title = document.title;
        wcConfig.desc = "";
        wcConfig.link = "http://www.51wyq.cn/share/heat/heatPreviewNot.shtml?notIntercept=1&shareCode=" + encodeURIComponent($("#shareCode").val())+"&searchOne=1";
        wcConfig.imgUrl = "http://cdn.files.51wyq.cn/web/images/wyqlogo.jpg";
        wcConfig.basePath = '';
        weixinLinkShare(wcConfig);
    })

    //获取开始时间
    function startTime(){
        var d = new Date(new Date().getTime() - 24*60*60*1000);  //24小时前
        var str = d.format('yyyy-MM-dd hh:mm:ss');
        return str;
    }
    //获取结束时间
    function endTime(){
        var str = new Date().format('yyyy-MM-dd hh:mm:ss');
        return str;
    }



    function shareTo(event,type){
        var pre = location.href.split("/view")[0];

        var shareCode = $("#shareCode").val();
        var title=$("#title").val();
        if(title.indexOf(',') != -1){
            title=$("#title").val().split(",")[0];
        }
        var hotCus=$("#hotCus").val();
        if(hotCus<=30){
            hotCus="0～30";
        }else if(hotCus>30&&hotCus<=60){
            hotCus="30～60";
        }else if(hotCus>60&&hotCus<=80){
            hotCus="60～80";
        }else if(hotCus>80&&hotCus<=100){
            hotCus="80～100";
        }else{
            hotCus="80～100";
        }
        var titleDes = "【微舆情】一起来比比热度指数吧~"+title+"的热度指数在"+hotCus+"之间，快戳";
        if('sinaminiblog'==type){
            titleDes="【来自@微舆情】#热度比拼#"+title+"的热度指数在"+hotCus+"之间，快戳";
        }
        var url="";
        if(shareCode.length==0) {
            if(phone){
                url ="http://h5.51wyq.cn/indexLocal.shtml";
            }else{
                url ="http://wyq.sina.com/login.shtml";
            }
            if($("#keywords").val().indexOf(",")!=-1){
                var buyKeywords = "{";
                var keywordNum=0;
                var keywords=[];
                keywords=$("#keywords").val().split(",");
                var titles=[];
                titles=$("#title").val().split(",");
                var filterKeywords=[];
                filterKeywords=$("#filterKeyword").val().split(",");
                var categoryTypeArr = [];
                var categoryTypes = $("#categoryType").val();
                categoryTypeArr = categoryTypes.split(",");
                for(var i=0;i<titles.length;i++){
                    var title=titles[i];
                    var keyword=keywords[i];
                    var filterKeyword=filterKeywords[i];
                    var categoryType = categoryTypeArr[i];
                    if(keyword) {
                        buyKeywords += '"title'+(i+1)+'":"'+title + '","keyword'+(i+1)+'":"' + keyword + '"';
                        if(filterKeyword) {
                            buyKeywords += ',"filterKeyword' + (i + 1) + '":"' + filterKeyword + '"';
                        }
                        if(categoryType) {
                            buyKeywords += ',"type'+(i+1)+'":'+categoryType+',';
                        }
                        if($("#secondCategory").val()!=""){
                            buyKeywords += ',"secondCategory'+(i+1)+'":'+$("#secondCategory").val();
                        }
                        if($("#categoryLevel").val()!=""){
                            buyKeywords += ',"categoryLevel'+(i+1)+'":'+$("#categoryLevel").val()+',';
                        }
                        buyKeywords += ",";
                        keywordNum++;
                    }
                }
                if($("#date").val()){
                    buyKeywords += '"date":'+$("#date").val()+",";
                }
                if($("#starttime").val()){
                    buyKeywords += '"startTime":'+$("#starttime").val()+",";
                }
                if($("#endtime").val()){
                    buyKeywords += '"endTime":'+$("#endtime").val()+",";
                }
                buyKeywords = buyKeywords.substring(0, buyKeywords.length - 1);
                buyKeywords +="}";
                if (keywordNum < 2) {
                    var parms = {'heatShare.title':$("#title").val(),'heatShare.keyword':$("#keywords").val(),'heatShare.filterKeyword':$("#filterKeyword").val(),'heatShare.categoryId':$("#categoryId").val(),'categoryType':$("#categoryType").val(),'secondCategory':$("#secondCategory").val(),'categoryLevel':$("#categoryLevel").val(),'date':$("#date").val(),'heatShare.shareDate':$("#allTimeTe").text(),'starttime':$("#starttime").val(),'endtime':$("#endtime").val()};
                    $.ajax({
                        url : "/view/hotSearch/shareSingleHotSearch.action",
                        type : "post",
                        async:false,
                        data:parms,
                        success : function(data){
                            if(data){
                                $("#shareCode").val(data);
                                url =  pre + "/share/heat/heatPreviewNot.shtml?notIntercept=1&shareCode=" + encodeURIComponent(data)+"&searchOne=1";
                            }
                        }
                    })
                } else {
                    showMsgInfo(0,"请付费之后再分享，谢谢！",0);
                    return;
                }
            }else{
                var parms = {'heatShare.title':$("#title").val(),'heatShare.keyword':$("#keywords").val(),'heatShare.filterKeyword':$("#filterKeyword").val(),'heatShare.categoryId':$("#categoryId").val(),'categoryType':$("#categoryType").val(),'secondCategory':$("#secondCategory").val(),'categoryLevel':$("#categoryLevel").val(),'date':$("#date").val(),'heatShare.shareDate':$("#allTimeTe").text(),'starttime':$("#starttime").val(),'endtime':$("#endtime").val()};
                $.ajax({
                    url : "/view/hotSearch/shareSingleHotSearch.action",
                    type : "post",
                    async:false,
                    data:parms,
                    success : function(data){
                        if(data){
                            $("#shareCode").val(data);
                            url =  pre + "/share/heat/heatPreviewNot.shtml?notIntercept=1&shareCode=" + encodeURIComponent(data)+"&searchOne=1";
                        }
                    }
                })
            }

        }else{
            url = pre + "/share/heat/heatPreviewNot.shtml?notIntercept=1&shareCode=" + encodeURIComponent(shareCode)+"&searchOne=1";
        }
        url = url.replace('wyq.sina.com', 'www.51wyq.cn');
        //清除自定义分享内容的方法，在设置前清空，重新自定义内容
        bShare.entries = [];
        bShare.addEntry({
            title:titleDes,
            url: url
        });
        bShare.init();
        bShare.share(event,type,0);
    }

    function queryAgain(){
        if($("#num").val()>1){
            $("#advSearchSubmit").click();
        }else {
            $("#num").val(0);
            $("#search-keyword").val('双一流'.replace(/,/g, "、").replace(/、$/,""));
            $("#title").val('双一流');
            $("#keywords,#keyword").val('双一流');
            $("#filterKeyword").val('');

            unset($("#title").val(),$("#keywords").val(),$("#filterKeyword").val());
            if($("#title").val()||$("#keywords").val()){
                tag = 1;
                beginQuery();
            }else{
                showMsgInfo(0, "请填写要查询的关键字！", 0);
            }
        }
    }

    //一个词 输入框
    function unset(title,keyword,filterKeyword){
        var curIds="";
        var html="";
        var count=0;
        if($("#advSearchSubmit:visible")){
            $("#advSearchSubmit").show();
        }
        if($("#riverButton:visible")){
            $("#riverButton").show();
        }

        $(".compUl> li").each(function(){
            if($(this).attr("class").indexOf('colorOne') != -1){
                $(".colorOne").remove();
            }else if($(this).attr("class").indexOf('colorTwo') != -1){
                $(".colorTwo").remove();
            }else if($(this).attr("class").indexOf('colorThree') != -1){
                $(".colorThree").remove();
            }else if($(this).attr("class").indexOf('colorFour') != -1){
                $(".colorFour").remove();
            }
        });
        if(keyword.indexOf(',') != -1){
            count=keyword.match(/,/g).length;
        }
        if(count>0){
            var keywordArr=[];
            keywordArr=keyword.split(",");
            var titleArr=[];
            titleArr=title.split(",");
            var filterKeywordArr=[];
            filterKeywordArr=filterKeyword.split(",");
            curIds=""
            for(var i=0;i<titleArr.length;i++){
                var tit=titleArr[i];
                var kw=keywordArr[i];
                var fk=filterKeywordArr[i];
                if(i==0){
                    if($.trim(kw)==""){
                        continue;
                    }else{
                        curIds += "colorOne";
                        html += '<li class="compLi comCtl colorOne" id="li_1">' +
                        '<i onclick="delWord(1);"class="compClose">×</i>' +
                        '<i onclick="addWord(1);" id="w1" title="添加组合词" class="addCompS">+</i>' +
                        '<div id="kw1_1" class="comBorderL comBorderLOne">' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="'+tit+'" autocomplete="off" id="title1_1"  onchange="onChangeInput(\'1_1\')" oninput="thinkKeywords(this,1)" placeholder="">' +
                        '<input id="keyword1_1" type="hidden" value="'+kw+'">'+
                        '<input id="filterKeyword1_1" type="hidden" value="'+fk+'">'+
                        '</div>' +
                        '<ul id="hotwords1" class="hotwords" style="display: none;width: 450px;">'+
                        '</ul>'+
                        '</div>'+
                        '<div id="kw1_2" style="display: none;" class="comBorderL">' +
                        '<span class="addicon">+</span>' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword1_2" placeholder="">' +
                        '</div>' +
                        '</div>' +
                        '<div id="kw1_3" style="display: none;" class="comBorderL">' +
                        '<span class="addicon">+</span>' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword1_3" placeholder="">' +
                        '</div>' +
                        '</div>' +
                        '</li>';
                        $(".compUl").append(html);
                        html = '';
                    }
                }
                if(i==1) {
                    if($.trim(kw)==""){
                        continue;
                    }else{
                        curIds += "colorTwo";
                        html += '<li class="compLi comCtl colorTwo" id="li_2">' +
                        '<i onclick="delWord(2);"class="compClose">×</i>' +
                        '<i onclick="addWord(2);" id="w1" title="添加组合词" class="addCompS">+</i>' +
                        '<div id="kw2_1" class="comBorderL">' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="'+tit+'" autocomplete="off" id="title2_1"  onchange="onChangeInput(\'2_1\')" oninput="thinkKeywords(this,2)" placeholder="">' +
                        '<input id="keyword2_1" type="hidden" value="'+kw+'">' +
                        '<input id="filterKeyword2_1" type="hidden" value="'+fk+'">' +
                        '</div>' +
                        '<ul id="hotwords2" class="hotwords" style="display: none;width: 450px;">' +
                        '</ul>' +
                        '</div>' +
                        '<div id="kw2_2" style="display: none;" class="comBorderL">' +
                        '<span class="addicon">+</span>' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword2_2" placeholder="">' +
                        '</div>' +
                        '</div>' +
                        '<div id="kw2_3" style="display: none;" class="comBorderL">' +
                        '<span class="addicon">+</span>' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword2_3" placeholder="">' +
                        '</div>' +
                        '</div>' +
                        '</li>';
                        $(".compUl").append(html);
                        html = '';
                    }
                }
                if (i == 2) {
                    if ($.trim(kw) == "") {
                        continue;
                    } else{
                        curIds += "colorThree";
                        html += '<li class="compLi comCtl colorThree" id="li_3">' +
                        '<i onclick="delWord(3);"class="compClose">×</i>' +
                        '<i onclick="addWord(3);" id="w1" title="添加组合词" class="addCompS">+</i>' +
                        '<div id="kw3_1" class="comBorderL">' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="'+tit+'" autocomplete="off" id="title3_1"  onchange="onChangeInput(\'3_1\')" oninput="thinkKeywords(this,3)" placeholder="">' +
                        '<input id="keyword3_1" type="hidden" value="'+kw+'">' +
                        '<input id="filterKeyword3_1" type="hidden" value="'+fk+'">' +
                        '</div>' +
                        '<ul id="hotwords3" class="hotwords" style="display: none;width: 450px;">' +
                        '</ul>' +
                        '</div>' +
                        '<div id="kw3_2" style="display: none;" class="comBorderL">' +
                        '<span class="addicon">+</span>' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword3_2" placeholder="">' +
                        '</div>' +
                        '</div>' +
                        '<div id="kw3_3" style="display: none;" class="comBorderL">' +
                        '<span class="addicon">+</span>' +
                        '<div class="inner">' +
                        '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword3_3" placeholder="">' +
                        '</div>' +
                        '</div>' +
                        '</li>';
                        $(".compUl").append(html);
                        html = '';
                    }
                }
            }
        }else{
            html += '<li class="compLi comCtl colorOne" id="li_1">' +
            '<i onclick="delWord(1);"class="compClose">×</i>' +
            '<i onclick="addWord(1);" id="w1" title="添加组合词" class="addCompS">+</i>' +
            '<div id="kw1_1" class="comBorderL comBorderLOne">' +
            '<div class="inner">' +
            '<input name="word" class="comWord" maxlength="20" value="'+title+'" autocomplete="off" id="title1_1"  onchange="onChangeInput(\'1_1\')" oninput="thinkKeywords(this,1)" placeholder="">' +
            '<input id="keyword1_1" type="hidden" value="'+keyword+'">'+
            '<input id="filterKeyword1_1" type="hidden" value="'+filterKeyword+'">'+
            '</div>' +
            '<ul id="hotwords1" class="hotwords" style="display: none;width: 450px;">'+
            '</ul>'+
            '</div>' +
            '<div id="kw1_2" style="display: none;" class="comBorderL">' +
            '<span class="addicon">+</span>' +
            '<div class="inner">' +
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword1_2" placeholder="">' +
            '</div>' +
            '</div>' +
            '<div id="kw1_3" style="display: none;" class="comBorderL">' +
            '<span class="addicon">+</span>' +
            '<div class="inner">' +
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword1_3" placeholder="">' +
            '</div>' +
            '</div>' +
            '</li>';
            $(".compUl").append(html);
        }

        if($(".page-layout-content .compUl li:visible").length<3){
            $(".addComp").show();
        }else{
            $(".addComp").hide();
        }
    }

    //画图AND固化多个词
    function beginQuery(n){
    	chartloading("container4");//转地图
    	chartloading("container5");//top10
    	chartloadingTabCluster("container1");//折线图
    	chartloading("collapse33");//词云
    	chartloading("collapse3");//媒体来源
    	chartloading("collapse4");//媒体友好度
    	chartloading("degreeHeatChart");//热度值
    	chartloading("counter");//同比。。  //
    	chartloading("collapse6");//关联度
    	chartloadingTab("selectTimeWait");//自定义
    	chartloadingTab("doubleSelectId");//自定义
    	chartloadingTab("timeToggle2");//自定义
        var title = $("#title").val();
        var keywords = $("#keywords").val();
        var filterKeyword = $("#filterKeyword").val();
        var categoryId=$("#categoryId").val();
        var categoryType=$("#categoryType").val();
        var secondCategory=$("#secondCategory").val();
        var date = $("#date").val();
        var categoryLevel=$("#categoryLevel").val();
        var starttime = $("#starttime").val();
        var endtime = $("#endtime").val();
        var secondClassifyName = $("#secondClassifyName").val();
        var threeClassifyName = $("#threeClassifyName").val();
        var isAll = $("#isAll").val();
        tag = 1;
//         if(categoryLevel && categoryLevel == 11){
//             $("#schoolOverview").show();
//             goSchoolOverview(categoryId, title, categoryType,secondCategory,categoryLevel,secondClassifyName,threeClassifyName,isAll);
//         }else{
//             $("#schoolOverview").hide();
//         }
        if(categoryId) {
            $("#categoryList").show();
            goSenChar(categoryId, title, categoryType,secondCategory,categoryLevel,secondClassifyName,threeClassifyName,isAll);
        }else{
            $("#categoryList").hide();
        }
//  		//折现图
         goHotWorth(keywords,date,title,filterKeyword,starttime,endtime,"2");
//  		//媒体来源
 		goMediaFromNew(keywords,date,title,filterKeyword,starttime,endtime);
//  		//媒体友好度
 		goMediaFriendNew(keywords,date,title,filterKeyword,starttime,endtime);
//  		//地域
 		goChinaNew(keywords,date,title,filterKeyword,starttime,endtime);
//  		//关联度
 		goAssociationNew(keywords,date,title,filterKeyword,starttime,endtime);

//         goHotWorth(keywords,date,title,filterKeyword,starttime,endtime);
//  		//关键词云   以前调接口的
        goRelatedChart(keywords,date,title,filterKeyword,starttime,endtime);
    }

  //学校简介
    function goSchoolOverview(categoryId,title,type,secondCategory,categoryLevel,secondClassifyName,threeClassifyName,isAll){
        jquery('#schoolIntro').loader('show', loaders);
        $.ajax({
            url : "/rankSingleClassifyList.action",
            type : "post",
            data:{"parentId":categoryLevel,"rankTypeId1":secondCategory,"searchName":title,"classifyName":secondClassifyName,"isAll":isAll},
            success : function(data){
                $("#schoolIntro").text(data.descript);
            }
        });
    }

    //固化并查询
    function solidifyQuery(orderRecordId) {
        $("#num").val(0);
        chartloadingTab("hotTable");
        chartloading("container1");
        chartloadingTabCluster("clusterList");
        chartloading("container2");
        chartloading("container6");
        chartloadingTabCluster("mapTop10");
        chartloading("container3");
        chartloading("container4");
        chartloading("container5");
        var categoryId = $("#categoryId").val();
        if(categoryId) {
            $("#categoryList").show();
            chartloadingTab("senTableOne");
        }else{
            $("#categoryList").hide();
        }
        tag = 1;
        var parms = {
            'heatShare.title': $("#title").val(),
            'heatShare.keyword': $("#keywords").val(),
            'heatShare.filterKeyword': $("#filterKeyword").val(),
            'heatShare.categoryId': categoryId,
            'categoryType': $("#categoryType").val(),
            'secondCategory': $("#secondCategory").val(),
            'categoryLevel': $("#categoryLevel").val(),
            'date': $("#date").val(),
            'heatShare.shareDate': $("#allTimeTe").text(),
            'orderRecordId':orderRecordId,
            'starttime':$("#starttime").val(),
            'endtime':$("#endtime").val()
        };
        $.ajax({
            url: "/view/hotSearch/shareSingleHotSearch.action",
            type: "post",
            data: parms,
            success: function (data) {
                if (data) {
                    tag = 0;
                    $("#shareCode").val(data);
                    summaryandline();
                    wordandrelated();
                    origin();
                    area();
                    if(categoryId) {
                        category();
                    }
                }
            }
        });
    }


    function summaryandline(){
        $.ajax({
            url : '/shareReport/summaryandline.action',
            type : "post",
            data :{"shareCode":$("#shareCode").val()},
            success : function(data){
                if(data.msg){
                    var date = $("#date").val();
                    if(date && date == 24){
                        $("#basisTh").text("同比");
                        $("#changeTh").text("热度变化");
                    }else{
                        $("#basisTh").text("微博声量");
                        $("#changeTh").text("微信声量");
                    }
                    HeatReportDwr.getHotTableAndLine4(data.dataLine,$("#title").val(),'',GetRandom(30),worthCallback);
                }else{
                    var data=eval('('+data.dataLine+')');
                    worthCallback(data);
                }
            }
        });
    }

    function wordandrelated(){
        $.ajax({
            url : '/shareReport/wordandrelated.action',
            type : "post",
            data :{"shareCode":$("#shareCode").val()},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotWordRelatedChart(data.dataWordRel,GetRandom(30),relatedCallBack);
                }else{
                    var data=eval('('+data.dataWordRel+')');
                    relatedCallBack(data);
                }
            }
        });
    }

    function origin(){
        $.ajax({
            url : '/shareReport/origin.action',
            type : "post",
            data :{"shareCode":$("#shareCode").val()},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotOTChart(data.dataSource,$("#title").val(),GetRandom(30),OriginCallBack);
                }else{
                    var data=eval('('+data.dataSource+')');
                    OriginCallBack(data);
                }
            }
        });
    }

    function area(){
        $.ajax({
            url : '/shareReport/area.action',
            type : "post",
            data :{"shareCode":$("#shareCode").val()},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotAreaChart(data.dataArea,$("#title").val(),GetRandom(30),AreaCallBack);
                }else{
                    var data=eval('('+data.dataArea+')');
                    AreaCallBack(data);
                }
            }
        });
    }

    function category(){
        $.ajax({
            url : '/shareReport/category.action',
            type : "post",
            data :{"shareCode":$("#shareCode").val()},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotSeniority(data.dataSen,$("#title").val(),GetRandom(30),senCallback);
                }else{
                    var data=eval('('+data.dataSen+')');
                    senCallback(data);
                }
            }
        });
    }

    //获取时间区间
    function SetRQ(date) {
        $("#ticket").val("");
        if(date == 0){
            $("#dropdown_time").show();
        }else{
            $("#allTimeTe").text("");
            $("#dropdown_time").hide();
        }
        $("#date").val(date);
        var MyDate = new Date();
        var seperator2 = ":";
        var year = MyDate.getFullYear();
        var month = MyDate.getMonth() + 1;
        var strDate = MyDate.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }

        var mc=MyDate.getMinutes();
        var minutesCur =mc> 9 ? mc.toString() : "0" + mc.toString();
        var sc=MyDate.getSeconds();
        var secondsCur=sc> 9 ? sc.toString() : "0" + sc.toString();

        var currentdate = year + "-" + month + "-" + strDate
                + " " + MyDate.getHours() + seperator2 + /*MyDate.getMinutes()*/minutesCur
                + seperator2 + /*MyDate.getSeconds()*/secondsCur;
        var currentdate2 = year + "." + month + "." + strDate;
        if(phone){
            currentdate = year.toString().substr(2)+"-"+ month + "-" + strDate
        }
        $("#timeQuantum .btn").removeClass("active");
        if(date==24) {
            $("#timeQuantum .btn:eq(0)").addClass("active");
            //获得昨天的日期
            var yesterday_miliseconds = MyDate.getTime() - 1000 * 60 * 60 * 24;
            var Yesterday = new Date();
            Yesterday.setTime(yesterday_miliseconds);

            var yesterday_year = Yesterday.getFullYear().toString();
            var month_temp = Yesterday.getMonth() + 1;
            var yesterday_month = month_temp > 9 ? month_temp.toString() : "0" + month_temp.toString();
            var d = Yesterday.getDate();
            var Day = d > 9 ? d.toString() : "0" + d.toString();
            var my=Yesterday.getMinutes();
            var minutesYes=my>9?my.toString():"0"+my.toString();
            var sy=Yesterday.getSeconds();
            var secondsYes=sy>9?sy.toString():"0"+sy.toString();

            var time = yesterday_year + "-" + yesterday_month + "-" + Day
                    + " " + Yesterday.getHours() + seperator2 + /*Yesterday.getMinutes()*/minutesYes + seperator2 +/* Yesterday.getSeconds()*/secondsYes;
            var time2 = yesterday_year + "." + yesterday_month + "." + Day;
            if(phone){
                time = yesterday_year.substr(2)+"-"+ yesterday_month + "-" + Day
            }
            $("#starttime").val(time);
            $(".time").text("微舆情全网数据 " + time2 + "至" + currentdate2);
            $("#allTimeTe").text("微舆情全网数据 " + time2 + "至" + currentdate2);
        }else if(date==72){
            $("#timeQuantum .btn:eq(1)").addClass("active");
            //获得三天的日期
            var three_miliseconds = MyDate.getTime() - 1000 * 3 *60 * 60 * 24;
            var threeDay = new Date();
            threeDay.setTime(three_miliseconds);

            var three_year = threeDay.getFullYear().toString();
            var month_temps = threeDay.getMonth() + 1;
            var three_month = month_temps > 9 ? month_temps.toString() : "0" + month_temps.toString();
            var d = threeDay.getDate();
            var Day = d > 9 ? d.toString() : "0" + d.toString();
            var mt=threeDay.getMinutes()
            var minutesThree=mt>9? mt.toString():"0"+ mt.toString();
            var st=threeDay.getSeconds();
            var secondsThree=st>9?st.toString():"0"+st.toString();

            var time3 = three_year + "-" + three_month + "-" + Day
                    + " " + threeDay.getHours() + seperator2 + /*threeDay.getMinutes()*/minutesThree + seperator2 + /*threeDay.getSeconds()*/secondsThree;
            var time32 = three_year + "." + three_month + "." + Day;
            if(phone){
                time3 = three_year.substr(2)+"-"+ yesterday_month + "-" + Day
            }
            $("#starttime").val(time3);
            $("#endtime").val(currentdate);
            $(".time").text("微舆情全网数据 " + time32 + "至" + currentdate2);
            $("#allTimeTe").text("微舆情全网数据 " + time32 + "至" + currentdate2);
        }else if(date==0){
            $("#timeQuantum .btn:eq(2)").addClass("active");
            if($("#userId").val()=="" && $("#userId").val()<=0){
                jumpLogin();
                return;
            }
            var showStarttime=$("#showStarttime").val();
            var showEndtime= $("#showEndtime").val();
            $("#starttime").val(showStarttime);
            $("#endtime").val(showEndtime);
            var d1 = new Date(showStarttime.replace(/\-/g, "\/"));
            var d2 = new Date(showEndtime.replace(/\-/g, "\/"));
            if(showStarttime!=""&&showEndtime!=""&&d1 >=d2){

            }else {
                $(".time").text("");
                var sta=$("#starttime").val();
                var stt=sta.toString().substr(0, 10);
                $(".time").text("微舆情全网数据 " + stt.replace(/-/g,".") + "至" + currentdate2);
            }
            $("#allTimeTe").text("");
            $("#allTimeTe").text("微舆情全网数据 " + stt.replace(/-/g,".") + "至" + currentdate2);
            $("#oneTime").text("数据时间：" + showStarttime + "至" + showEndtime + "   全网");
        }
    }

    //添加输入框
    function lookBox(){
        if($("#userId").val()==""){
            jumpLogin();return;
        }

        var curIds = "";
        var html='';
        $(".compUl> li").each(function(){
            curIds += $(this).attr("class");

        });
        if(curIds.indexOf('colorOne')==-1){
            html+='<li class="compLi comCtl colorOne" id="li_1">'+
            '<i onclick="delWord(1);"class="compClose">×</i>'+
            '<i onclick="addWord(1);" id="w1" title="添加组合词" class="addCompS">+</i>'+
            '<div id="kw1_1" class="comBorderL comBorderLOne">'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="title1_1"  onchange="onChangeInput(\'1_1\')" oninput="thinkKeywords(this,1)" placeholder="">'+
            '<input id="keyword1_1" type="hidden">'+
            '<input id="filterKeyword1_1" type="hidden">'+
            '</div>'+
            '<ul id="hotwords1" class="hotwords" style="display: none;width: 450px;">'+
            '</ul>'+
            '</div>'+
            '<div id="kw1_2" style="display: none;" class="comBorderL">'+
            '<span class="addicon">+</span>'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword1_2" placeholder="">'+
            '</div>'+
            '</div>'+
            '<div id="kw1_3" style="display: none;" class="comBorderL">'+
            '<span class="addicon">+</span>'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword1_3" placeholder="">'+
            '</div>'+
            '</div>'+
            '</li>';
            $(".compUl").append(html);
            count();
            return;
        }else if(curIds.indexOf('colorTwo')==-1){
            html+='<li class="compLi comCtl colorTwo" id="li_2">'+
            '<i onclick="delWord(2);"class="compClose">×</i>'+
            '<i onclick="addWord(2);" id="w2" title="添加组合词" class="addCompS">+</i>'+
            '<div id="kw2_1" class="comBorderL">'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="title2_1"  onchange="onChangeInput(\'2_1\')" oninput="thinkKeywords(this,2)" placeholder="">'+
            '<input id="keyword2_1" type="hidden">'+
            '<input id="filterKeyword2_1" type="hidden">'+
            '</div>'+
            '<ul id="hotwords2" class="hotwords" style="display: none;width: 450px;">'+
            '</ul>'+
            '</div>'+
            '<div id="kw2_2" style="display: none;" class="comBorderL">'+
            '<span class="addicon">+</span>'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword2_2" placeholder="">'+
            '</div>'+
            '</div>'+
            '<div id="kw2_3" style="display: none;" class="comBorderL">'+
            '<span class="addicon">+</span>'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword2_3" placeholder="">'+
            '</div>'+
            '</div>'+
            '</li>';
            $(".compUl").append(html);
            count();
            return;
        }else if(curIds.indexOf('colorThree')==-1){
            html+='<li class="compLi comCtl colorThree" id="li_3">'+
            '<i onclick="delWord(3);"class="compClose">×</i>'+
            '<i onclick="addWord(3);" id="w3" title="添加组合词" class="addCompS">+</i>'+
            '<div id="kw3_1" class="comBorderL">'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="title3_1"  onchange="onChangeInput(\'3_1\')" oninput="thinkKeywords(this,3)" placeholder="">'+
            '<input id="keyword3_1" type="hidden">'+
            '<input id="filterKeyword3_1" type="hidden">'+
            '</div>'+
            '<ul id="hotwords3" class="hotwords" style="display: none;width: 450px;">'+
            '</ul>'+
            '</div>'+
            '<div id="kw3_2" style="display: none;" class="comBorderL">'+
            '<span class="addicon">+</span>'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword3_2" placeholder="">'+
            '</div>'+
            '</div>'+
            '<div id="kw3_3" style="display: none;" class="comBorderL">'+
            '<span class="addicon">+</span>'+
            '<div class="inner">'+
            '<input name="word" class="comWord" maxlength="20" value="" autocomplete="off" id="keyword3_3" placeholder="">'+
            '</div>'+
            '</div>'+
            '</li>';
            $(".compUl").append(html);
            count();
            return;
        }
    }

    var tag = 0;

    //关键词搜索事件
    function goSearch(flag,date){

        if(tag == 1){
            showMsgInfo(0,"系统正在努力加载中，请不要频繁操作哟!",0);
            return;
        }
        $("#singleShare").val(0);
//         $("#shareCode,#title,#keywords,#filterKeyword,#ticket,#keyword").val("");
        if(flag==1){
            SetRQ(24);
            var kv = $("#search-keyword").val().replace(/、/g,"+").replace(/\s+/g,"+");
            if($.trim(kv)=="人名、企业名、品牌名或事件关键词"){
                showMsgInfo(0,"请输入搜索词!",0);
                return;
            }
            if($.trim(kv).length>20){
                showMsgInfo(0,"搜索词不得大于20个字!",0);
                return;
            }
            if($.trim(kv)==""||$.trim(kv)=="请输入您想查询的关键字"){
                showMsgInfo(0,"请输入你想搜索的词语",0);
                return ;
            }
            if($.trim(kv).length==1){
                showMsgInfo(0,"请至少输入2个字符",0);
                return ;
            }

            /* if($("#myHotReport:visible")||$("#subReport:visible")){
             reportJump();
             }*/
            $("#search-keyword").val(kv);
            $("#keywords,#keyword").val(kv);
            $("#title").val(kv);
            $("#filterKeyword").val("");
            $("#categoryId,#categoryType,#secondCategory,#categoryLevel").val("");
            $("#num").val(0);
            $.ajax({
                url:"/view/hotSearch/hotCheck.action",
                type:"post",
                data:{
                    "keyword" :$("#keywords").val().replace(/\s+/g,"+"),
                    "count" : 0
                },
                success:function(data){
                    if(data&&data.code=="0000"){
                        $("#setContrast").show();
                        $("#timeQuantum").show();
                        unset($("#title").val(),$("#keywords").val(),$("#filterKeyword").val());
                        beginQuery();
                    }else if(data){
                        showMsgInfo(0,data.message,0);
                    }
                }
            });
        }else{

            if(date){
                SetRQ(date);
            }else {
                SetRQ($("#date").val());
            }
            $("#dropdown_time").hide();

            var titles="";
            var keywords = "";
            var filterKeywords="";
            var keywordNum = 0;
            titles= $("#title").val();
            keywords= $("#keywords").val();
            filterKeywords= $("#filterKeyword").val();
//             if($.trim(keywords)==""){
//                 showMsgInfo(0,"请输入对比词语!",0);
//                 return;
//             }

            var flag=0;
            var arr = [];
            $("#inputWord li").each(function(){
                var $this = $(this);
                var input = $this.find("div.comBorderL div.inner input:eq(0)").val();
                if($.trim(input)!=""&&$.inArray(input,arr)!=-1){
                    showMsgInfo(0,"对不起,重复的内容对比会浪费您的使用次数,请修改后重新提交!",0);
                    flag=1;
                    return false;
                }else if($.trim(input)!=""){
                    arr.push(input);
                }
            });

            var keywordArr=[];
            keywordArr=keywords.split(",");
            var titleArr=[];
            titleArr=titles.split(",");
            var filterKeywordArr=[];
            filterKeywordArr=filterKeywords.split(",");

            for(var i=0;i<titleArr.length;i++){
                if($.trim(titleArr[i])!=""&&$.trim(titleArr[i]).length==1){
                    showMsgInfo(0,"请至少输入2个字符",0);
                    flag=1;
                    return false;
                }
            }
            if(flag==1){
                return;
            }
            if(flag == 3){
                var starttime = $("#starttime").val();
                var endtime = $("#endtime").val();
                var d1 = new Date(starttime.replace(/\-/g, "\/"));
                var d2 = new Date(endtime.replace(/\-/g, "\/"));
                if(starttime!=""&&endtime!=""&&d1 >=d2){
                    showMsgInfo(0,"开始时间不能大于或等于结束时间！",0);
                    return;
                }
                if(starttime.length<10||endtime.length<10){
                    showMsgInfo(0,"选择开始时间或者结束时间有误！",0);
                    return;
                }
            }

                $("#shareCode,#categoryId,#categoryType,#secondCategory,#categoryLevel").val("");
                $.ajax({
                    url: "/view/hotSearch/hotCheck.action",
                    type: "post",
                    data: {
                        "keyword": $("#keywords").val(),
                        "count" : 0
                    },
                    success: function (data) {
                        if (data && data.code == "0000") {
                            if (keywordNum < 2) {
                                beginQuery();

                            } else {
                                openBuyCommon(9, {
                                    packageCount: keywordNum,
                                    keywords: buyKeywords
                                })
                            }
                        } else if (data) {
                            showMsgInfo(0, data.message, 0);
                        }
                    }
                });
        }
    }

    function GetDateDiff(startDate,endDate)
    {
        var startTime = new Date(Date.parse(startDate.replace(/-/g,   "/"))).getTime();
        var endTime = new Date(Date.parse(endDate.replace(/-/g,   "/"))).getTime();
        var dates = Math.abs((startTime - endTime))/(1000*60*60*24);
        return  dates;
    }

    function onChangeInput(id){
        $("#filterKeyword"+id).val("");
        $("#keyword"+id).val($("#title"+id).val());
    }

    //联想词单击事件
    function hotSearch(title,keyword,filterKeyword,id){
        if('undefined'==keyword){
            keyword = "";
        }
        if('undefined'==filterKeyword){
            filterKeyword = "";
        }
        if(id==0){
            $("#date").val(24);
            $("#title,#search-keyword").val(title);
            $("#keywords,#keyword").val(keyword);
            $("#filterKeyword").val(filterKeyword);
            $("#categoryId,#categoryType,#secondCategory,#categoryLevel").val("");
            $("#num").val(0);
            if($("#myHotReport:visible")||$("#subReport:visible")){
                reportJump();
            }
            unset(title,keyword,filterKeyword);
            beginQuery();
        }else{
            if(id==1){
                $("#title1_1").val(title);
                $("#keyword1_1").val(keyword);
                $("#filterKeyword1_1").val(filterKeyword);
            }else if(id==2){
                $("#title2_1").val(title);
                $("#keyword2_1").val(keyword);
                $("#filterKeyword2_1").val(filterKeyword);
            }else if(id==3){
                $("#title3_1").val(title);
                $("#keyword3_1").val(keyword);
                $("#filterKeyword3_1").val(filterKeyword);
            }
        }
    }

    //点击的不是显示操作时将他隐藏
    document.onclick = function(event) {
        var e = event || window.event;
        var elem = e.srcElement || e.target;
        while (elem) {
            var reg = /^search/g;
            if (reg.test(elem.id)) {
                return;
            }
            if($(elem).hasClass("available")||$(elem).hasClass("dropdown-menu")||$(elem).hasClass("icon-angle-left")||$(elem).hasClass("icon-angle-right")){
                return;
            }
            elem = elem.parentNode;
        }
        //隐藏div的方法
        $("#keyWordLogs_ul").hide();
        $("#hotwords").hide();
        $("#hotwords1").hide();
        $("#hotwords2").hide();
        $("#hotwords3").hide();
        $("#dropdown_time").hide();
    };

    //热度查询按钮回车键事件
    function enterClick(event){
        event = event || window.event;
        if(event.keyCode==13){
            goSearch(1);
        }
    }

    var timeout="";

    //联想事件
    function thinkKeywords(obj,id){
        $("#keyWordLogs_ul").hide();
        var txt = $(obj).val();
        if(txt==""){
            return;
        }
        if(timeout!=""){
            window.clearTimeout(timeout);
        }
        timeout = setTimeout(function(){beginThink(txt,id)},1000);
    }

    function beginThink(txt,id){
        var data = {"thinkKeyword":txt};
        $.ajax({
            url : "/view/hotSearch/thinkKeywords.action",
            type : "post",
            data:data,
            success : function(data){
                if(data&&data instanceof Array){
                    data = data[0];
                    if(data==null){
                        $("#hotwords").hide();
                    }
                    var html = '';
                    $.each(data,function(){
                        html += '<li style="cursor:pointer;" onclick="hotSearch(\''+this.title+'\',\''+this.keyword+'\',\''+this.filterKeyword+'\',\''+id+'\')"><a href="javascript:void(0)"><h1>'+this.title+'</h1></a>';
                        if(this.type==1){
                            html += '<em>来自地域';
                        }else if(this.type==2){
                            html += '<em>来自股票';
                        }else if(this.type==3){
                            html += '<em>来自明星';
                        }else if(this.type==4){
                            html += '<em>来自行业';
                        }else if(this.type==5){
                            html += '<em>来自品牌';
                        }else if(this.type==6){
                            html += '<em>来自人物';
                        }else if(this.type==7){
                            html += '<em>来自景区';
                        }else if(this.type==8){
                            html += '<em>来自地域';
                        }else if(this.type==9){
                            html += '<em>来自汽车';
                        }else if(this.type==10){
                            html += '<em>来自手机';
                        }else if(this.type==11){
                            html += '<em>来自美妆';
                        }else if(this.type==12){
                            html += '<em>来自金融';
                        }else if(this.type==13){
                            html += '<em>来自电脑';
                        }else if(this.type==14){
                            html += '<em>来自家电';
                        }else if(this.type==15){
                            html += '<em>来自食品';
                        }else if(this.type==16){
                            html += '<em>来自教育';
                        }
                        if(!this.category||this.category==""||this.category=="undefined"){
                            html += '</em></li>';
                        }else{
                            html += '（'+this.category+'）</em></li>';
                        }

                    });
                    if(id==0){
                        $("#hotwords").html(html);
                        $("#hotwords").show();
                    }else if(id==1){
                        $("#hotwords1").html(html);
                        $("#hotwords1").show();
                        $("#keyword1_1").val(txt);
                        $("#filterKeyword1_1").val("");
                    }else if(id==2){
                        $("#hotwords2").html(html);
                        $("#hotwords2").show();
                        $("#keyword2_1").val(txt);
                        $("#filterKeyword2_1").val("");
                    }else if(id==3){
                        $("#hotwords3").html(html);
                        $("#hotwords3").show();
                        $("#keyword3_1").val(txt);
                        $("#filterKeyword3_1").val("");
                    }
                }
            }
        })
    }

    function history() {
        $("#hotwords").hide();
        $.ajax({
            url: "/keyWordLogs.action?" + new Date(),
            type: "get",
            dataType: "json",
            success: function (data) {
                $("#history_search").find("ul").eq(0).find("li:gt(0)").remove();
                var keyWordLogs = $("#history_search").find("ul").eq(0).html();
                if (data != null) {
                    var len = data.size;
                    var keyWord = "";
                    for (var i = 0; i < len; i++) {
                        var vl = data.logs["keyWord" + i];
                        keyWord += "<li style='cursor:pointer;' onclick='ajaxClickEvl(this)'><h1>" + vl + "</h1></li>";
                    }
                    keyWordLogs += keyWord;
                    $("#keyWordLogs_ul").css({"display": "block"}).html(keyWordLogs);

                    if (len != 0) {
                        $("#history_search").css({"display": "block"});
                    }
                }
            }, error: function (data) {
            }
        });
    };

    //隐藏或显示 添加对比词语 按钮
    function count(){
        /*if($(".page-layout-content .compUl li").length>2){
         $(".addComp").hide();
         }else{
         $(".addComp").show();
         }*/
        if($(".page-layout-content .compUl li:visible").length<3){
            $(".addComp").show();
        }else{
            $(".addComp").hide();
        }
    }

    //未登录状态跳登录
    function jumpLogin(){
        var data = {"notLoginOperateRecord.operateType":15,"notLoginOperateRecord.name":$("#title").val(),"notLoginOperateRecord.keyword":$("#keyword").val(),"notLoginOperateRecord.filterKeyword":$("#filterKeyword").val()}
        $.ajax({
            url : "/view/hotSearch/recordOperateInfo.action",
            type : "post",
            data : data,
            success : function(){$("#login").click()}
        })
    }

    var jquery = $;
    var loaders = '<i class="icon-reload-a fa-spin"></i>';
    var loaders2 = '<i class=" fa-spin"></i>';
    function chartloading(id){
//      var parent = $("#"+id).parent();
//      $("#"+id).remove();
//      var heigth = 400;
//      if(id == "container2"){
//          parent.html('<div id="'+id+'" style="width: 100%;" class="chart_shuiyin"></div>');
//      }else{
//          parent.html('<div id="'+id+'" style="width: 100%; height:'+heigth+'px;" class="chart_shuiyin"></div>');
//      }
//      if(id != 'container5') {
//		if(id=="collapse33" || id="collapse6"){
//			parent.html('<div id="'+id+'" style="width: 100%; height:'+heigth+'px;" class="chart_shuiyin"></div>');
//		}
         jquery('#' + id).loader('show', loaders);
         if("counter"==id){
	            jquery('.' + id).loader('show', loaders);
         }
//      }
 }

    function chartloadingTab(id){
    	if(id == "counter"){
	        jquery('.' + id).loader('show',loaders);
    	}else if(id == "selectTimeWait"){
    		jquery('#' + id).loader('show',loaders2);
    	}else if(id == "doubleSelectId"){
    		jquery('#' + id).loader('show',loaders2);
    	}else if(id == "timeToggle2"){
    		jquery('#' + id).loader('show',loaders2);
    	}else{
	        jquery('#' + id).loader('show',loaders);
    	}
    }

    function chartloadingTabCluster(id){
    	var parent = $("#"+id).parent();
        $("#"+id).remove();
        var heigth = 400;
        parent.html('<div id="'+id+'" style="width: 100%; height:'+heigth+'px;" class="chart_shuiyin"></div>');
//         $("#"+id).find("tr").remove();
//         $("#"+id).find("div").remove();
//         if(id == 'clusterList') {
            jquery('#' + id).loader('show', loaders);
//         }
    }

    //热度指数  和   热度值。。
    function goHotWorth(keywords,date,title,filterKeyword,starttime,endtime,ct){
    	if("2"==ct){
	        var date1 = $("#date").val();
            if(date1 && date1 == 24){
               $("#timeEqOneDayId").show();
               $("#timeEqThreeDayId").hide();
            }else{
               $("#timeEqOneDayId").hide();
               $("#timeEqThreeDayId").show();
            }
            chartloading("counter");//同比。。
    	}
    	$("#reDuName").html(title);
        EChartsDwr.getHotTableAndLine4(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),ct,worthCallback);
    }
	var hotWorthData;
    function worthCallback(data){
    	hotWorthData=data;
    	jquery('#timeToggle2').loader('hide',loaders2);
    	jquery('#doubleSelectId').loader('hide',loaders2);
    	jquery('#selectTimeWait').loader('hide',loaders2);
    	jquery('#container1').loader('hide',loaders);
    	jquery('#degreeHeatChart').loader('hide',loaders);
    	jquery('.counter').loader('hide',loaders);
		$("#labelChangeClass1").attr("class","btn btn-sm active");
		$("#labelChangeClass2").attr("class","btn btn-sm");
    	var ct = data[2];
    	if("2"==ct){

        tag = 0;
        var date = $("#date").val();
        if ((data.length==1&&data[0] == null) || (data.length==1&&data[0] == "")) {
            $("#container0").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
        } else {
            var html="";
            var names=$("#title").val();
            var name="";
            var dataTable=data[0];
            if(dataTable&&dataTable.length>0) {
                for (var i = 0; i < dataTable.length; i++) {
                    var obj = eval('(' + dataTable[i] + ')');
                    if (obj != null || obj != "") {
                        name = names.split(",")[i];
                        $("#reDuName").html(name);
                        if (name.length > 10) {
                            name = name.substring(0, 10) + "...";
                        }
                        var cus = "";
                        if (obj.ratioHotCustom < 0.01) {
                            cus = "< 0.01";
                        } else {
                            cus = obj.ratioHotCustom;
                        }

                        html += "<tr><td>";
                        if (i == 0) {
                            html += "<font style='color:#3FAD7E'>";
                            $("#hotCus").val(cus);
                        } else if (i == 1) {
                            html += "<font style='color:#758DC4'>";
                        } else if (i == 2) {
                            html += "<font style='color:#0e7dc0'>";
                        }

                        html += name + "</font></td><td>" + cus + "</td>";
                        if(date && date == 24){
                            html += "<td>" + obj.ratioCustom + "%";
                            var ratCus = "" + obj.ratioCustom;
                            if (ratCus.indexOf("-") != -1) {

                                html += "<i class='icon-arrow-down f_c4'>";
                            } else if (ratCus.length == 1 && ratCus.substring(0, 1) == "0") {

                            } else {
                                html += "<i class='icon-arrow-up f_c2'>";
                            }
                            html += "</td>";
                            html += "<td>" + obj.differenceCustom;
                            var diffCus = "" + obj.differenceCustom;
                            if (diffCus.indexOf("-") != -1) {
                                html += "<i class='icon-arrow-down f_c4'>";

                            } else if (diffCus.length == 1 && diffCus.substring(0, 1) == "0") {

                            } else {
                                html += "<i class='icon-arrow-up f_c2'>";
                            }
                            html += "</td>";
                        }else {
                            html += "<td>" + obj.weiboNum + "</td>";
                            html += "<td>" + obj.weixinNum + "</td>";
                        }
                        html += "<td>" + obj.numberCustom + "</td>";
                        html += "</tr>";
                    }
                }

            	jquery('#degreeHeatChart').loader('hide',loaders);
            	jquery('.counter').loader('hide',loaders);
            	$("#rdtbID").html(obj.ratioCustom+"%");
                $("#rdbhID").html(obj.differenceCustom+"");
                $("#wbxxlID").html(commafy(obj.weiboNum));
                $("#qwxxlID").html(commafy(obj.numberCustom)+"");
                $("#wbxxlID2").html(commafy(obj.weiboNum));
                $("#qwxxlID2").html(commafy(obj.numberCustom)+"");
                $("#weixinId").html(commafy(obj.weixinNum)+"");
                $("#hotCus").val(obj.ratioHotCustom);
                //热度值
                degreeHeatChartFun("degreeHeatChart",obj.ratioHotCustom+"");
            }else{
                $("#container1").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                $("#degreeHeatChart").html("<div align=\"center\" style=\"padding-top:50px;margin-top: 90px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                $(".counter").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            }
        }
    	}

        var c1 = document.getElementById("container1");
        if (!data[1] || data[1].length == 0) {
            c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
            return false;
        } else {
            var dataLine = eval(data[1]);
            if (dataLine[0].data == null || dataLine[0].data.length == 0) {
                c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
                return;
            } else {
                var data1 = dataLine[0];
                var alertMsg = "从热度指数的变化趋势来看，";
                for (var i = 0; i < data1.data.length; i++) {
                    var listData = data1.data;
                    var subMsg = listData[i].name;
                    var topTime = listData[i]["label"].name;
                    topTime = topTime.split(":")[0];
                    topTime=topTime.replace("-","月");
                    topTime=topTime.replace(" ","日 ");
                    var topValue = listData[i]["label"].value;
                    if(i==0){
                        alertMsg += "<font style='color:#3FAD7E'>";
                    }
                    if(i==1){
                        alertMsg += "<font style='color:#758DC4'>";
                    }
                    if(i==2){
                        alertMsg += "<font style='color:#0e7dc0'>";
                    }
                    alertMsg += subMsg + '</font>的热度在' + topTime + '时达到了<font class="f_c2">' + commafy(topValue) + '</font>的峰值。';
                }
                alertMsg+='';
                var areaSty= {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: 'rgba(241, 141, 1, 0.5)'
                        }, {
                            offset: 1,
                            color: 'rgba(241, 141, 1, 0)'
                        }], false),
                        shadowColor: 'rgba(0, 0, 0, 0.1)',
                        shadowBlur: 10
                    }
                };
                dataLine[0].data[0]["areaStyle"]=areaSty;
                jquery('#collapse2').loader('hide',loaders);
                $("#container1_msg").html(alertMsg);
                var _chartColumn1 = LineChartHeatNetwork(dataLine,"container1",1);
            }
        }


    }

    function LineChartHeatNetwork(data,dom,type){
//         $("#container1").empty();
        var tooltip = "";
        var chart1 = echarts.init(document.getElementById(dom));
        if(type == 2){
            var par1 = ['E','D','C','B','A'];
            var par2 = ['D','C','B','A'];
            var par3 = ['C','B','A'];
            var par4 = ['B','A'];
            var par5 = ['A'];
            var yAxisArray = [];
            $.each(data[0].data, function(i,n) {
                var mar = data[0].data[i].markPoint.data;
                for (var j = 0; j < mar.length; j++) {
                    yAxisArray[j] = mar[j].yAxis;
                }
                yAxisArray.sort();
                data[0].data[i].markPoint.itemStyle = {
                    normal: {
                        label: {
                            show: true,
                            formatter: function (param) {
                                for (var k = 0; k < yAxisArray.length; k++) {
                                    if (yAxisArray[k] == param.data.yAxis) {
                                        if (yAxisArray.length > 4) {
                                            return par1[k];
                                        } else if (yAxisArray.length > 3) {
                                            return par2[k];
                                        } else if (yAxisArray.length > 2) {
                                            return par3[k];
                                        } else if (yAxisArray.length > 1) {
                                            return par4[k];
                                        } else {
                                            return par5[k];
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            });

            tooltip = {
                trigger: 'axis',
                formatter: function (params) {
                    if(params.componentType  == 'markPoint') {
                        return params.seriesName + '<br/>' + params.name;
                    }else{
                        return params[0].seriesName + '<br/>热度指数：' + params[0].value + "<br/>日期：" + params[0].name;
                    }
                }
            }
        }else{
            tooltip = {
                trigger: 'axis'
            }
        }

        var option = {
            tooltip : tooltip,
            toolbox: {
                orient:'vertical',
                feature: {
//                     restore : {show: true},
                    saveAsImage : {
                        show: true,
                        name:data[0].title
                    }
                }
            },
            legend: {
                data: data[0].legend
            },
            color:['#f18d01','#758DC4','#0e7dc0'],
            grid: {
                left: '2%',
                right: '5%',
                /* top:'6%',
                 bottom: '15%',*/
                containLabel: true
            },
            xAxis : [
                {
                    type : 'category',
                    axisLine:{//坐标轴轴线 默认 true,
                        show: false
                    },
                    axisTick:{//坐标轴刻度
                        show: false,
                        lineStyle:{
                            color:'#888',
                            width: 1,
                            type: 'solid'
                        }
                    },
                    axisLabel:{//坐标轴刻度标签
                        show: true,
                        //rotate: 30,  //旋转角度
                        textStyle:{
                            color:'#888'
                        }
                    },
                    boundaryGap : false,
                    data : data[0].datetime
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    axisLine:{//坐标轴轴线 默认 true,
                        show: false
                    },
                    axisTick:{//坐标轴刻度
                        show: false
                    },
                    axisLabel:{//坐标轴刻度标签
                        show: true,
                        //rotate: 30,  //旋转角度
                        textStyle:{
                            color:'#888'
                        },
                        formatter:function(v){
                            if(v>=1000){
                                return (v/1000)+"k";
                            }else{
                                return v;
                            }
                        }
                    },
                }
            ],
            "dataZoom": [{
                "show": true,
                "height": 25,
                "xAxisIndex": [
                    0
                ],
                bottom: 5,
                "start": 0,
                "end": 100,
                handleIcon: 'path://M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z',
                handleSize: '100%',
                handleStyle:{
                    color:"#d3dee5",
                    borderColor: 'rgba(0,0,0,.3)'
                },
                showDetail: false,
                textStyle:{
                    color:"#000"},
                borderColor:"#90979c"


            }, {
                "type": "inside",
                //"zoomLock": true,
                "show": true,
                "height": 15,
                "start": 1,
                "end": 35
            }],
            calculable : false,
            series :data[0].data
        };
        chart1.setOption(option);
        window.onresize = chart1.resize;
    }

    //相关词
    function goRelatedChart(keywords,date,title,filterKeyword,starttime,endtime){
    	$("#containerName").html(title);
    	EChartsDwr.goMoreWords(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),relatedCallBackNew);
    }

//     function relatedCallBack(data){
//         var c2 = document.getElementById("container2");
//         var c3 = document.getElementById("container6");
//         var mapTop10 = document.getElementById("mapTop10");
//         $("#container6").parent().removeClass().addClass("col-md-6");
//         $("#mapTop10").removeClass().addClass("col-md-6");
//         if (data[0].length==0 || data[0]==null){

//             return;
//         }else{
//             var names=$("#title").val();
//             var allHtml = "";
//             var subMsg = "";
//             for (var i = 0; i < data[0].length; i++) {
//                 var name = names.split(",")[i];
//                 name=name.length>10?name.substring(0,10)+"...":name;
//                 if (data[0].length == 1) {
//                     /*allHtml += '<div class="col-md-3"></div><div class="col-md-6"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div class="pading10" style="height: 320px;width: 100%;" id="container2_'+i+'"></div></div></div><div class="col-md-3"></div>';*/
//                     allHtml += '<div class="col-md-3"></div>';
//                     allHtml += '<div class="col-md-6"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div style="height: 360px;width: 100%;" id="container2_'+i+'"></div></div></div>';
//                     allHtml += '<div class="col-md-3"></div>';
//                 }
//                 if (data[0].length== 2) {
//                     if (i == 0) {
//                         allHtml += '<div class="col-md-6"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div class="pading10" style="height: 360px;width: 100%;" id="container2_'+i+'"></div></div></div>';
//                     }
//                     if (i == 1) {
//                         allHtml += '<div class="col-md-6"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div class="pading10" style="height: 360px;width: 100%;" id="container2_'+i+'"></div></div></div>';
//                     }
//                 }

//                 if (data[0].length == 3) {
//                     if (i == 0) {
//                         allHtml += '<div class="col-md-4"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div class="pading10" style="height: 360px;width=100%;" id="container2_'+i+'"></div></div></div>';
//                     }
//                     if (i == 1) {
//                         allHtml += '<div class="col-md-4"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div class="pading10" style="height: 360px;width: 100%;" id="container2_'+i+'"></div></div></div>';
//                     }
//                     if (i == 2) {
//                         allHtml += '<div class="col-md-4"><div class="cy_tit"><h1>'+name+'</h1></div> <div class="chart-bady"><div class="pading10" style="height: 360px;width: 100%;" id="container2_'+i+'"></div></div></div>';
//                     }
//                 }

//                 subMsg += "在与";

//                 if (i == 0) {
//                     subMsg += "<font style='color: #3FAD7E'>";
//                 }
//                 if (i == 1) {
//                     subMsg += "而<font style='color:#758DC4'>";
//                 }
//                 if (i == 2) {
//                     subMsg += "而<font style='color: #0e7dc0'>";
//                 }

//                 if(data[0][i]!=""&&data[0][i]!=null) {
//                     var data1 = eval(data[0][i]);
//                     for(var d=0;d<data1.length;d++){
//                         if(d==0) {
//                             subMsg += name + "</font>相关的全部信息中， 被提及频次最高的词语分别为" + data1[d].name + "</font>";
//                         }else if(d==1){
//                             subMsg +="、" + data1[d].name + "</font>";
//                         }else if(d==2){
//                             subMsg +="和" + data1[d].name + "</font>";
//                         }
//                         if(d==(data1.length-1)){
//                             subMsg +="。";
//                         }
//                     }
//                 }else{
//                     subMsg += name +"</font>的报道暂无数据。";
//                 }
//             }
//             c2.innerHTML = allHtml;
//             $("#container2_msg").html(subMsg);
//             for (var i = 0; i <data[0].length; i++) {
//                 if(data[0][i]==null||data[0][i]==""){
//                     var c = document.getElementById("container2_" + i);

//                     continue;
//                 }

//                 var _chartColumn2 = cloudChart(eval(data[0][i]),data[0].length, "container2_" + i,1);
//             }
//         }

//         if (data[1].length==0){

//             return;
//         }else{
//             var dataRelate=data[1];
//             if(dataRelate==""||dataRelate==null||dataRelate.length<1){

//                 return;
//             }else {
//                 var obj = eval("("+data[1][dataRelate.length-1]+")");
//                 if(obj==""||obj==null){


//                     return;
//                 }
//                 var mapHtml = "";
//                 var relHtml = "";
//                 mapHtml+="<div class='row clearfix'><div id='relatedWordsTable'>";
//                 for(var j=0;j<dataRelate.length-1;j++) {
//                     var nameRel = names.split(",")[j];
//                     if(nameRel.length>10){
//                         nameRel=nameRel.substring(0,10)+"...";
//                     }
//                     relHtml += "通过对与";
//                     if (j == 0) {
//                         relHtml += "<font style=\"color:#3FAD7E\">";
//                     }
//                     if (j == 1) {
//                         relHtml += "<font style=\"color:#758DC4\">";
//                     }
//                     if (j == 2) {
//                         relHtml += "<font style=\"color:#0e7dc0\">";
//                     }
//                     relHtml+=nameRel+"</font>相关的信息进行分析后可看出，与其核心词";

//                     var obj1 = eval('(' + dataRelate[j] + ')');
//                     if(obj1) {
//                         if (dataRelate.length == 2) {
//                             //mapHtml += "<div class='col-md-6'>";
//                         }
//                         if (dataRelate.length == 3) {
//                             mapHtml += "<div class='col-md-6'>";
//                         }
//                         if (dataRelate.length == 4) {
//                             mapHtml += "<div class='col-md-4'>";
//                         }
//                         mapHtml += "<table border='0' cellspacing='0' cellpadding='0' class='table table2 table4' id='relatedWords' width='100%'>";

//                         for (var i = 0; i < obj1.length; i++) {

//                             if (i == 0) {
//                                 if (j == 0) {
//                                     mapHtml += "<thead><tr><th colspan='3' class='kw_th' style='background: #3FAD7E;color: white;'>" + nameRel + "</th></tr>";
//                                     mapHtml += "<th width='' style='color: #3FAD7E;'>核心词</th>";
//                                     mapHtml += "<th width='33%' style='color: #3FAD7E;'>关联词</th>";
//                                     mapHtml += "<th width='33%' style='color: #3FAD7E;'>关联度</th>";
//                                     mapHtml += "</tr></thead>";
//                                 } else if (j == 1) {
//                                     mapHtml += "<thead><tr><th colspan='3' class='kw_th' style='background: #758DC4;color: white;'>" + nameRel + "</th></tr>";
//                                     mapHtml += "<th width='' style='color: #758DC4;'>核心词</th>";
//                                     mapHtml += "<th width='33%' style='color: #758DC4;'>关联词</th>";
//                                     mapHtml += "<th width='33%' style='color: #758DC4;'>关联度</th>";
//                                     mapHtml += "</tr></thead>";
//                                 } else if (j == 2) {
//                                     mapHtml += "<thead><tr><th colspan='3' class='kw_th' style='background: #0e7dc0;color: white;'>" + nameRel + "</th></tr>";
//                                     mapHtml += "<th width='' style='color: #0e7dc0;'>核心词</th>";
//                                     mapHtml += "<th width='33%' style='color: #0e7dc0;'>关联词</th>";
//                                     mapHtml += "<th width='33%' style='color: #0e7dc0;'>关联度</th>";
//                                     mapHtml += "</tr></thead>";
//                                 }
//                             }
//                             mapHtml += "<tr>";
//                             if (i == 0) {
//                                 mapHtml += "<td rowspan='"+(obj1.length)+"' style='background-color: #fff;'>" + obj1[i].relatedName + "</td>";
//                                 relHtml += "" + obj1[i].relatedName + "</font>关联度最高的词语为";
//                             } else {

//                                 if (i > 0 && i < 4) {
//                                     relHtml += "" + obj1[i].relatedName + "(" + obj1[i].relatedPer + ")";
//                                     if (i < 2) {
//                                         relHtml += "、";
//                                     } else if (i > 0 && i < 3) {
//                                         relHtml += "和";
//                                     } else {
//                                         relHtml += "。";
//                                     }
//                                 }

//                                 mapHtml += "<td style='border-right: 1px dashed #E8E8E8;'>" + obj1[i].relatedName + "</td>";
//                                 var per = "";
//                                 if (obj1[i].relatedPer < 0.01) {
//                                     per = "< 0.01%";
//                                 } else {
//                                     per = obj1[i].relatedPer;
//                                 }
//                                 mapHtml += "<td>" + per + "</td>";
//                                 mapHtml += "</tr>";
//                             }

//                         }
//                         mapHtml += "</table>";
//                         if (dataRelate.length != 2) {
//                             mapHtml += "</div>";
//                         }
//                     }

//                 }
//                 mapHtml+="</div></div>";
//                 $("#mapTop10").html(mapHtml);
//                 $("#container6_msg").html(relHtml);
//                 chordChart(obj, "container6");
//             }
//         }
//     }

    var url = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbEAAAEmCAYAAADss65KAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3BpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NjhlYWU0MC0wYmI0LTRhYWItODBlYy1iNGIxM2RkOTc5NmEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REFENEIzMEIxREE0MTFFN0FGM0FCRTE2NjhGMjAzQzYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REFENEIzMEExREE0MTFFN0FGM0FCRTE2NjhGMjAzQzYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4QUVDM0JGQTFEMDYxMUU3ODhCMUExMEQwN0Y2OEQ1RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4QUVDM0JGQjFEMDYxMUU3ODhCMUExMEQwN0Y2OEQ1RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqXMrRYAABNMSURBVHja7N1rrGVleQfwdWaGGYaLWJhRYLhURm1FvCA2ClqxJo21aQejNIY2tfOhNU1pm06Tkhiahg+maTHxg2lLQ1sofpBIadRpSyJpKWq5aCoIyHgpqJRrGWYEyjAzzOX0eVn71MNwztlr773u6/dLnhz0wJ4571pr/8+z33e9a25+fj4DgC5aZQgAEGIAIMQAQIgB0HNrxv0Lc3NzRgm6Z2vUe6J+KurUqI1R66JWp8u6hNefH9WhqGejnox6OOr+qH+IusMhYOaTrMjCw/QvzVJA494fdV/U86NQmW9BHY46EPVU1E1RJzpMlJ0/L2aQkIJOOTvq8qhHWxRYk1QKtnuiLhVslBFyOjFovytGoXWwg6E1rvZHfS9qi8MspHRi0B9bo57rYWiN+wjysVG3CTox6Jgrs3wOaV69GGgPRH3MaaETW6nmxgWR1YlQqTQv9K2ok7NyVg32UZr7+2bU2w3F8EJunFVFXkQnBqVLHUaaD9oVdYoAW1G6LeC8UYe2O+pcQzKMTqy+FwGK+mrWzVWFbVwQcp3TadghV+jjxHF83AiFfDfqdTqu0qW5s89F/aqh6GZItaOdA5Zzj66ptoUgOjOdmE4MSrIj6g2GoZHO7PNRFxsKnZhODCZ3zeiNVHfU/M4gbqDWienEoKBtWX6f1xpD0SrPRF0w6ozpYSfmPjGYXbpB+STD0Gr3Rr3FMPQv5NwnBtNLq+LmBVgnvDnLb20wV9aykJo1X3RiMLnNWb7LxtGGopP+O+pMw6AT04kxROnZWA8IsE47Q1emE4MhSrvKH2sYeiV11G8yDDox6LMrsnzZvADrn3OyfDn+JkPRzU5MSMHK7svcczWUutzp3q2Qc58YrGxf1DrDMCjfzjyUs9aQmpU5MXi5C6P+PbNZ71A9n/nouDMhZ04MXurTUbcKsEE7JstXL55oKKoPqVnzZWyIpU5spYIeuS3q9wwDo/fG9MDSbYaiOmXkizkxyD0adaphYAmfifoNw1BNJzZzEJoTg+x/o44zDKwgzZG+zzC0L+R0YgydFYgU9c2ocw2DTgza4oWoowwDE/hB1FmGQScGTUu7NHj2F9OwgbBODAQYnfZI1OmGQScGAoyu8tGiTgxqtT9qrWGgRHbB14lBLfZk+U4MULbbo95lGJrpxOzYwRDsFGBU6IKo6wzDdE3QrPkydm7Ax4103I6oDYaBin00y+fIrjAU9XZi5sTos5uiPmAYqNHbou42DPWFnDkx+mpr1LWGgbrfd7MC0zToxGAl6REauwwDDUmrYI82DDoxmJZ7wWiam6Fr6sSsTqRvdgowWuC0qKsNQ/X5ohOjTz4bdYlhoGVh9qhhqK4TMydGX6RHZNxlGGiZQz4ZqDbkdGL06c3CqjDa6PHMU8Mr68TMidEHDwowWuyUqMsNQzX5ohOj6y6N+gvDQAecFLXbMJTbiZkTo+sOp9PUMNABz0UdbxjKDTl7Jw7blix/jMTmqJ/J8vta1ketzvKP54oc3HSCpPmodG9W2in+O1m+7c53s3x37yq34HlMgNEhx2X5svuPGYryOrEXX2SlojfeH/W1qKdHgXN4FEBVV/pz9mX5MuPPl/jzbK3p769U2UVJ+ZTKnFh/pY5qe9R7svY9CDKddM9E/WXUH0/5GlYj0lVPRW00DDoxXu7KLN/upq4uq6x6IeqOrPiNyjv8Nq86Xpd6u9KJkbsw6h+zfNPbPhyM1GHdl+U3Ly/l/Cyfa4MuS79orhZS7hMbqhRYN47e8G/N8qW7fTkY6cJ+6+i31b1Rlx3x/ZsdfnogvfduH/oguE9seFIX8sVseJ+np99avx71z1GfcBrQp/dxndiMA2gJfWfC65bMM4qgb9Kq3dMMw/Qht6rIi1j40ZiLs/wGydsFGPTSptEvqYMNqVnzRSfWTmnO66EsvzkS6Ld0u8krDYNOrC++FbVLgMFgnJAtvxpXJ6YT64xPR/1uZhslGKI9fnGdrhOzOrEdnh79NgYM10XZwJbdW53YfZ+K2mYYAN2YTqxrdkZtMAzAIu+N+rKQ0om1WZrA/c/M5rXAyz0edaph0Im11XVRHzUMwEpvq0JKJ9ZGaXf5TYYBGOPObMA3QOvE2iltZGvHDaDQe3c2kOkGu9i3X9p545AAAybpDbJ86qH/P6hd7Fvt7CzffcMAAZPaP4Rffs2JtVdagXiXYQBm8NqoB4c8APZObMYlAgwowV8PIaTsndguF2b5k5YBZpUeBrtaJzZjiI19ASG3YHPUA4YBKNEbo3YMOaR0YvVIqxCfyiziAMqVtqd7lU5MJ1a1tIzeNlJA6e/jfX5vcZ9YO+wTYEBF0ptsb5904T6x5j2a2awTqNZ/Rb1eJ7a0NUJqajcKMKAGZ/W5E5s15HRi09kS9UXXFlCT07L8kx+d2KQhphNbUrp/w8AAdbkh6iND+6F1YtXYHfUTrimgRmkB2Xqd2MuZE5vMNQIMaEAvNwM2J1avdEPzLtcS0JBfyfIFZTqxSUJMJ/b/nos61jAADentUvtZQm7NrC8ykJC7WoABDTtjiCGlE5tdmkzdk1mNCDT8np8NbHcgzxMrxw4BBrRAeh/a0reQmjVf7J24sk1RP+naAVrig71KZXsnVm5v1tOlrUAnPRj12j51YrNyn9jytgkwoGV6tbjDfWLV2h+11jUDtKl5yXq0uEMnVp3LBBjQxuZFJ6YT04UBXfbGLF81rRPLrE5cytkCDGixP+tTJ2Z1YvlsLwW02VNRG3ViOXNiL3W+AANa7vg+dWKzhpxO7KW+H/Ua1wjQYumhvKt1YgVDbGCdmCc2A51oYobwQ9rFfjLbBBiATqyrLOgAuuKiqO1Czi72iwkwoCve3ZeQmjVfrE7MfdY1AXTIWX34IcpYnWhOLPch1wTQIa/uSyc2K51Y/uTmda4JoENO0onpxBb8uesB6JhX6MR0Ygsucj0AHdOLT490YuU4zfUAdO39XyemE0vSfNgq1wPQMWv68EPoxGb3664FQCfW3U5s6Dt2PBR1husB6Jg9Ucf1/YfUiY23ybUA0N1ObOhzYqudRgDNMCemCwMG2sToxHRif+o6ADrqkE5MJ/Yu1wGATqyrNjiFgI46qBPTia13HQAdtV8nphNb4zoAOmqPTkwnNuc6ADrqRzqxYXdim4UY0GFP68SG3Ym91jUAdNj3dWLD7sTOdA0AHfZvOrFhd2IbXQNAh92oExt2J2Z5PYBOrLMht9bpA3S1genND6ITm9rxrgOgow725QfRiQEMzzM6MZ3YAdcB0FF36cR0YvtcB0BHbdOJ/diqIkm5UnXU864DoKN+qU+d2Kz5MjdrEnY0yM6Out+1AHS5kYl6Nupfoz4TtX2IndjcABdubIm6LuqVrgGgRw5H7Y76o6i/70VKFwi5oXRiqfP6p6jXZDb+BYbh8agPR92hE+uu26LeEbXa+QwMuEO7N+qCqL06sfaH3IlZvsPzCc5dgJdID9P8+bZ0Z1YnvtTW0W8ZuwQYwJKOjbo96oWsBUv1rU7MXRH18cx+iACTSltYXRX1+13txLo8J3buqCVe5zwEmDnM0iKQVi3T7+ucWHqMyg+iXu28AyhV2pcxLQDZoROrxm2jAQagOt/O8luTWt+JrSryIitVTdJHhwcEGEAt3hB1KOriqkNq1nzpQid2T9SbnVMAjfhhlm8U0cpOrM1zYpujvpMV2GkfgEqlG6bfF/XlukNqnLbeJ3ZN1AMCDKAVUlbcGvWlMl+0r/eJPRm10TkD0EppBWMpG6j3cXXiAd0XQOuljxePyyrei7FLqxPTCph5AQbQCSk70sOFL501pPqwOjFtefLbzgmATroh6iNNdWJNz4ndFPUB5wBAp90ZdX4VIdXmTsz9XwD9kbYDPGsondh9Uec45gC9kp7luLnvndj3ol7nWAP00hNRp/S1E7s76q2OMYCOrGud2C1RP+fYAgzCN6LeXnUnVtd9YlcJMIBBOS/qxqrzpY69E9PNcO4DAxie9LToyyrMl8rnxNJTmJ93HAEG7bSoR5fqxGZV9ZzYoSLdHgC9lvZaTBu7757kP2p6deLTUSc4dgCEPVm+aXCpnVhVc2LbBRgAixwbdVsJ+TJZiE2xemRr1C87XgAc4YJs0c73bd3F3jwYAMv2RkUzokiQrZn1RY4IuYcEGAArxUbUzqiNbZsT2xp1huMDwBgbora17T6xw6OEBYBxIn7mZ/7kbuzHiQXT8HsCDIDJeqC5R7L8RujlUm7si5SxOvHczKNVAJjcpqgLm16duDfqaMcCgCm8ELWukU4sXC7AAJjB2qhPNNWJuScMgFmlhYGra+3Esvw5MQIMgFmlLLml7k5MFwZAWV62k0dlnVj4lAADoESpY7q6rk5MFwZApd1YJZ1YuFKAAVB1N1ZVJ7Y/y5dEAkDZDkYdVUknFrYIMAAqlLZDvKSqTiw9asVO9QBU6X+iTi4SZBPtYh+BNm9sAahaZFOhTeUneZ7YlYYVgDpE5lxT6N8r/Lnj3JwFHQDU5WDk01FldWKbBRgANVoT2XPuzCE26tSuMZ4A1OxvxjZaBVcn7suWed4LAFTkhciodTN1Yln+5E0BBkDd1kYjtWnWEPs14whAQ35rpW8W+Tjx8fhysnEEoAFPRU5tnCXE7FgPQFMipuaXzaAi4STAAGhK9FJz66cKqPgPrzJ+ADTs75bNqZU+TowQ2xlfNhg/ABq0K7JqwzQhdiDLt8UHgKYciqxaMovGzXetNnYANGzZLFq1QheWHoA5Z+wAaFpk0sWTdmIfNmwAtMSHJg2xnzZmALTE6ycNsTONGQAtccakIXaCMQOgJV4xaYh5CCYAbXHUpCFmZSIAbTEnxAAYTIgBQKsJMQCEGAAIMQAQYgAIMQAQYgAgxABAiAEgxABAiAGAEANAiAGAEAOAmkNs3vAA0BLzk4bYQWMGQEscnDTEnjVmALTEs5OG2JPGDICWeHLSEHvYmAHQEj+cNMS2GzMAWuJflvo/5+bnl16EODc3d2J82WXcAGiBkyKvdhcOsVGQHcrcSwZAsw5HVq1e6hvjAmqvsQOgYctm0bgQ+7qxA6Bhy2bRuI8T18eX540fAA06JrJq78QhNgoy208B0JjIqbnlvldk0YZODICm7Fnpm0VC7HPGEICG3LDSN4t8nHhufLnLOALQgLdFTt09dYiNgsz9YgDUbdn7wxaMDaYIsPTlIWMJQM3GZs/YEBt1apcZSwBq9gdjG60Cc2IL/+gjRQDqMvajxMKd2Cjo7jamANSkUOZM0om9mGnGFYAaFFp4WLgTG73YHuMKQMX2FAmwQiGWOrGFClcbWwAqdvURnwLO1q4dEWoWeABQlUILOqbqxEbJeLsxBqAity/Km/I7sVGwWeABQOlW2rG+lE5slI73G2oASnb/EVlTTSemGwOg6S5s6k5MNwZAlV1YHZ3Y+swDMwEoxzGRR3vr7MTSH2alIgCz+krKlFo7sUUh574xAKY10X1hpXVii5LyTxwDAKb08RXypZZOLH1Jc2PrHQsAJrA3MuiYmTJowl3sl3Ni1C7HA4AJnBS1e7lvlr6L/VI1kv4SNzseABR0c2TI7gL5UksntuCFqKMcGwDGZMW6Ik1UXZ3Ygnc4NgCM8c4p8mW6ECuwOnGx9Djp6x0fAJZx/SgrJs2XpTOqpNWJR/pR1CsdKwCOyIYTF/7HrPlTKMQmnBNbzE3QACw4HDXRTc1NzIkt9nbHDIDlMqGNc2KLpc88P+m4AQzeJ0eZUFa+/Pg1KpoTW+yrUe92DAEG6T+ifnapb7R9Tmyxx6NOdiwBBuWJqFOm/Y+LhFwdndiC56KOdUwBBmFP1HGzhlRbOrEF+7ICd2kD0Gn7o46e9UXa1oktsDUVQH8diFpbVki1rRMTZAACrNOd2OJ2c61jDtALhTb17UsntsDDNAG6L72Xl75wr+2d2IKdURucAwCd9FTUxqpCapwqd+woKv3w9zoPADrn3mkDrKx8qXLvxEm8Jepa5wNAZ1w7eu+eWhn50vSc2JG2RH0h/bHOD4BWSqHxwajtlf9BHZkTW4oFHwDtU+oCjr7MiS3lmKivOF8AWuMrWckrELuyi/0s3h91U+bhmgBNSQ+z/MWoL5X9wn24T6yo+6LOcS4B1OpbUW9q6g9v+snOZUqD+AtRB51TAJU7OHrPrTTA2v5k57KlVjbtt5iWdc47xwDKz5XRe+xRWQUfH1aRL22fE1vJw1GnOecASvFI1Om1JmaPVycWcfooxJ5w7gFM7YnRe+npdf/BQ+/EFtsUdU/USc5HgEJ2ZfmOG4829RcY0urESTw8CjW7fgAckRuj0Dq9E3/ZHq1OnMTpo58rbV9lNSNA/l74hdF7Y2sCrI97J1YhdWXfiHqV7gwYWNf1ZNR5WYMfGerEZpcO3smjn/WTWf45sCX6QF+Da9fovW7V6L2vtQGmE5vNJVG/E/XOqDXOfaCj0keFd0b9VdT1vUrkDu9i34T0GJhPRZ0xCjUfPQJt7LQOZPkCtj/MangcStMhpROb3tlRvxn1jqhTs/zppUePWnQBB1QZVGnT3X1RO6Mei/pa1N9G7RjUQNTRiQFAUzziBAAhBgBCDAAK+j8BBgAfFp0ddCTwbQAAAABJRU5ErkJggg==';
    var maskImage = new Image();
    maskImage.src = url;

    function cloudChart(data,length,dom,type){
        var sizeMin=15;
        var gridSize=6;//间隔
        if(type == 2) {
            sizeMin=20;
            gridSize=5;
        }

        //间隔
        if(phone){
            sizeMin=15;
            gridSize=5;
        }
        if(length>2){
            sizeMin=20;
            gridSize=5;
        }else if(length>1){
            sizeMin=25;
            gridSize=8;
        }
        var chart2 = echarts.init(document.getElementById(dom));
        var colors = ["#f18d00","#f1b192","#b9a7af"];//词云颜色
        var option = {
            toolbox: {
                show : true,
                orient:'vertical',
                y:15,
                x:'right',
                feature : {
                    mark : {show: false},
//                     dataView : {
//                         show: false,
//                         readOnly: false,
//                         lang: ['数据视图', '关闭', '刷新']
//                     },
//                     restore : {show: true},
                    saveAsImage : {
                        show: true
                        //name:data.title
                    }
                }
            },
            calculable : false,
            series: [{
                type: 'wordCloud',
                textStyle: {
                    normal: {
                        fontFamily: 'STHeiti sans-serif',
                        color: function() {
                            var i = parseInt(Math.random() * 3);
                            return colors[i];
                        }
                    },emphasis: {
                        shadowBlur: 10,
                        shadowColor: '#333'
                    }
                },
                width: '90%',
                height: '90%',
                top: 0,
                bottom:0,
                maskImage: maskImage,
                center:['50%','50%'],
                rotationRange: [0, 0],
                rotationStep: 45,
                gridSize: gridSize,
                sizeRange: [sizeMin, 100],
                data:data
            }]
        };
        chart2.setOption(option);
        window.onresize = chart2.resize;

    }

    function chordChart(data,dom){
        var chart3 = echarts.init(document.getElementById(dom));
        var option = {
            tooltip : {
                trigger: 'item',
                formatter: function (params) {
                    if (params.indicator2) {    // is edge
                        return params.indicator2 + ' ' + params.name + ' ' + params.indicator;
                    } else {    // is node
                        return params.name
                    }
                }
            },
            toolbox: {
                show : true,
                orient:'vertical',
                x:'right',
                y:15,
                feature : {
//                     restore : {show: true},
                    saveAsImage : {
                        show: true
                        //name:data.title
                    }
                }
            },
            color:['#3FAD7E','#758DC4','#0e7dc0'],
            legend: [{
                x: 'left',
                data: data.legend,
                icon:'rect'
            }],
            calculable : false,
            series : [
                {
                    type:'graph',
                    layout: 'circular',
                    circular: {
                        rotateLabel: true
                    },
                    categories: data.legend,
                    roam: true,
                    label: {
                        normal: {
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    lineStyle: {
                        normal: {
                            color: 'source',
                            curveness: 0.3
                        }
                    },
                    itemStyle : {
                        normal : {
                            label : {
                                rotate : true,
                                show: true,
                                position: 'bottom',
                                textStyle:{
                                    fontSize:14,
                                    color:"#454545"
                                }
                            }
                        }
                    },
                    minRadius: 7,
                    maxRadius: 20,
                    // 使用 nodes links 表达和弦图
                    data: data.nodes,
                    links: data.links
                }
            ]
        };
        chart3.setOption(option);
        window.onresize = chart3.resize;
    }

    //来源类型
    function goOrigin(keywords,date,title,filterKeyword,starttime,endtime){
        chartloading("container3");
        EChartsDwr.getHotOTChart(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),OriginCallBack);
    }

    function OriginCallBack(data){
        var c3 = document.getElementById("container3");
        if (data.length==0){
            c3.innerHTML = "<br> <div align=\"center\" style=\"padding-top:130px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
            return;
        }else{
            if(data[0]) {
                var res = eval(data[0]);
                $("#container3_msg").html(data[1]);
                MTChart(res[0], "container3", 1);
            }else{
                c3.innerHTML = "<br> <div align=\"center\" style=\"padding-top:130px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
            }
        }
    }

    //柱状图
    function MTChart(data,dom,flag){
        var chart3 = echarts.init(document.getElementById(dom));
        if(data.data.length<2){
            /*var maxNum = data.topData[0].value;
             var str = {type: 'bar',itemStyle: {normal: {color: 'rgba(0,0,0,0.2)'}},barGap:'-100%',data:[ maxNum , maxNum ,  maxNum, maxNum, maxNum, maxNum,maxNum, maxNum, maxNum, maxNum, maxNum, maxNum],animation: false};
             data.data.push(str);*/
            $.each(data.data, function(i,n) {
                data.data[i].barWidth = '50%'
            });
        }else if(data.data.length<3){
            $.each(data.data, function(i,n) {
                data.data[i].barWidth = '38%'
            });
        }else if(data.data.length<4){
            $.each(data.data, function(i,n) {
                data.data[i].barWidth = '22%'
            });
        }

        if(flag==1){
            var option = {
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                    formatter:function(params){
                        var res = params[0].name+"<br/>"+params[0].seriesName+":"+params[0].value+"%<br/>";
                        for (var i = 1; i < params.length; i++) {
                            res += params[i].seriesName+":"+params[i].value+"%<br/>";
                        }
                        return res;
                    }
                },
                color:['#3FAD7E','#758DC4','#0e7dc0'],
                toolbox: {
                    orient:'vertical',
                    x:1760,
                    y:15,
                    feature: {
//                         restore : {show: true},
                        saveAsImage : {
                            show: true,
                            name:data.title
                        }
                    }
                },
                legend: {
                    top: '5px',
                    data:data.legend,
                    icon:'rect'
                },
                grid: {
                    left: '5%',
                    right: '5%',
                    bottom: '5%',
                    containLabel: true
                },

                xAxis : [
                    {
                        name:'单位/(%)',
                        nameTextStyle:{
                            color:'#0086ce'
                        },
                        type : 'value',
                        axisLine:{//坐标轴轴线 默认 true,
                            show: true,
                            lineStyle:{
                                color:'#dbdbdb',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisTick:{//坐标轴刻度
                            show: true,
                            lineStyle:{
                                color:'#888',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        splitLine:{
                            show: false
                        },
                        axisLabel:{//坐标轴刻度标签
                            show: true,
                            //rotate: 30,  //旋转角度
                            textStyle:{
                                color:'#888'
                            },
                            formatter:function(v){
                                if(v>=1000){
                                    return (v/1000)+"k";
                                }else{
                                    return v;
                                }
                            }
                        }
                    }
                ],
                yAxis : [
                    {
                        type : 'category',
                        axisLine:{//坐标轴轴线 默认 true,
                            show: true,
                            lineStyle:{
                                color:'#dbdbdb',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisTick:{//坐标轴刻度
                            show: true,
                            lineStyle:{
                                color:'#888',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisLabel:{//坐标轴刻度标签
                            show: true,
                            //rotate: 30,  //旋转角度
                            textStyle:{
                                color:'#888'
                            },
                            formatter:function(v){
                                return v.split(":")[0];
                            }
                        },
                        boundaryGap : true,
                        data :data.datetime
                    }
                ],
                calculable : false,
                series : data.data
            };
        }else{
            var option = {
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                },
                toolbox: {
                    orient:'vertical',
                    feature: {
//                         restore : {show: true},
                        saveAsImage : {
                            show: true,
                            name:data.title
                        }
                    }
                },
                color:['#3FAD7E','#758DC4','#0e7dc0'],
                legend: {
                    top: '5px',
                    data:data.legend,
                    icon:'rect'
                },
                grid: {
                    left: '5%',
                    right: '7%',
                    bottom: '5%',
                    containLabel: true
                },

                xAxis : [
                    {
                        name:'单位/条',
                        nameTextStyle:{
                            color:'#0086ce'
                        },
                        type : 'value',
                        axisLine:{//坐标轴轴线 默认 true,
                            show: true,
                            lineStyle:{
                                color:'#dbdbdb',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisTick:{//坐标轴刻度
                            show: true,
                            lineStyle:{
                                color:'#888',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        splitLine:{
                            show: false
                        },
                        axisLabel:{//坐标轴刻度标签
                            show: true,
                            //rotate: 30,  //旋转角度
                            textStyle:{
                                color:'#888'
                            },
                            formatter:function(v){
                                if(v>=1000){
                                    return (v/1000)+"k";
                                }else{
                                    return v;
                                }
                            }
                        }
                    }
                ],
                yAxis : [
                    {
                        type : 'category',
                        axisLine:{//坐标轴轴线 默认 true,
                            show: true,
                            lineStyle:{
                                color:'#dbdbdb',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisTick:{//坐标轴刻度
                            show: true,
                            lineStyle:{
                                color:'#888',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisLabel:{//坐标轴刻度标签
                            show: true,
                            //rotate: 30,  //旋转角度
                            textStyle:{
                                color:'#888'
                            }
                        },
                        boundaryGap : true,
                        data :data.datetime
                    }
                ],
                calculable : false,
                series :data.data
            };
        }
        chart3.setOption(option);
        window.onresize = chart3.resize;
    }

    //地域分布
    function goMapChart(keywords,date,title,filterKeyword,starttime,endtime){
        chartloading("container4");
        chartloading("container5");
        EChartsDwr.getHotAreaChart(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),AreaCallBack);
    }

    function AreaCallBack(data){
        var c2 = document.getElementById("container4");
        if (data.length==0){
            c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:130px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
            return;
        }else{

            var res = eval(data[0]);
            var res1 = eval(data[1]);
            var _chartColumn4 = MapChart(res[0],eval("("+data[2]+")"),"container4");
            var _chartColumn5 = MTChart(res1[0],"container5",2);

            $("#container4_msg").html(data[3]);
        }
    }

    function MapChart(data,hideLegend,dom){
        var min = 0;
        var max = 0;
        $.each(data.data, function(i, n) {
            $.each(n.data,function(j,m){
                delete m.itemStyle;
                if (m.value > max)
                    max = m.value;
                if (m.value < min)
                    min = m.value;
            });
        });
        var chart2 = echarts.init(document.getElementById(dom));
        data =  eval(data);
        $.each(data.data, function(i,n) {
            data.data[i].label={
                normal: {
                    show: true,
                    textStyle:{
                        fontSize:11,
                        color:'#3a3a3a'
                    }
                },
                emphasis: {
                    show: true,
                    textStyle:{
                        fontSize:13,
                        color:'#3a3a3a'
                    }
                }
            };

            data.data[i].itemStyle={
                normal: {
                    borderColor: '#ffffff',
                    areaColor: '#efefef'//地图背景颜色
                },
                emphasis: {
                    areaColor: '#bdd3f5'
                }
            };
        });

        chart2.showLoading( {
            text : "正在努力加载数据中,请耐心等待。。。",
            textStyle : {
                fontSize : 20
            }
        });
        // 指定图表的配置项和数据
        var option = {
            tooltip: {
                trigger: 'item'
            },
            toolbox: {
                orient:'vertical',
                feature: {
//                     restore : {show: true},
                    saveAsImage : {
                        show: true,
                        name:data.title
                    }
                }
            },
            color:['#3FAD7E','#758DC4','#0e7dc0'],
            legend: {
                orient: 'horizontal',
                left: 'center',
                data:data.legend,
                selectedMode:'single',
                selected:hideLegend,
                icon:'rect'
            },
            visualMap: {
                min: min,
                max: max,
                left: '0',
                bottom: '20',
                text: ['高','低'],           // 文本，默认为数值文本
                calculable: true,
                inRange: {
                    color: ['#7097cd','#5aa2c7', '#52aeb0']
                }
            },
            geo:{
                map: 'china-contour',
                itemStyle: {
                    normal: {
                        borderWidth: 2,
                        shadowBlur: 50,
                        shadowColor: 'rgba(0, 0, 0, 0.2)'
                    }
                }
            },
            calculable : false,
            series: data.data
        };
        chart2.hideLoading();
        chart2.setOption(option);
        window.onresize = chart2.resize;
    }

    //相关排行
    function goSenChar(categoryId,title,type,secondCategory,categoryLevel){
        chartloadingTab("senTableOne");
        EChartsDwr.getHotSeniority(categoryId,'',title,type,secondCategory,categoryLevel,null,null,'0',GetRandom(30),senCallback);
    }

    function senCallback(data){
        if (data == null || data == "") {
            $("#ranking").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
        } else {
            var htmlOne="";
            var htmlTwo="";
            var htmlThree="";
            var tabChangeHtml="";
            for(var i=0;i<data.length;i++) {
                if (data[i]) {
                    for (var j = 0; j < data[i].length; j++) {
                        var obj1 = eval('(' + data[i][j] + ')');
                        if (obj1) {
                            if (i == 0) {
                                htmlOne += '<tr><td>';
                                if (j == 0) {
                                    tabChangeHtml += '<li id="li1" class="active"><a href="javascript:changLi(1);">' + obj1.title + '</a></li>';
                                    htmlOne += '<em class="icon-huangguan numFast fc_orange">';
                                    htmlOne += '<span>'+obj1.category+'</span>';
                                    htmlOne += '</em>';
                                    //htmlOne += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking1.png">';
                                } else if (j == 1) {
                                    htmlOne += '<em class="icon-huangguan numFast fc_dark_grey">';
                                    htmlOne += '<span>'+obj1.category+'</span>';
                                    htmlOne += '</em>';
                                    //htmlOne += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking2.png">';
                                } else if (j == 2) {
                                    htmlOne += '<em class="icon-huangguan numFast fc_earthy_red">';
                                    htmlOne += '<span>'+obj1.category+'</span>';
                                    htmlOne += '</em>';
                                    //htmlOne += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking3.png">';
                                } else {
                                    htmlOne += obj1.category;
                                }

                                htmlOne += '</td>';
                                htmlOne += '<td>';
                                if (obj1.title == obj1.name) {
                                    htmlOne += '<font style="color:#C0504D;">' + obj1.name + '</font>';
                                } else {
                                    htmlOne += obj1.name;
                                }
                                htmlOne += '</td>';
                                htmlOne += '<td>' + commafy(obj1.numberCustom) + '</td>';
                                htmlOne += '<td>';
                                htmlOne += '<div class="row clearfix">';
                                htmlOne += '<div class="col-md-10">';
                                htmlOne += '<div class="progress progress-g progressNo sm active" style="width: 95%;">';
                                htmlOne += '<div class="progress-bar bg_cobalt_blue" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:' + obj1.ratioHotCustom + '%;">';
                                htmlOne += '</div>';
                                htmlOne += '</div>';
                                htmlOne += '</div>';
                                htmlOne += '<div class="col-md-2 align_l">'+obj1.ratioHotCustom;
                                htmlOne +='</div>';
                                htmlOne +='</div>';
                                htmlOne += '</td>';
                                htmlOne += '</tr>';
                            } else if (i == 1) {
                                htmlTwo += '<tr><td>';
                                if (j == 0) {
                                    tabChangeHtml += '<li id="li2"><a href="javascript:changLi(2);">' + obj1.title + '</a></li>';
                                    htmlTwo += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking1.png">';
                                } else if (j == 1) {
                                    htmlTwo += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking2.png">';
                                } else if (j == 2) {
                                    htmlTwo += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking3.png">';
                                } else {
                                    htmlTwo += obj1.category;
                                }
                                htmlTwo += '</td>';
                                htmlTwo += '<td>';
                                if (obj1.title == obj1.name) {
                                    htmlTwo += '<font style="color:#C0504D;">' + obj1.name + '</font>';
                                } else {
                                    htmlTwo += obj1.name;
                                }
                                htmlTwo += '</td>';
                                htmlTwo += '<td>' + obj1.numberCustom + '</td>';
                                htmlTwo += '<td>';
                                htmlTwo += '<div class="row clearfix">';
                                htmlTwo += '<div class="col-md-10">';
                                htmlTwo += '<div class="progress progress-g progressNo sm active" style="width: 95%;">';
                                htmlTwo += '<div class="progress-bar bg_cobalt_blue" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:' + obj1.ratioHotCustom + '%;">';
                                htmlTwo += '</div>';
                                htmlTwo += '</div>';
                                htmlTwo += '</div>';
                                htmlTwo += '<div class="col-md-2 align_l">'+obj1.ratioHotCustom;
                                htmlTwo +='</div>';
                                htmlTwo +='</div>';
                                htmlTwo += '</td>';
                                htmlTwo += '</tr>';
                            } else if (i == 2) {
                                htmlThree += '<tr><td>';
                                if (j == 0) {
                                    tabChangeHtml += '<li id="li3"><a href="javascript:changLi(3);">' + obj1.title + '</a></li>';
                                    htmlThree += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking1.png">';
                                } else if (j == 1) {
                                    htmlThree += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking2.png">';
                                } else if (j == 2) {
                                    htmlThree += '<img src="http://cdn.files.51wyq.cn/web/images/icon-ranking3.png">';
                                } else {
                                    htmlThree += obj1.category;
                                }

                                htmlThree += '</td>';
                                htmlThree += '<td>'
                                if (obj1.title == obj1.name) {
                                    htmlThree += '<font style="color:#C0504D;">' + obj1.name + '</font>';
                                } else {
                                    htmlThree += obj1.name;
                                }
                                htmlThree += '</td>';
                                htmlThree += '<td>' + obj1.numberCustom + '</td>';
                                htmlThree += '<td>';
                                htmlThree += '<div class="row clearfix">';
                                htmlThree += '<div class="col-md-10">';
                                htmlThree += '<div class="progress progress-g progressNo sm active" style="width: 95%;">';
                                htmlThree += '<div class="progress-bar bg_cobalt_blue" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:' + obj1.ratioHotCustom + '%;"></div>';
                                htmlThree += '</div>';
                                htmlThree += '</div>';
                                htmlThree += '<div class="col-md-2 align_l">'+obj1.ratioHotCustom+'</div>';
                                htmlThree +='</div>';
                                htmlThree += '</td>';
                                htmlThree += '</tr>';
                            }
                        }
                    }
                }
            }

            //$("#tabChange").html(tabChangeHtml);
            $("#senTableOne").html(htmlOne);
            $("#senTableTwo").html(htmlTwo);
            $("#senTableThree").html(htmlThree);
        }
    }

    function changLi(id){
        if(id==1){
            $("#li1").addClass("active");
            if($("#li2:visible")){
                $("#li2").removeClass("active");
                $("#tableTwo").hide();
            }
            if($("#li3:visible")){
                $("#li3").removeClass("active");
                $("#tableThree").hide();
            }
            $("#tableOne").show();
        }else if(id==2){
            $("#li2").addClass("active");
            if($("#li1:visible")){
                $("#li1").removeClass("active");
                $("#tableOne").hide();
            }
            if($("#li3:visible")){
                $("#li3").removeClass("active");
                $("#tableThree").hide();
            }
            $("#tableTwo").show();
        }else if(id==3){
            $("#li3").addClass("active");
            if($("#li1:visible")){
                $("#li1").removeClass("active");
                $("#tableOne").hide();
            }
            if($("#li2:visible")){
                $("#li2").removeClass("active");
                $("#tableTwo").hide();
            }
            $("#tableThree").show();
        }
    }

    //一个输入框内添加框
    function addWord(id){
        if(id==1){
            if($("#kw1_2").is(":hidden")){
                $("#kw1_2").show();
            }else{
                $("#kw1_3").show();
                $("#w1").hide();
            }
        }else if(id==2){
            if($("#kw2_2").is(":hidden")){
                $("#kw2_2").show();
            }else{
                $("#kw2_3").show();
                $("#w2").hide();
            }

        }else if(id==3){
            if($("#kw3_2").is(":hidden")){
                $("#kw3_2").show();
            }else{
                $("#kw3_3").show();
                $("#w3").hide();
            }
        }
    }

    //多个输入框 删除框,单个输入框 清空内容
    function delWord(id){
        var curIds="";
        $(".page-layout-content .compUl li").each(function(){
            curIds+=$(this).attr("class");
        });
        if(id==1) {
            if (curIds.indexOf('colorTwo') == -1 && curIds.indexOf('colorThree') == -1) {
                $("#title1_1,#keyword1_1,#keyword1_2,#keyword1_3,#filterKeyword1_1,#title,#keyword,#filterKeyword,#keywords").val("");
                $("#kw1_2,#kw1_3").hide();
                $("#w1").show();
            } else {
                $(".colorOne").remove();
                $(".addComp").show();
            }
        }
        if(id==2) {
            if (curIds.indexOf('colorOne') == -1 && curIds.indexOf('colorThree') == -1) {
                $("#title2_1,#keyword2_1,#keyword2_2,#keyword2_3,#filterKeyword2_1,#title,#keyword,#filterKeyword,#keywords").val("");
                $("#kw2_2,#kw2_3").hide();
                $("#w2").show();
            } else {
                $(".colorTwo").remove();
                $(".addComp").show();
            }
        }
        if(id==3) {
            if (curIds.indexOf('colorOne') == -1 && curIds.indexOf('colorTwo') == -1) {
                $("#title3_1,#keyword3_1,#keyword3_2,#keyword3_3,#filterKeyword3_1,#title,#keyword,#filterKeyword,#keywords").val("");
                $("#kw3_2,#kw3_3").hide();
                $("#w3").show();
            } else {
                $(".colorThree").remove();
                $(".addComp").show();
            }
        }
    }

    //添加监测方案
    function addKeyword(){
        if($("#userId").val()>0){
            if($("#keywords").val().indexOf(',') == -1){
                hotKeywordSet();
            }else{
                //跳到信息监测页面
                var href="/keyword.shtml";
                window.open(href,"_blank");
            }
        }else{
            jumpLogin();return;
        }
    }

    function hotKeywordSet(){
        var url = "/keyword_replace.action";
        hkAjax(url);
    }

    function hkAjax(url){
        $.ajax({
            url : url,
            type : "post",
            data:{
                "filterKeyword":$("#filterKeyword").val(),
                "searchKeyword":$("#keywords").val(),
                "title":$("#title").val(),
                "searchType":4
            },
            dataType : "json",
            success : function(data){
                if(data.msg > 2){
                    $("#submitBtn").html("查看方案");
                    $("#cancelBtn").html("留在当前页");
                    showMsgInfo(0,"添加监测方案成功！",1);
                    $("#submitBtn").click(function(){
                        var params = {'kw.keywordId':data.msg};
                        sendPostForm(njxBasePath + "/keyword.shtml", '_blank', params);
                    });
                }else if(data.msg instanceof Array){
                    $("#submitBtn").html("立即购买");
                    $("#cancelBtn").html("取消");
                    showMsgInfo(0,"您当前未使用监测方案个数为0，是否购买？",1);
                    $("#submitBtn").click(function(){
                        hideInfoDiv();
                        $("#monitorFlag").val(1);
                        openBuyCommon(1);
                    });
                }
            }
        });
    }

    //添加全网事件分析
    function addEvent(){
        if($("#userId").val()>0){
            if($("#keywords").val().indexOf(',') == -1){
                $("#recordName").val($("#title").val());
                $("#recordKeyword").val($("#keywords").val());
                $("#recordFilterKeyword").val($("#filterKeyword").val());
                $("#recordType").val(2);
                if(''>0||''==2){
                    $("#loginRecordForm").submit();
                }else{
                    openBuyCommon(2);
                }
            }else{
                //跳到全网事件分析页面
                var href="/view/eventAnalysis/taskList.action?type=1&name="+encodeURIComponent(encodeURIComponent($("#title").val()));
                window.open(href,"_blank");
            }


        }else{
            jumpLogin();return;
        }
    }

    //添加微博事件分析
    function addWBEvent(){
        if($("#userId").val()>0){
            if($("#keywords").val().indexOf(',') == -1){
                $("#recordName").val($("#title").val());
                $("#recordKeyword").val($("#keywords").val());
                $("#recordFilterKeyword").val($("#filterKeyword").val());
                $("#recordType").val(16);
                if(''>0||''==2){
                    $("#loginRecordForm").submit();
                }else{
                    openBuyCommon(3);
                }
            }else{
                //跳到微博事件分析页面
                var href="/view/weiboEventAnalysis/taskList.action?type=1&name="+encodeURIComponent(encodeURIComponent($("#title").val()));
                window.open(href,"_blank");
            }
        }else{
            jumpLogin();return;
        }
    }


    $('#relatedWordsTable .fixedtablewrap>div+div').slimScroll({height: 'auto'});
    //随机数
    function GetRandom(n){
        GetRandomn=Math.floor(Math.random()*n+1);
        return GetRandomn;
    }

    var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));
    elems.forEach(function(html) {
        var switchery = new Switchery(html);
    });

    function dayReportSet(){
        if($("#userId").val()<=0){
            jumpLogin();return;
        }
        var title = $("#title").val();
        var keywords = $("#keywords").val();
        var filterKeyword = $("#filterKeyword").val();
        var name=[];
        name = title.split(",");
        var kw=[];
        kw = keywords.split(",");
        var fk=[];
        fk = filterKeyword.split(",")
        var json="{";
        if(name!=null&&name!=""){
            for(var i=0;i<name.length;i++){
                json +='"title'+(i+1)+'":"'+name[i]+'",';
                json +='"keyword'+(i+1)+'":"'+kw[i]+'",';
                if(fk[i]) {
                    json += ',"filterKeyword' + (i + 1) + '":"' + fk[i] + '",';
                }
            }
            json = json.substring(0, json.length - 1);
            json +="}";
        }
        $("#jsonData").val(json);
        var form = document.getElementById("searchForm");
        form.action = actionBase + "/setUserHotReport.action";
        form.submit();
    }


    function yearSummaryandline(shareCode){
        $.ajax({
            url : '/shareReport/yearHotStatAndLine.action',
            type : "post",
            data :{"shareCode":shareCode},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotYearSummaryAndlineChart(data.dataYearLine,$("#title").val(),GetRandom(30),yearWorthCallback);
                }else{
                    var c1 = document.getElementById("hotTable");
                    var c2 = document.getElementById("container1");
                    var c3 = document.getElementById("clusterList");
                    c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
                    c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
                    c3.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";

                }
            }
        });
    }

    function yearWorthCallback(data){
        if ((data.length==1&&data[0] == null) || (data.length==1&&data[0] == "")) {
            $("#container0").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
        } else {
            var html="";
            var names=$("#title").val();
            var name="";
            var dataTable=data[0];
            if(dataTable) {
                for (var i = 0; i < dataTable.length; i++) {
                    var obj = eval('(' + dataTable[i] + ')');
                    if (obj != null || obj != "") {
                        name = names.split(",")[i];
                        if (name.length > 10) {
                            name = name.substring(0, 10) + "...";
                        }
                        var cus = "";
                        if (obj.ratioHotCustom < 0.01) {
                            cus = "< 0.01";
                        } else {
                            cus = obj.ratioHotCustom;
                        }

                        html += "<tr><td>";
                        if (i == 0) {
                            html += "<font style='color:#3FAD7E'>";
                            $("#hotCus").val(cus);
                        } else if (i == 1) {
                            html += "<font style='color:#758DC4'>";
                        } else if (i == 2) {
                            html += "<font style='color:#0e7dc0'>";
                        }

                        html += name + "</font></td><td>" + cus + "</td>";//<td>" + obj.ratioCustom + "%";

                        /*var ratCus = "" + obj.ratioCustom;
                        if (ratCus.indexOf("-") != -1) {

                            html += "<i class='icon-arrow-down f_c4'>";
                        } else if (ratCus.length == 1 && ratCus.substring(0, 1) == "0") {

                        } else {
                            html += "<i class='icon-arrow-up f_c2'>";
                        }
                        html += "</td>";*/

                        html += "<td>" + obj.differenceCustom;
                        var diffCus = "" + obj.differenceCustom;
                        if (diffCus.indexOf("-") != -1) {
                            html += "<i class='icon-arrow-down f_c4'>";

                        } else if (diffCus.length == 1 && diffCus.substring(0, 1) == "0") {

                        } else {
                            html += "<i class='icon-arrow-up f_c2'>";
                        }
                        html += "</td><td>" + obj.numberCustom + "</td>";
                        html += "</tr>";
                    }
                }
                $("#hotTable").html(html);
            }else{
                $("#hotTable").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            }
        }

        var c1 = document.getElementById("container1");
        var dataLine = eval(data[1]);
        if (dataLine == null || dataLine == "") {
            c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
            return false;
        } else {
            if (dataLine[0].data == null || dataLine[0].data.length == 0) {
                c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
                return;
            } else {
                var data1 = dataLine[0];
                var alertMsg = "从指数变化趋势来看，";
                for (var i = 0; i < data1.data.length; i++) {
                    var listData = data1.data;
                    var subMsg = listData[i].name;
                    var topTime = listData[i]["label"].name;
                    topTime = topTime.split(":")[0];
                    topTime=topTime.replace("-","月");
                    topTime=topTime.replace(" ","日 ");
                    var topValue = listData[i]["label"].value;
                    if(i==0){
                        alertMsg += "<font style='color:#3FAD7E'>";
                    }
                    if(i==1){
                        alertMsg += "<font style='color:#758DC4'>";
                    }
                    if(i==2){
                        alertMsg += "<font style='color:#0e7dc0'>";
                    }
                    alertMsg += subMsg + '</font>的热度在' + topTime + '时达到了<font class="f_c2">' + topValue + '</font>的峰值。';
                }
                alertMsg+='其重点信息聚类如下:';
                $("#container1_msg").html(alertMsg);
                var _chartColumn1 = LineChartHeatNetwork(dataLine,"container1",2);
            }
        }

        if (data[2] == null || data[2] == "") {
            $("#clusterList").html("<tr><td rowspan='5' colspan='3'><div align=\"center\" style=\"margin-top: 30px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div></td></tr>");
            return false;
        }else{
            var htmlHeat ='<th width="200px"></th><th >标题</th><th width="200px">时间</th>';
            var html="";
            var dataclu=data[2];
            var names=$("#title").val();
            var name=names.length>10?names.substring(0,10)+"...":names;
            html += "<tr>";
            var length = dataclu.length > 5 ? 5 : dataclu.length;
            html += "<td rowspan='" + length+1 + "'><span style='color:#3FAD7E'>"+ name +"</span></td>";
            html += "</tr>";
            for(var i=0;i<dataclu.length;i++) {
                var obj1 = eval('(' + dataclu[i]+ ')');
                if (obj1) {
                    html += "<tr><td><div class='align_l ml10'>" + obj1.title + "<p class='mt5'>" + obj1.majorMedia + "</p></div></td><td>"+obj1.clusterTime+"</td></tr>";
                }
            }

            /*html += "<tr><td colspan='2' class='division'></td></tr>";*/
        }
        $("#clusterHeat").html(htmlHeat);
        $("#clusterList").html(html);
    }

    function yearWordCloud(shareCode){
        $.ajax({
            url : '/shareReport/yearHotWordCloud.action',
            type : "post",
            data :{"shareCode":shareCode},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotYearWordCloudChart(data.dataYearWordCloud,$("#title").val(),GetRandom(30),yearWordCloudCallBack);
                }else{
                    var c2 = document.getElementById("container2");
                    c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\" style=\"width:60px\"><br/>此时间段暂无信息</p></div>";
                }
            }
        });
    }

    function yearWordCloudCallBack(data){
        var c2 = document.getElementById("container2");
        if (data[0].length==0 || data[0]==null){
            c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\" style=\"width:60px\"><br/>此时间段暂无信息</p></div>";
            return;
        }else{
            var names=$("#title").val();
            var name=names.length>10?names.substring(0,10)+"...":names;
            var allHtml = "";
            var subMsg = "";
            for (var i = 0; i < data[0].length; i++) {
                allHtml += '<div class="col-md-3"></div>';
                allHtml += '<div class="col-md-6"><div class="chart-bady"><div style="height:360px;width: 100%;" id="container2_'+i+'"></div></div></div>';
                allHtml += '<div class="col-md-3"></div>';
                subMsg += "在与";
//                 subMsg += "<font style='color: #3FAD7E'>";
                if(data[0][i]!=""&&data[0][i]!=null) {
                    var data1 = eval(data[0][i]);
                    for(var d=0;d<data1.length;d++){
                        if(d==0) {
                            subMsg += name + "相关的全部信息中， 提及频次最高的词语依次为" + data1[d].name + "</font>";
                        }else if(d==1){
                            subMsg +="、" + data1[d].name + "</font>";
                        }else if(d==2){
                            subMsg +="和" + data1[d].name + "</font>";
                        }
                        if(d==(data1.length-1)){
                            subMsg +="。";
                        }
                    }
                }else{
                    subMsg += name +"</font>的报道暂无数据。";
                }
            }
            c2.innerHTML = allHtml;

            $("#container2_msg").html(subMsg);

            for (var i = 0; i <data[0].length; i++) {
                if(data[0][i]==null||data[0][i]==""){
                    var c = document.getElementById("container2_" + i);
                    c.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\" style=\"width:60px\"><br/>此时间段暂无信息</p></div>";
                    continue;
                }
                $("#container2_"+i).parent().css({"background-image":"url('http://cdn.files.51wyq.cn/web/images/cloud.png')","background-size":"100% 100%","background-repeat":"no-repeat"});
                var _chartColumn2 = cloudChart(eval(data[0][i]),data[0].length, "container2_" + i,2);
            }
        }
    }

    function yearRelated(shareCode){
        $("#container6").parent().removeClass().addClass("col-md-7");
        $("#mapTop10").removeClass().addClass("col-md-5");
        $.ajax({
            url : '/shareReport/yearHotAnlyzer.action',
            type : "post",
            data :{"shareCode":shareCode},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotYearRelatedChart(data.dataYearAnlyzer,$("#title").val(),GetRandom(30),yearRelatedCallBack);
                }else{
                    var c2 = document.getElementById("container6");
                    c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\" style=\"width:60px\"><br/>此时间段暂无信息</p></div>";
                }
            }
        });
    }

    function yearRelatedCallBack(data){
        if(data) {
            var mapHtml;
            var relHtml;
            var mapTop10 = document.getElementById("mapTop10");
            var nameRel = $("#title").val();
            mapHtml = "<div class='row clearfix'><div id='relatedWordsTable'>";
            if(nameRel.length>10){
                nameRel=nameRel.substring(0,10)+"...";
            }
            relHtml = "通过对与";
            relHtml += "<font style=\"color:#3FAD7E\">";
            relHtml+= nameRel +"</font>相关的信息进行分析后可看出，与其核心词";
            if(data[2]) {
                mapHtml += "<table border='0' cellspacing='0' cellpadding='0' class='table table2 table4' id='relatedWords' width='100%'>";

                for (var i = 0; i < data[2].length; i++) {
                    if (i == 0) {
                        mapHtml += "<thead><tr><th colspan='3' class='kw_th' style='background: #3FAD7E;color: white;'>" + nameRel + "</th></tr>";
                        mapHtml += "<th width='' style='color: #3FAD7E;'>核心词</th>";
                        mapHtml += "<th width='33%' style='color: #3FAD7E;'>关联词</th>";
                        mapHtml += "<th width='33%' style='color: #3FAD7E;'>关联度</th>";
                        mapHtml += "</tr></thead>";
                    }
                    mapHtml += "<tr>";
                    var obj = eval('('+data[2][i]+')');
                    if(obj){
                        if (i == 0) {
                            mapHtml += "<td rowspan='"+( data[2].length)+"' style='background-color: #fff;'>" + obj.relatedName + "</td>";
                            relHtml += "" + obj.relatedName + "</font>关联度最高的词语为";
                        } else {

                            if (i > 0 && i < 4) {
                                relHtml += "" + obj.relatedName + "(" + obj.relatedPer + ")";
                                if (i < 2) {
                                    relHtml += "、";
                                } else if (i > 0 && i < 3) {
                                    relHtml += "和";
                                } else {
                                    relHtml += "。";
                                }
                            }

                            mapHtml += "<td style='border-right: 1px dashed #E8E8E8;'>" + obj.relatedName + "</td>";
                            var per = "";
                            if (obj.relatedPer < 0.01) {
                                per = "< 0.01%";
                            } else {
                                per = obj.relatedPer;
                            }
                            mapHtml += "<td>" + per + "</td>";
                            mapHtml += "</tr>";
                        }
                    }
                }
                mapHtml += "</table>";
                mapHtml += "</div>";
            }

            mapHtml+="</div></div>";
            $("#mapTop10").html(mapHtml);
            $("#container6_msg").html(relHtml);
            randomChart.showChart(data[0], data[1], "container6");
        }else{
            var c2 = document.getElementById("container6");
            c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\" style=\"width:60px\"><br/>此时间段暂无信息</p></div>";
        }
    }

    function yearArea(shareCode){
        $.ajax({
            url : '/shareReport/yearHotArea.action',
            type : "post",
            data :{"shareCode":shareCode},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotYearAreaChart(data.dataYearArea,$("#title").val(),GetRandom(30),AreaCallBack);
                }else{
                    var c2 = document.getElementById("container4");
                    c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:130px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
                }
            }
        });
    }

    function yearOrigin(shareCode){
        $.ajax({
            url : '/shareReport/yearHotOrigin.action',
            type : "post",
            data :{"shareCode":shareCode},
            success : function(data){
                if(data.msg){
                    HeatReportDwr.getHotYearOTChart(data.dataYearSource,$("#title").val(),GetRandom(30),OriginCallBack);
                }else{
                    var c2 = document.getElementById("container3");
                    c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:130px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
                }
            }
        });
    }

    function timeQuantum(){
        if($("#timeQuantum:visible")) {
            if ($('#showStarttime').val() == '') {
                $('#showStarttime').val(startTime());
            }

            if ($('#showEndtime').val() == "") {
                $('#showEndtime').val(endTime());
            }
            if ($('#showStarttime').val() == '') {
                var str = $("#showStarttime").val();
                str = str.replace(/-/g, "/");
                var curDate = new Date(str);
                $('#showStarttime').daterangepicker({
                    "timePicker": true,
                    "timePicker24Hour": true,
                    "timePickerSeconds": true,
                    singleDatePicker: true,
                    endDate:new Date(),
                    maxDate:new Date(),
                    locale:{
                        format: 'YYYY-MM-DD HH:mm:ss'
                    }
                });
            }
        }
    }

    function confirmHotAnalysis(orderRecordId){
        $("#num").val(0);
//         chartloadingTab("hotTable");
//         chartloading("container1");
//         chartloadingTabCluster("clusterList");
//         chartloading("container2");
//         chartloading("container6");
//         chartloadingTabCluster("mapTop10");
//         chartloading("container3");
//         chartloading("container4");
//         chartloading("container5");
        var categoryId = $("#categoryId").val();
        if(categoryId) {
            $("#categoryList").show();
            chartloadingTab("senTableOne");
        }else{
            $("#categoryList").hide();
        }
        tag = 1;
        var parms = {
            'title': $("#title").val(),
            'keyword': $("#keywords").val(),
            'filterKeyword': $("#filterKeyword").val(),
            'categoryId': $("#categoryId").val(),
            'categoryType': $("#categoryType").val(),
            'secondCategory': $("#secondCategory").val(),
            'categoryLevel': $("#categoryLevel").val(),
            'date': $("#date").val(),
            'shareDate': $("#oneTime").text(),
            'orderRecordId':orderRecordId,
            'starttime':$("#starttime").val(),
            'endtime':$("#endtime").val(),
            "ticket":$("#ticket").val()
        };
        $.ajax({
            url : "/confirmHotAnalysisTask.action",
            type : "post",
            data: parms,
            success : function(data){
                if(data){
                    queryTaskStatus(data);
                }else{
                    showMsgInfo(0,"系统小差了，请稍后继续！",0);
                }
            }
        })
    }

    function queryTaskStatus(tickets){
        $.ajax({
            url:"/queryHeatShareSolidifyStatus.action",
            type:"post",
            data:{"ticket":tickets},
            success:function(data){
                if(data){
                    var list = data.heatShareList;
                    $.each(list,function(){
                        var taskId = this.analysisTaskTicket;
                        if(this.solidifyStatus==2){

                        }else if(this.solidifyStatus==4 ){
                            tag = 0;
                            $("#shareCode").val(this.shareCode);
                            $("#ticket").val("");
                            yearSummaryandline(this.shareCode);
                            yearWordCloud(this.shareCode);
                            yearOrigin(this.shareCode);
                            yearArea(this.shareCode);
                            yearRelated(this.shareCode);
                        }else if(this.solidifyStatus==0){
                            $("#collapse0").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                            $("#collapse1").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                            $("#collapse2").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                            $("#collapse3").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                            $("#collapse4").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                            $("#collapse6").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                            showMsgInfo(0,"对不起，分析失败，请尝试重新分析！",0);
                            $("#submitBtn").click(function(){
                                window.location.href="/findLogSearch.action?page=1";
                            });
                        }
                    });
                    if($("#ticket").val()!=""){
                        setTimeout(function(){queryTaskStatus(tickets)},10000);
                    }
                }
            }
        })
    }

    function goMediaFromNew(keywords,date,title,filterKeyword,starttime,endtime){
		$("#mediaSourceName").html(title);
		EChartsDwr.goMediaFrom(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),mediaFromCallBackNew);
	}
    var goMediaData;
	function mediaFromCallBackNew(data){
		goMediaData=data;
		if (null!=data[0]) {
            var dataTable=data[0];
            if(dataTable) {
            	var kk = jQuery.parseJSON(dataTable);
                    if (kk != null || kk != "") {
                    	var data =[];
                    	var v1={value:kk.weibo , name:"微博"};
                    	var v2={value:kk.kehuduan , name:"客户端"};
                    	var v3={value:kk.weixin , name:"微信"};
                    	var v4={value:kk.luntan , name:"论坛"};
                    	var v5={value:kk.wangzhan , name:"网站"};
                      	data.push(v1);
                      	data.push(v2);
                      	data.push(v3);
                      	data.push(v4);
                      	data.push(v5);
                      	var compare = function (obj1, obj2) {
						    var val1 = parseFloat(obj1.value);
						    var val2 = parseFloat(obj2.value);
						    if (val1 > val2) {
						        return -1;
						    } else if (val1 < val2) {
						        return 1;
						    } else {
						        return 0;
						    }
						}
                      	data.sort(compare);
                      	var htm="在<font style='color:#3FAD7E'>"+kk.title+"</font>中，媒体来源的信息量TOP3依次为";
                      	for(var i=0;i<data.length;i++){
                   			var d=data[i];
                      		if(i==0){
                      			htm+="<font class='fc_red'>";
                      			htm+=d.name+"("+d.value+"%)"+"、";
                      		}
                      		if(i==1){
                      			htm+=d.name+"("+d.value+"%)"+"</font>和<font class='fc_red'>";
                      		}
                      		if(i==2){
                      			htm+=d.name+"("+d.value+"%)"+"</font>。";
                      		}
                      	}

						var dd = [
			     	                {value: 100, name: data[0].name},
			     	                {value: 80, name: data[1].name},
			     	                {value: 60, name: data[2].name},
			     	                {value: 40, name: data[3].name},
			     	                {value: 20, name: data[4].name}

			     	            ];

						jquery('#collapse3').loader('hide',loaders);
                      	$("#mediaSourceChart_msg").html(htm);
                      	mediaFromShow("mediaSourceChart",data,dd);
               }

            }
        } else {
            $("#collapse3").html("<div align=\"center\" style=\"padding-top:150px; padding-bottom:150px; \"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
        }
	}
	function mediaFromShow(dom,data,dd){
		//媒体来源
        var mediaSourceChart = echarts.init(document.getElementById(dom));


        	option = {
        	      color: ['#f18d00', '#faac5f', '#eeb587', '#f4c1a8', '#cab6be'],

        	    tooltip: {
        	        trigger: 'item',
        	        formatter: "{a} <br/>{b} : {c}%"
        	    },
        	    toolbox: {
        	        orient: 'vertical',
        	        top: 'top',
        	        feature: {
//         	            dataView: {readOnly: false},
//         	            restore: {},
        	            saveAsImage: {}
        	        }
        	    },
        	    legend: {
        	        orient: 'vertical',
        	        itemGap: 20,
        	        itemWidth: 15,
        	        itemHeight: 10,
        	        left: '3%',
        	        data: [
        	        {name:'微博',icon:'rect'},
        	        {name:'客户端',icon:'rect'},
        	        {name:'微信',icon:'rect'},
        	        {name:'论坛',icon:'rect'},
        	        {name:'网站',icon:'rect'}
        	         ]
        	    },
        	    calculable: true,
        	    series: [
        	        {
        	            name: '媒体来源',
        	            type: 'funnel',
        	            left: '25%',
        	            width: '50%',

        	            min: 0,
        	            max: 100,
        	            minSize: '0%',
        	            maxSize: '100%',
        	            sort: 'ascending',

        	            label: {
        	                normal: {
        	                    formatter: '{b}'
        	                },
        	                emphasis: {
        	                    position:'inside',
        	                    formatter: '{b}媒体来源: {c}%'
        	                }
        	            },
        	            labelLine: {
        	                normal: {
        	                    show: false
        	                }
        	            },
        	            itemStyle: {
        	                normal: {
        	                	borderWidth: 0,
        	                    opacity: 1
        	                }
        	            },
        	            data: dd,
					tooltip: {
                	        show:false
                	    }
//         	            	[
//         	                {value: 100, name: '微博'},
//         	                {value: 80, name: '客户端'},
//         	                {value: 60, name: '微信'},
//         	                {value: 40, name: '论坛'},
//         	                {value: 20, name: '网站'}

//         	            ]
        	        },
        	        {
        	            name: '',
        	            type: 'funnel',
        	            left: '25%',
        	            width: '50%',
//         	            maxSize: '50%',

        	            min: 0,
        	            max: 100,
        	            minSize: '0%',
        	            maxSize: '50%',
        	            sort: 'ascending',

        	            label: {
        	                normal: {
        	                    position: 'inside',
        	                    formatter: '{c}%',
        	                    textStyle: {
        	                        color: '#fff'
        	                    }
        	                },
        	                emphasis: {
        	                    position:'inside',
        	                    formatter: '{b}: {c}%'
        	                }
        	            },
        	            itemStyle: {
        	                normal: {
        	                    opacity: 0,
        	                    borderWidth: 0
        	                }
        	            },
        	            data: data
        	        }
        	    ]
        	       };


        	 mediaSourceChart.setOption(option);
	}

	function goMediaFriendNew(keywords,date,title,filterKeyword,starttime,endtime){
		$("#mediaFriendName").html(title);
		EChartsDwr.goMediaFriend(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),mediaFriendCallBackNew);
	}
	function mediaFriendCallBackNew(data){
		if(null==data){
			jquery('#collapse4').loader('hide',loaders);
			$("#collapse4").html("<div align=\"center\" style=\"padding-top:150px; padding-bottom:150px; \"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
		}else{
		if (data) {

			var kk = jQuery.parseJSON(data[0]);
            	if (kk != null || kk != "") {
            		jquery('#collapse4').loader('hide',loaders);
            		$("#goFriendUnID1").html(kk.weibo+"%");
            		$("#goFriendUnID2").html(kk.luntan+"%");
            		$("#goFriendUnID3").html(kk.weixin+"%");
            		$("#goFriendUnID4").html(kk.wangzhan+"%");
            		$("#goFriendUnID5").html(kk.kehuduan+"%");
            		var da=[];
            		var d=kk.youhaodu*1;
            		da.push(d);
            		var wz=[];
					var w=(1-(d/2))*100;
					wz=['50%', w+'%'];

            		var data=[];
            		var v1={value:kk.weibo , name:"微博"};
                	var v2={value:kk.kehuduan , name:"客户端"};
                	var v3={value:kk.weixin , name:"微信"};
                	var v4={value:kk.luntan , name:"论坛"};
                	var v5={value:kk.wangzhan , name:"网站"};
                  	data.push(v1);
                  	data.push(v2);
                  	data.push(v3);
                  	data.push(v4);
                  	data.push(v5);
                  	var compare = function (obj1, obj2) {
					    var val1 = parseFloat(obj1.value);
					    var val2 = parseFloat(obj2.value);
					    if (val1 > val2) {
					        return -1;
					    } else if (val1 < val2) {
					        return 1;
					    } else {
					        return 0;
					    }
					}
                  	data.sort(compare);
                  	var htm="<font style='color:#3FAD7E'>"+kk.title+"</font>的总体媒体友好度为<font class='fc_red'>"+(d*100).toFixed(0)+"%</font>,其媒体友好度分布为";
                  	for(var i=0;i<data.length;i++){
               			var d=data[i];
                  		if(i==0){
                  			htm+="<font class='fc_red'>";
                  			htm+=d.name+"("+d.value+"%)"+"、";
                  		}
                  		if(i==1){
                  			htm+=d.name+"("+d.value+"%)"+"</font>和<font class='fc_red'>";
                  		}
                  		if(i==2){
                  			htm+=d.name+"("+d.value+"%)"+"</font>。";
                  		}
                  	}

                  	$("#mediaFriendlyChart_msg").html(htm);

                  	mediaFriendShow("mediaFriendlyChart",da,wz);
            	}
        } else {
            $("#collapse3").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
        }
		}
	}
	function mediaFriendShow(dom,data,wz){
		// 指定图表的配置项和数据
        var containers = document.getElementsByClassName(dom);
        var option = [{

            series: [{
            	color: ['#0e7dc0'],
                type: 'liquidFill',
                name: '媒体友好度',
                data: data ,
                radius: '72%',
                itemStyle: {
                    normal: {
                        shadowBlur: 0,
                        color:'#f9a34e'
                    }
                },
                outline: {
                     show: false
                 },
		        backgroundStyle: {
		        	 borderColor: '#f9a34e',
		             borderWidth: 4,
		             color: '#fff'
		        },
		           label: {
		             normal: {
		                 position: wz,
		                  formatter: function(v) {
		                    return (v.data*100).toFixed(0)+"%" + '\n媒体友好度';
		                },
		                textStyle: {
		                    fontSize: 18,
		                    color:'#f9a34e'
		                }
		             }
		           }
                    }]
            }];
//		containers.setOption(option);
        var charts = [];
        for (var i = 0; i < option.length; ++i) {
            var chart = echarts.init(containers[i]);
            chart.setOption(option[i]);
            charts.push(chart);
        };
	}

	//关联度
	function goAssociationNew(keywords,date,title,filterKeyword,starttime,endtime){
		$("#relevantName").html(title);
		EChartsDwr.goAssociation(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),goAssociationCallBackNew);
	}
	var goAssociationData;
	function goAssociationCallBackNew(data){
		goAssociationData=data;
		if(null!=data){
			var zhongxin=[];
			var pa=[];
			var da=jQuery.parseJSON(data[0]);
			var dx=jQuery.parseJSON(data[1]);
			var title=data[2];
			if(null!=da && da!=""){
				zhongxin=[50, 50, da.na, '#eaa269','100%','100%'];
			}
			var htm="<p>通过对<font style='color:#3FAD7E'>"+title+"</font>的相关信息进行分析，与核心词<strong>"+da.na+"</strong>关联度最高的词语依次为<font class='fc_red'>";
			if(null!=dx&&dx!=""){
				for(var i=0;i<dx.length;i++){
					var s=[];
					s.push(dx[i].xVal);
					s.push(dx[i].yVal);
					s.push(dx[i].name);
					s.push(dx[i].size);
					s.push(dx[i].u);
					var p=(dx[i].per)*1;
					var c=p.toFixed(2)+"%";
					s.push(c);
					pa.push(s);
					if(i==0){
						htm+=dx[i].name+"、";
					}
					if(i==1){
						htm+=dx[i].name+"</font>和<font class='fc_red'>";
					}
					if(i==2){
						htm+=dx[i].name+"。</font></p>";
					}
				}
			}
			jquery('#collapse6').loader('hide',loaders);

			$("#relevantChart_msg").html(htm);
//				<p>通过对与王俊凯相关的信息进行分析后可看出，核心词<font class="fc_red">王俊凯</font>关联度最高的词语为失望(17.5%)、晚安(13.66%)和月亮(13.55%)。</p>
			goAssociationView("relevantChart",zhongxin,pa);
		}else{
			jquery('#collapse6').loader('hide',loaders);
			$("#collapse6").html("<div align=\"center\" style=\"padding-top:150px; padding-bottom:150px; \"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
		}
	}

	//地域
	function goChinaNew(keywords,date,title,filterKeyword,starttime,endtime){
		$("#areaNameId").html(title);
		EChartsDwr.goChina(keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),goChinaCallBackNew);
	}
	var goChinaData;
	function goChinaCallBackNew(data){
		goChinaData=data;
		var title=data[1];
		if (data) {
            var dataTable=data[0];
            if(null!=dataTable) {
            	var kk = jQuery.parseJSON(dataTable);
            	var d1=[];
            	var d2=[];
            	var d3=[];
//	            	{name: '四川',value: randomData() },
                if (kk != null || kk != "") {

                	Object.keys(kk).forEach(function(key){
		            	var d11={name:'',value:''};
		            	d11.name=key;
		            	d11.value=kk[key];
		            	d1.push(d11);
                		if(d2.length<10){
                    		d2.push(key);
                    		d3.push(kk[key]);
                		}
              	 	});
                	var d22=[];
					for(var i=d2.length-1;i>=0;i--){
						d22.push(d2[i]);
					}
					var d33=[];
					for(var i=d3.length-1;i>=0;i--){
						d33.push(d3[i]);
					}
					var ht=" 从地域分布上来看,<font style='color:#3FAD7E'>"+title+"</font>的声量集中分布于<font class='fc_red'>";
                	ht+=d2[0]+"("+commafy(d3[0])+"条)";
                	if(null!=d2[1] && null!=d3[1]){
                		ht+="、"+d2[1]+"("+commafy(d3[1])+"条)</font>"
                		if(null!=d2[2] && null!=d2[2]){
                    		ht+="和<font class='fc_red'>"+d2[2]+"("+commafy(d3[2])+"条)</font>。"
                    	}else{
                    		ht+="。";
                    	}
                	}else{
                		ht+="。";
                	}

                	jquery('#container4').loader('hide',loaders);
                	jquery('#container5').loader('hide',loaders);
                	$("#container4_msg").html(ht);
                	goChinaShow("container4","container5",d1,d22,d33,title);
           		}
            }else{
            	$("#container4").html("<div align=\"center\" style=\"padding-top:150px;padding-bottom:150px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            	$("#container5").html("<div align=\"center\" style=\"padding-top:150px;padding-bottom:150px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
	            return false;
            }
        } else {
        	$("#container4").html("<div align=\"center\" style=\"padding-top:150px;padding-bottom:150px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
        	$("#container5").html("<div align=\"center\" style=\"padding-top:150px;padding-bottom:150px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
            return false;
        }
	}
	function goChinaShow(dom1,dom2,data,da1,da2,title){
		//地域分布
        var mapChart = echarts.init(document.getElementById(dom1));
       function randomData() {
        return Math.round(Math.random()*1000);
       }
        // 指定图表的配置项和数据
        var option = {

    tooltip: {
        trigger: 'item'
    },
    toolbox: {
    	  orient:'vertical',
        feature: {
            saveAsImage: {}
        }
    },
    visualMap: {
        min: 0,
        max: data[0].value,
        left: '0',
        bottom: '20',
        text: ['高','低'],           // 文本，默认为数值文本
        calculable: true,
        inRange: {
                color: ['#fab85e','#fa7d43', '#e34743']
            }
    },
    geo:{
    	map: 'china-contour',
    	itemStyle: {
                normal: {
                    borderWidth: 2,
                    shadowBlur: 50,
                    shadowColor: 'rgba(0, 0, 0, 0.2)'
                }
            }
    },
    series: [
        {
            name: '已转发数',
            type: 'map',
            mapType: 'china',
            roam: false,
            left:'center',
            label: {
            	 normal: {
                    show: false,
                    textStyle: {
						color: "#3a3a3a",//地图文字颜色
						fontSize: 8
					}
                 }

                    },
                    itemStyle: {
                        normal: {
                            borderColor: '#fff',
                            areaColor: '#efefef',//地图背景颜色
                        },
                        emphasis: {
                            areaColor: '#bdd3f5'
                        }
                    }
//	                    ,
//	            data:[

//	                {name: '湖北',value: randomData() }

//	            ]
        },
        {
            name: title,
            type: 'map',
            mapType: 'china',
            label: {
                normal: {
                    show: true
                },
                emphasis: {
                    show: true
                }
            },
            data:data
//	            	[
//	                {name: '四川',value: randomData() },
//	                {name: '河南',value: randomData() },
//	                {name: '安徽',value: randomData() },
//	                {name: '江西',value: randomData() }

//	            ]
        }

    ]
};

        // 使用刚指定的配置项和数据显示图表。
        mapChart.setOption(option);


//地域信息量
        var mapDisChart = echarts.init(document.getElementById(dom2));

        // 指定图表的配置项和数据
        var option = {
    title: {
        text: '地域分布Top10',
        textStyle:{fontWeight:'normal'},
        left:'20',
        top:'10'
    },
    tooltip : {
        trigger: 'axis',
        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        }
    },
    toolbox: {
    	  orient:'vertical',
        feature: {
            saveAsImage: {}
        }
    },
    grid: {
        left: '3%',
        right: '12%',
        bottom: '10%',
        top:'10%',
        containLabel: true
    },

    xAxis : [
        {
        	name:'     单位/条',
        	nameTextStyle:{
        		color:'#0086ce'
        	},
            type : 'value',
            axisLine:{//坐标轴轴线 默认 true,
            	show: true,
            	lineStyle:{
            		color:'#dbdbdb',
            		width: 1,
            		type: 'solid'
            	}
            },
            axisTick:{//坐标轴刻度
            	show: true,
            	lineStyle:{
            		color:'#888',
            		width: 1,
            		type: 'solid'
            	}
            },
            splitLine:{
            	show: false

            },
            axisLabel:{//坐标轴刻度标签
            	show: true,
            	formatter:function(v){
                    if(v>=1000){
                        return (v/1000)+"k";
                    }else{
                        return v;
                    }
                },
            	//rotate: 30,  //旋转角度
            	textStyle:{
            		color:'#888'
            	}
            }
        }
    ],
     yAxis : [
        {
            type : 'category',
            axisLine:{//坐标轴轴线 默认 true,
            	show: true,
            	lineStyle:{
            		color:'#dbdbdb',
            		width: 1,
            		type: 'solid'
            	}
            },
            axisTick:{//坐标轴刻度
            	show: true,
            	lineStyle:{
            		color:'#888',
            		width: 1,
            		type: 'solid'
            	}
            },
            axisLabel:{//坐标轴刻度标签
            	show: true,
            	//rotate: 30,  //旋转角度
            	textStyle:{
            		color:'#888'
            	}
            },
            splitLine:{
            	show: true,
            	lineStyle:{
            		color:'#dbdbdb',
            		width: 1,
            		type: 'solid'
            	}
            },
            boundaryGap : true,
            data : da1
        }
//         ,
//         {
//             type: 'category',
//             axisLine:{//坐标轴轴线 默认 true,
//             	show: false
//             },
//             axisTick:{//坐标轴刻度
//             	show: false
//             },
//             boundaryGap: true,
//            data:da2

//         }
    ],
    series : [

        {
            name:'',
            type:'bar',

            barWidth: '40%',
            itemStyle:{
            	normal:{
            		color: function(params) {
                      var colorList = [
                       '#b9a7af', '#f1b192','#b9a7af', '#f1b192','#b9a7af', '#f1b192','#b9a7af', '#f1b192','#b9a7af', '#f1b192'
                      ];
                      return colorList[params.dataIndex]
                  }
            	}
            },
            label: {
                normal: {
                	formatter:function(param){
                        if(param.data){
                            return String(param.data).replace(/(\d)(?=(\d{3})+$)/g, "$1,");
                        }else{
                            return param;
                        }
                     },
                    show: true,
                    textStyle: {
                       color: '#444'
                    },
                    position: 'right'
                }
             },
            data:da2
        }
    ]
};

        // 使用刚指定的配置项和数据显示图表。
        mapDisChart.setOption(option);
	}
//  热度值
	function degreeHeatChartFun(dom,data){
		//热度值
        var degreeHeatChart = echarts.init(document.getElementById('degreeHeatChart'));

        // 指定图表的配置项和数据
       option = {
			 title: {
			        x: "center",
			        bottom: '20%',
			        text: '热度值',
			        textStyle: {
			        	fontSize: 14,
			        	fontStyle: 'normal',
			        	color: '#333'
			        }
			    },
			    tooltip : {
			        formatter: "{a} <br/>{b} : {c}%"
			    },
			    toolbox: {
			        feature: {
// 			            restore: {},
			            saveAsImage: {}
			        }
			    },
		    series: [
		        {
		            name: '热度值',
		            type: 'gauge',
		            radius: '69%',
		            splitLine:{
		            	show: true,
		            	length: 20,
		            	splitNumber: 10,
		            	lineStyle: {
		            		width: 2,
		            		color: '#f1730b'
		            	}
		            },
		            axisTick:{
		            	show: true,
		            	length: 12,
		            	splitNumber: 10,
		            	lineStyle: {
		            		width: 2,
		            		color: '#fff'
		            	}
		            },
		            axisLine: {
		            width: 20,
		            show: true,
		            lineStyle: {
		                width:0,
		                shadowBlur: 0
		            }
		        },
		        axisLabel:{
		        	textStyle:{
		        		color: '#ada9a8'
		        	}
		        },
		        pointer:{
		        	length: '50%',
		        	width: 35
		        },
		        itemStyle:{
		        	normal:{
		        		color: '#e0521e'
		        	}
		        },
		            detail: {
		            	show: true,
		            	formatter:'{value}',
		            	offsetCenter: [0, 0],
		            	width: 50,
		            	textStyle:{color: '#fff',fontSize: 20},
		            },
		            data: [{value: data}],
		            silent: true,
		            z: 3
		        },
		         {
		            name: '指针',
		            type: 'gauge',
		            radius: '26%',
		            min: 0,
		            max: 360,
		             startAngle: 90,
		             endAngle: -269.9999,
		            splitLine:{
		            	show: false
		            },
		            axisTick:{
		            	show: false
		            },
		            axisLine: {
		            show: true,
		            lineStyle: {
		                color: [
		                    [0, '#e0521e'],
		                    [1, '#e0521e']
		                ],
		                width: 100
		            }
		        },
		        axisLabel:{
		        	show: false
		        },
		        pointer:{
		        	show: false
		        },
		        itemStyle:{
		        	normal:{
		        		color: '#e0521e'
		        	}
		        },
		           detail: {
		            	show: true,
		            	formatter:'{value}',
		            	offsetCenter: [0, 0],
		            	width: 50,
		            	textStyle:{color: '#fff',fontSize: 20},
		            },
		            data: [{value: 50}],
		            z: 2
		        },
		        {
		        	tooltip: {show: false},
		        	name:'背景颜色',
		            type: 'pie',
		            radius: ['63%', '85%'],
		            center: ['50%', '50%'],
		            hoverAnimation: false,
		            startAngle: 225,
		            labelLine: {
		                normal: {show: false}
		            },
		            label: {normal: {position: 'center'}
		                },
		            data: [{
		                value: 75,
		                itemStyle: {
		                    "normal": {
		                        "color": new echarts.graphic.LinearGradient(1, 0, 0, 0, [{
		                            "offset": 0,
		                            "color": '#f1611a'
		                        }, {
		                            "offset": 1,
		                            "color": '#f3a43c'
		                        }]),
		                    }
		                },


		            }, {
		                value: 25,
		                itemStyle: {
		                    "normal": {
		                         color: '#fff'
		                    }
		                }

		            }
		            ],
		            z: 0
		        }

		    ]
		};

        // 使用刚指定的配置项和数据显示图表。
        degreeHeatChart.setOption(option);
	}

	var relatedData;
    function relatedCallBackNew(data){
    	relatedData=data;
    	jquery('#collapse33').loader('hide',loaders);
    	var c2 = document.getElementById("container2");
    	if(null!=data[1]&&null!=data[2]){
    		var subMsg = "";
    		subMsg += "在与<font style='color:#3FAD7E'>";
    		var dx=data[2].split(",");
    		for(var i=0;i<dx.length;i++){
    			if (i == 0) {
	                 subMsg += name + "</font>相关的全部信息中， 提及频次最高的词语依次为<font class='fc_red'>" + dx[i] + "</font>";
	             } else if (i == 1) {
	                 subMsg += "<font class='fc_red'>、" + dx[i] + "</font>";
	             } else if (i == 2) {
	                 subMsg += "和<font class='fc_red'>" + dx[i] + "</font>"+"。";
           		 }
    		}
    		$("#container2_msg").html(subMsg);
    		var _chartColumn2 = cloudChart(eval(data[1]), 1, "container2" , 1);
    	}else{
    		c2.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\" style=\"width:60px\"><br/>此时间段暂无信息</p></div>";
         	return;
    	}
    }

    $("#timeToggle2 label").click(function(){
    	chartloadingTab("timeToggle2");
    	chartloadingTabCluster("container1");//折线图
    	chartloadingTab("doubleSelectId");
    	var title = $("#title").val();
        var keywords = $("#keywords").val();
        var filterKeyword = $("#filterKeyword").val();
        var categoryId=$("#categoryId").val();
        var categoryType=$("#categoryType").val();
        var secondCategory=$("#secondCategory").val();
        var date = $("#date").val();
        var categoryLevel=$("#categoryLevel").val();
        var starttime = $("#starttime").val();
        var endtime = $("#endtime").val();
        var v = $("#hourSeachToggle").val();
        v=$(this).find("input").val();
        $("#hourSeachToggle").val(v);
        if("0"==v){
        	$("#labelChangeClass1").attr("class","btn btn-sm ");
			$("#labelChangeClass2").attr("class","btn btn-sm active");
        	goVolumePig(keywords,date,title,filterKeyword,starttime,endtime);
        }else{

        	goHotWorth(keywords,date,title,filterKeyword,starttime,endtime,"1");
        }
    });
	function goVolumePig(keywords,date,title,filterKeyword,starttime,endtime){
//	        chartloading("container1");
//	        chartloadingTabCluster("clusterList");
        EChartsDwr.goVolumePig(1,keywords,'',date,title,filterKeyword,starttime,endtime,GetRandom(30),goVolumePigCallback);
    }
	function goVolumePigCallback(data){
		var c1 = document.getElementById("container1");
		jquery('#container1').loader('hide',loaders);
		jquery('#doubleSelectId').loader('hide',loaders2);
		jquery('#timeToggle2').loader('hide',loaders2);
		if(null==data){
			c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
			$("#container1_msg").html("");
			return false;
		}else{
			var dataLine = eval(data[0]);
			if (!data[0] || data[0].length == 0) {
				c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
				$("#container1_msg").html("");
				return false;
			}else{
				if (!dataLine[0].data || dataLine[0].data.length == 0) {
					c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
					$("#container1_msg").html("");
					return false;
				}else{


					var data1 = dataLine[0];
	                var alertMsg = "从声量变化趋势来看，";
	                for (var i = 0; i < data1.data.length; i++) {
	                    var listData = data1.data;
	                    var subMsg = listData[i].name;
	                    var topTime = listData[i]["label"].name;
	                    topTime = topTime.split(":")[0];
	                    topTime=topTime.replace("-","月");
	                    topTime=topTime.replace(" ","日 ");
	                    var topValue = listData[i]["label"].value;
	                    if(i==0){
	                        alertMsg += "<font style='color:#3FAD7E'>";
	                    }
	                    if(i==1){
	                        alertMsg += "<font style='color:#758DC4'>";
	                    }
	                    if(i==2){
	                        alertMsg += "<font style='color:#0e7dc0'>";
	                    }
	                    alertMsg += subMsg + '</font>的声量在' + topTime + '时达到了<font class="f_c2">' + commafy(topValue) + '</font>的峰值。';
	                }
	                alertMsg+='';
	                var areaSty= {
	                        normal: {
	                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
	                                offset: 0,
	                                color: 'rgba(241, 141, 1, 0.5)'
	                            }, {
	                                offset: 1,
	                                color: 'rgba(241, 141, 1, 0)'
	                            }], false),
	                            shadowColor: 'rgba(0, 0, 0, 0.1)',
	                            shadowBlur: 10
	                        }
	                    };
	                    dataLine[0].data[0]["areaStyle"]=areaSty;
	                jquery('#container1').loader('hide',loaders);
	                $("#container1_msg").html(alertMsg);
	                var _chartColumn1 = LineChartHeatNetwork(dataLine,"container1",1);

				}
			}
		}
	}
// 	function reloadSelect(n){
// 		var a="";
// 		if(n==1){
// 			a="degreeHeatChart";
// 		}else if(n==2){
// 			a="collapse2";
// 		}else if(n==3){
// 			a="collapse3";
// 		}else if(n==4){
// 			a="collapse4";
// 		}else if(n==5){
// 			a="collapse33";
// 		}else if(n==6){
// 			a="collapse6";
// 		}else if(n==7){
// 			a="collapse44";
// 		}
// 		chartloading(a);
// 		setTimeout(function(){
// 			jquery('#'+a).loader('hide',loaders);
// 		},3000)
// 	}
	function commafy(num){
		if((num.toString()).trim()==""){
			return"";
		}
		if(isNaN(num)){
			return"";
		}
		num = num.toString();
		if(/^.*\..*$/.test(num)){
			var pointIndex =num.lastIndexOf(".");
			var intPart = num.substring(0,pointIndex);
			var pointPart =num.substring(pointIndex+1,num.length);
			intPart = intPart +"";
			var re =/(-?\d+)(\d{3})/
			while(re.test(intPart)){
				intPart =intPart.replace(re,"$1,$2")
			}
			num = intPart+"."+pointPart;
		}else{
			num = num.toString();
			var re =/(-?\d+)(\d{3})/
			while(re.test(num)){
				num =num.replace(re,"$1,$2")
			}
		}
		return num;

	}

	function reloadSelect(n){
		//热度值
		if(n==1){
			var clazz=$("#reDuGaiKuang").attr("class");
			if(clazz.indexOf("fullCon")<0){
				//缩小
				chartloadingReloadSelect("degreeHeatChart","1");
			}else{
				//放大
				chartloadingReloadSelect("degreeHeatChart","2");
			}

			goHotWorthToBig(hotWorthData,"1");
		}else if(n==2){
			// 热度指数趋势
			var clazz=$("#reDuZhiShuQuShi").attr("class");
			if(clazz.indexOf("fullCon")<0){
				//缩小
				chartloadingReloadSelect("container1","1");
			}else{
				//放大
				chartloadingReloadSelect("container1","2");
			}

			goHotWorthToBig(hotWorthData,"2");
		}else if(n==3){
			//媒体来源
			var clazz=$("#meiTiFrom").attr("class");
			if(clazz.indexOf("fullCon")<0){
				//缩小
				chartloadingReloadSelect("mediaSourceChart","1");
			}else{
				//放大
				chartloadingReloadSelect("mediaSourceChart","2");
			}

			mediaFromCallBackNew(goMediaData);
		}else if(n==4){
			//媒体友好度
			chartloading("collapse4");//媒体友好度
			setTimeout(function(){
			jquery('#collapse4').loader('hide',loaders);
		},3000)
//				var clazz=$("#meiTiFriend").attr("class");
//				if(clazz.indexOf("fullCon")<0){
//					//缩小
//					chartloadingReloadSelect("mediaFriendlyChart","1");
//				}else{
//					//放大
//					chartloadingReloadSelect("mediaFriendlyChart","2");
//				}

//				mediaFriendCallBack(goMediaData);
		}else if(n==5){
			//词云
			var clazz=$("#guanJianCiYun").attr("class");
			if(clazz.indexOf("fullCon")<0){
				//缩小
				chartloadingReloadSelect("container2","1");
			}else{
				//放大
				chartloadingReloadSelect("container2","2");
			}

			relatedCallBackNew(relatedData);
		}else if(n==6){
			//关联词
			var clazz=$("#guanLianCi").attr("class");
			if(clazz.indexOf("fullCon")<0){
				//缩小
				chartloadingReloadSelect("relevantChart","1");
			}else{
				//放大
				chartloadingReloadSelect("relevantChart","2");
			}

			goAssociationCallBackNew(goAssociationData);
		}else if(n==7){
			//地域分析
			var clazz=$("#diYuFenXi").attr("class");
			if(clazz.indexOf("fullCon")<0){
				//缩小
				chartloadingReloadSelect("container4","1");
				chartloadingReloadSelect("container5","1");
			}else{
				//放大
				chartloadingReloadSelect("container4","2");
				chartloadingReloadSelect("container5","2");
			}

			goChinaCallBackNew(goChinaData);
		}
	}
	function goHotWorthToBig(data,flag){
		jquery('#selectTimeWait').loader('hide',loaders2);
    	jquery('#doubleSelectId').loader('hide',loaders2);
    	jquery('#container1').loader('hide',loaders);
    	jquery('#degreeHeatChart').loader('hide',loaders);
    	jquery('.counter').loader('hide',loaders);
		$("#labelChangeClass1").attr("class","btn btn-sm active");
		$("#labelChangeClass2").attr("class","btn btn-sm");
		if(flag=="1"){
			//热度值
			var date = $("#date").val();
            if ((data.length==1&&data[0] == null) || (data.length==1&&data[0] == "")) {
                $("#container0").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                return false;
            } else {
                var html="";
                var names=$("#title").val();
                var name="";
                var dataTable=data[0];
                if(dataTable&&dataTable.length>0) {
                    for (var i = 0; i < dataTable.length; i++) {
                        var obj = eval('(' + dataTable[i] + ')');
                        if (obj != null || obj != "") {
                            name = names.split(",")[i];
                            $("#reDuName").html(name);
                            if (name.length > 10) {
                                name = name.substring(0, 10) + "...";
                            }
                            var cus = "";
                            if (obj.ratioHotCustom < 0.01) {
                                cus = "< 0.01";
                            } else {
                                cus = obj.ratioHotCustom;
                            }

                            html += "<tr><td>";
                            if (i == 0) {
                                html += "<font style='color:#3FAD7E'>";
                                $("#hotCus").val(cus);
                            } else if (i == 1) {
                                html += "<font style='color:#758DC4'>";
                            } else if (i == 2) {
                                html += "<font style='color:#0e7dc0'>";
                            }

                            html += name + "</font></td><td>" + cus + "</td>";
                            if(date && date == 24){
                                html += "<td>" + obj.ratioCustom + "%";
                                var ratCus = "" + obj.ratioCustom;
                                if (ratCus.indexOf("-") != -1) {

                                    html += "<i class='icon-arrow-down f_c4'>";
                                } else if (ratCus.length == 1 && ratCus.substring(0, 1) == "0") {

                                } else {
                                    html += "<i class='icon-arrow-up f_c2'>";
                                }
                                html += "</td>";
                                html += "<td>" + obj.differenceCustom;
                                var diffCus = "" + obj.differenceCustom;
                                if (diffCus.indexOf("-") != -1) {
                                    html += "<i class='icon-arrow-down f_c4'>";

                                } else if (diffCus.length == 1 && diffCus.substring(0, 1) == "0") {

                                } else {
                                    html += "<i class='icon-arrow-up f_c2'>";
                                }
                                html += "</td>";
                            }else {
                                html += "<td>" + obj.weiboNum + "</td>";
                                html += "<td>" + obj.weixinNum + "</td>";
                            }
                            html += "<td>" + obj.numberCustom + "</td>";
                            html += "</tr>";
                        }
                    }
                	jquery('#degreeHeatChart').loader('hide',loaders);
                    //热度值
                    degreeHeatChartFun("degreeHeatChart",obj.ratioHotCustom+"");
                }else{
                    $("#container1").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                    $("#degreeHeatChart").html("<div align=\"center\" style=\"padding-top:50px;margin-top: 90px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                    $(".counter").html("<div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>");
                }
            }
		}else if("2"==flag){
			//热度指数趋势
			var c1 = document.getElementById("container1");
    if (!data[1] || data[1].length == 0) {
        c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px;margin-top: 70px;\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
        return false;
    } else {
        var dataLine = eval(data[1]);
        if (dataLine[0].data == null || dataLine[0].data.length == 0) {
            c1.innerHTML = "<br> <div align=\"center\" style=\"padding-top:50px\"><p style=\"display:inline;font-size: 14px\"><img src=\"http://cdn.files.51wyq.cn/web/images/shouye/warn.png\"><br/>此时间段暂无信息</p></div>";
            return;
        } else {
            var data1 = dataLine[0];
            var alertMsg = "从热度指数的变化趋势来看，";
            for (var i = 0; i < data1.data.length; i++) {
                var listData = data1.data;
                var subMsg = listData[i].name;
                var topTime = listData[i]["label"].name;
                topTime = topTime.split(":")[0];
                topTime=topTime.replace("-","月");
                topTime=topTime.replace(" ","日 ");
                var topValue = listData[i]["label"].value;
                if(i==0){
                    alertMsg += "<font style='color:#3FAD7E'>";
                }
                if(i==1){
                    alertMsg += "<font style='color:#758DC4'>";
                }
                if(i==2){
                    alertMsg += "<font style='color:#0e7dc0'>";
                }
                alertMsg += subMsg + '</font>的热度在' + topTime + '时达到了<font class="f_c2">' + commafy(topValue) + '</font>的峰值。';
            }
            alertMsg+='';
            var areaSty= {
                normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0,
                        color: 'rgba(241, 141, 1, 0.5)'
                    }, {
                        offset: 1,
                        color: 'rgba(241, 141, 1, 0)'
                    }], false),
                    shadowColor: 'rgba(0, 0, 0, 0.1)',
                    shadowBlur: 10
                }
            };
            dataLine[0].data[0]["areaStyle"]=areaSty;
            jquery('#collapse2').loader('hide',loaders);
            $("#container1_msg").html(alertMsg);
            var _chartColumn1 = LineChartHeatNetwork(dataLine,"container1",1);
        }
    }
		}
	}

	function chartloadingReloadSelect(id,flag){
    	if(id=="mediaFriendlyChart"){
    		var parent = $("."+id).parent();
            $("."+id).remove();
            if(flag=="1"){
    	        var heigth = 277;
            }else{
    	        var heigth = 600;
            }
            parent.html('<div class="'+id+'" style="width: 100%; height:'+heigth+'px;" class="chart_shuiyin"></div>');
                jquery('.' + id).loader('show', loaders);
    	}else{
    	var parent = $("#"+id).parent();
        $("#"+id).remove();
        if(flag=="1"){
        	if(id=="degreeHeatChart"){
        		var heigth = 275;
        	}else if(id=="container1"){
        		var heigth = 400;
        	}else if(id=="mediaSourceChart"){
        		var heigth = 320;
        	}else if(id=="container2"){
        		var heigth = 320;
        	}else if(id=="relevantChart"){
        		var heigth = 320;
        	}else if(id=="container4"){
        		var heigth = 450;
        	}else if(id=="container5"){
        		var heigth = 450;
        	}
        }else{
        	if(id=="container1"){
        		var heigth = 550;
        	}else{
        		var heigth = 600;
        	}
        }
        parent.html('<div id="'+id+'" style="width: 100%; height:'+heigth+'px;" class="chart_shuiyin"></div>');
            jquery('#' + id).loader('show', loaders);
    }
    }
</script>


</body>

</html>